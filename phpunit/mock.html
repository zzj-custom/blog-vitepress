<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>测试替身 | 求知若愚</title>
    <meta name="description" content="知识文章和随笔记录">
    <link rel="stylesheet" href="/blog-vitepress/assets/style.05fd9d65.css">
    <link rel="modulepreload" href="/blog-vitepress/assets/chunks/AlgoliaSearchBox.d45cd405.js">
    <link rel="modulepreload" href="/blog-vitepress/assets/app.b68c4d44.js">
    <link rel="modulepreload" href="/blog-vitepress/assets/phpunit_mock.md.ad73e9a3.lean.js">
    
    <link rel="icon" href="/favicon.ico">
  <meta name="twitter:title" content="测试替身 | 求知若愚">
  <meta property="og:title" content="测试替身 | 求知若愚">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme"><header class="nav-bar" data-v-675d8756><div class="sidebar-button" data-v-675d8756><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z" class></path></svg></div><a class="nav-bar-title" href="/blog-vitepress/" aria-label="求知若愚, back to home" data-v-675d8756 data-v-cc01ef16><img class="logo" src="/blog-vitepress/favicon.ico" alt="Logo" data-v-cc01ef16> 求知若愚</a><div class="flex-grow" data-v-675d8756></div><div class="nav" data-v-675d8756><nav class="nav-links" data-v-675d8756 data-v-eab3edfe><!--[--><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item isExternal" href="https://zzj-custom.github.io/blog-vitepress/" target="_blank" rel="noopener noreferrer" data-v-b8818f8c>我的个人网站 <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-b8818f8c><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item isExternal" href="https://juejin.cn/user/976022057793207" target="_blank" rel="noopener noreferrer" data-v-b8818f8c>掘金 <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-b8818f8c><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item isExternal" href="https://github.com/zzj-custom" target="_blank" rel="noopener noreferrer" data-v-b8818f8c>Github <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-b8818f8c><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><!--]--><!----><!----></nav></div><!--[--><!--[--><div class="algolia-search-box" id="docsearch"></div><!--]--><!--]--></header><aside class="sidebar" data-v-83e92a68><nav class="nav-links nav" data-v-83e92a68 data-v-eab3edfe><!--[--><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item isExternal" href="https://zzj-custom.github.io/blog-vitepress/" target="_blank" rel="noopener noreferrer" data-v-b8818f8c>我的个人网站 <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-b8818f8c><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item isExternal" href="https://juejin.cn/user/976022057793207" target="_blank" rel="noopener noreferrer" data-v-b8818f8c>掘金 <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-b8818f8c><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item isExternal" href="https://github.com/zzj-custom" target="_blank" rel="noopener noreferrer" data-v-b8818f8c>Github <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-b8818f8c><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><!--]--><!----><!----></nav><!--[--><!--]--><ul class="sidebar-links" data-v-83e92a68><!--[--><li class="sidebar-link"><p class="sidebar-link-item">php单元测试</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/blog-vitepress/phpunit/base">基础内容</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/blog-vitepress/phpunit/assert">断言</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item active" href="/blog-vitepress/phpunit/mock">测试替身</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#一丶stubs-桩件，替换掉被测试系统所依赖的组件">一丶Stubs(桩件，替换掉被测试系统所依赖的组件)</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#二丶-mock-object-仿件对象">二丶 Mock Object (仿件对象)</a><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="#匹配器">匹配器</a><!----></li></ul></li><li class="sidebar-link"><a class="sidebar-link-item" href="#三丶-对特质（trait）与抽象类进行模仿">三丶 对特质（Trait）与抽象类进行模仿</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="#四丶-web-服务（web-services）进行上桩或模仿">四丶 Web 服务（Web Services）进行上桩或模仿</a><!----></li></ul></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">纷销客</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/blog-vitepress/fxiaoke/api-analysis/index">api分析</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/blog-vitepress/fxiaoke/analysis/index">指标维度字段分析</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">golang学习之路</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/blog-vitepress/golang/basic-knowledge">基础知识</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/blog-vitepress/golang/article/index">优秀文章</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">笔记</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/blog-vitepress/notes/git">git</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/blog-vitepress/notes/linux">linux</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/blog-vitepress/notes/typescript">typescript</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/blog-vitepress/notes/docker">docker</a><!----></li></ul></li><!--]--></ul><!--[--><!--]--></aside><div class="sidebar-mask"></div><main class="page" data-v-7eddb2c4><div class="container" data-v-7eddb2c4><!--[--><!--]--><div style="position:relative;" class="content" data-v-7eddb2c4><div><h1 id="frontmatter-title" tabindex="-1">测试替身 <a class="header-anchor" href="#frontmatter-title" aria-hidden="true">#</a></h1><blockquote><p> 有时候测试的时候需要依赖很多其他的组件，外部的<code>mysql</code>,<code>redis</code>以及其他的服务，测试起来相当麻烦，如果在编写测试时无法使用（或选择不使用）实际的依赖组件（<code>DOC</code>），可以用测试替身来代替。测试替身不需要和真正的依赖组件有完全一样的的行为方式；它只需要提供和真正的组件同样的 <code>API</code> 即可，这样被测系统就会以为它是真正的组件！  PHPUnit提供的 <code>createStub($type)</code>、<code>createMock($type)</code> 和 <code>getMockBuilder($type)</code> 方法可以在测试中用来自动生成对象，此对象可以充当任意指定原版类型（接口或类名）的测试替身。在任何预期或要求使用原版类的实例对象的上下文中都可以使用这个测试替身对象来代替。  <code>createStub($type)</code> 和 <code>createMock($type)</code> 方法直接返回指定类型（接口或类）的测试替身对象实例。此测试替身的创建使用了最佳实践默认方案。原始类的 <code>__construct()</code> 和 <code>__clone()</code> 方法不会执行，且不对传递给测试替身的方法的参数进行克隆。如果这些默认值非你所需，可以用 <code>getMockBuilder($type)</code> 方法并使用流畅式接口来定制测试替身的生成过程。  在默认情况下，原版类的所有方法都会被替换为返回 <code>null</code> 的伪实现（其中不会调用原版方法）。使用诸如 <code>will($this-&gt;returnValue())</code> 之类的方法可以对这些伪实现在被调用时应当返回什么值做出配置。</p></blockquote><h2 id="一丶stubs-桩件，替换掉被测试系统所依赖的组件" tabindex="-1">一丶<code>Stubs(桩件，替换掉被测试系统所依赖的组件)</code> <a class="header-anchor" href="#一丶stubs-桩件，替换掉被测试系统所依赖的组件" aria-hidden="true">#</a></h2><div class="demo-block demo-mock" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例：想要上桩的类</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-php"><pre><code>
<span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token keyword">declare</span><span class="token punctuation">(</span>strict_types<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">namespace</span> <span class="token package">App<span class="token punctuation">\</span>Infrastructure<span class="token punctuation">\</span>Service<span class="token punctuation">\</span>PlatformBar<span class="token punctuation">\</span>Requests</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name-definition class-name">PlatformBarService</span>
<span class="token punctuation">{</span>
    <span class="token comment">/**
     * 发送短信
     *
     * @param string $mobile 订单取票人手机号
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">sendMessage</span><span class="token punctuation">(</span><span class="token keyword type-hint">string</span> <span class="token variable">$mobile</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword return-type">array</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">platformRpcApiClient</span><span class="token operator">-&gt;</span><span class="token function">request</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;Order/Sms/orderCancelVcodeSend&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">[</span>
            <span class="token string single-quoted-string">&#39;orderTel&#39;</span> <span class="token operator">=&gt;</span> <span class="token variable">$mobile</span><span class="token punctuation">,</span>
        <span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</span></code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><div class="demo-block demo-mock" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例：对 <code>sendMessage</code> 方法进行上桩</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-php"><pre><code>
<span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">namespace</span> <span class="token package">HyperfTest<span class="token punctuation">\</span>Domain<span class="token punctuation">\</span>Logic<span class="token punctuation">\</span>Order<span class="token punctuation">\</span>Message</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>Infrastructure<span class="token punctuation">\</span>Model<span class="token punctuation">\</span>Order<span class="token punctuation">\</span>Order</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>Infrastructure<span class="token punctuation">\</span>Repository<span class="token punctuation">\</span>Order<span class="token punctuation">\</span>OrderRepository</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">App<span class="token punctuation">\</span>Infrastructure<span class="token punctuation">\</span>Service<span class="token punctuation">\</span>PlatformBar<span class="token punctuation">\</span>PlatformBarService</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Hyperf<span class="token punctuation">\</span>Testing<span class="token punctuation">\</span>Client</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">Mockery<span class="token punctuation">\</span>Exception</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">PHPUnit<span class="token punctuation">\</span>Framework<span class="token punctuation">\</span>MockObject<span class="token punctuation">\</span>MockObject</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">PHPUnit<span class="token punctuation">\</span>Framework<span class="token punctuation">\</span>TestCase</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">PHPUnit<span class="token punctuation">\</span>Framework<span class="token punctuation">\</span>TestResult</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name-definition class-name">OrderMessageTest</span> <span class="token keyword">extends</span> <span class="token class-name">TestCase</span>
<span class="token punctuation">{</span>
    <span class="token keyword">protected</span> <span class="token class-name type-declaration">Client</span> <span class="token variable">$client</span><span class="token punctuation">;</span>

    <span class="token keyword">protected</span> <span class="token class-name type-declaration">OrderRepository</span> <span class="token variable">$orderRepository</span><span class="token punctuation">;</span>

    <span class="token keyword">protected</span> <span class="token class-name type-declaration">PlatformBarService</span> <span class="token variable">$platformBarService</span><span class="token punctuation">;</span>

    <span class="token keyword">protected</span> <span class="token keyword type-declaration">string</span> <span class="token variable">$key</span> <span class="token operator">=</span> <span class="token string single-quoted-string">&#39;platform_rpc_api&#39;</span><span class="token punctuation">;</span>

    <span class="token keyword">protected</span> <span class="token class-name type-declaration">MockObject</span> <span class="token variable">$stub</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">__construct</span><span class="token punctuation">(</span><span class="token operator">?</span><span class="token keyword type-hint">string</span> <span class="token variable">$name</span> <span class="token operator">=</span> <span class="token constant">null</span><span class="token punctuation">,</span> <span class="token keyword type-hint">array</span> <span class="token variable">$data</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token variable">$dataName</span> <span class="token operator">=</span> <span class="token string single-quoted-string">&#39;&#39;</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword static-context">parent</span><span class="token operator">::</span><span class="token function">__construct</span><span class="token punctuation">(</span><span class="token variable">$name</span><span class="token punctuation">,</span> <span class="token variable">$data</span><span class="token punctuation">,</span> <span class="token variable">$dataName</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">client</span> <span class="token operator">=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token class-name static-context">Client</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">orderRepository</span> <span class="token operator">=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token class-name static-context">OrderRepository</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">platformBarService</span> <span class="token operator">=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token class-name static-context">PlatformBarService</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">stub</span> <span class="token operator">=</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">getMockBuilder</span><span class="token punctuation">(</span><span class="token class-name static-context">PlatformBarService</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">)</span>
            <span class="token operator">-&gt;</span><span class="token function">disableOriginalConstructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span>   <span class="token comment">// 不走构造方法</span>
            <span class="token operator">-&gt;</span><span class="token function">disableOriginalClone</span><span class="token punctuation">(</span><span class="token punctuation">)</span>   <span class="token comment">// 不克隆</span>
            <span class="token operator">-&gt;</span><span class="token function">disallowMockingUnknownTypes</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 允许未知类型</span>
            <span class="token operator">-&gt;</span><span class="token function">getMock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">createSerialOrderNo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword return-type">string</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string single-quoted-string">&#39;220512105107222843&#39;</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">createResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name return-type">TestResult</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token keyword static-context">parent</span><span class="token operator">::</span><span class="token function">createResult</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// TODO: Change the autogenerated stub</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * @test
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">serialOrderData</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token class-name return-type">Order</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$serialOrderNo</span> <span class="token operator">=</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">createSerialOrderNo</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token variable">$order</span> <span class="token operator">=</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">orderRepository</span><span class="token operator">-&gt;</span><span class="token function">findBySerialOrderNo</span><span class="token punctuation">(</span><span class="token variable">$serialOrderNo</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">assertTrue</span><span class="token punctuation">(</span><span class="token operator">!</span><span class="token function">is_null</span><span class="token punctuation">(</span><span class="token variable">$order</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> <span class="token variable">$order</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * @test
     * @depends serialOrderData
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">messageCode</span><span class="token punctuation">(</span><span class="token class-name type-declaration">Order</span> <span class="token variable">$order</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">assertTrue</span><span class="token punctuation">(</span><span class="token function">is_string</span><span class="token punctuation">(</span><span class="token variable">$order</span><span class="token operator">-&gt;</span><span class="token property">user_mobile</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token variable">$stub</span> <span class="token operator">=</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">createStub</span><span class="token punctuation">(</span><span class="token class-name static-context">PlatformBarService</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token variable">$stub</span><span class="token operator">-&gt;</span><span class="token function">method</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;sendMessage&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">willReturn</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;foo&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">assertSame</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;foo&#39;</span><span class="token punctuation">,</span> <span class="token variable">$stub</span><span class="token operator">-&gt;</span><span class="token function">sendMessage</span><span class="token punctuation">(</span><span class="token variable">$order</span><span class="token operator">-&gt;</span><span class="token property">user_mobile</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * @test
     * @depends serialOrderData
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">exampleStub</span><span class="token punctuation">(</span><span class="token class-name type-declaration">Order</span> <span class="token variable">$order</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">stub</span><span class="token operator">-&gt;</span><span class="token function">method</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;sendMessage&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">willReturn</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;foo&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 同上类似，但是更加强大</span>
        <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">stub</span><span class="token operator">-&gt;</span><span class="token function">method</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;sendMessage&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">will</span><span class="token punctuation">(</span><span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">returnValue</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;foo&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 返回参数跟传入参数相同</span>
        <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">stub</span><span class="token operator">-&gt;</span><span class="token function">method</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;sendMessage&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">will</span><span class="token punctuation">(</span><span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">returnArgument</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 返回自身的对象引用</span>
        <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">stub</span><span class="token operator">-&gt;</span><span class="token function">method</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;sendMessage&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">will</span><span class="token punctuation">(</span><span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">returnSelf</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 将参数和相应的返回值关联起来建立映射</span>
        <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">stub</span><span class="token operator">-&gt;</span><span class="token function">method</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;sendMessage&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">will</span><span class="token punctuation">(</span><span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">returnValueMap</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;a&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;b&#39;</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;c&#39;</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 需要返回计算得到的值而不是固定值</span>
        <span class="token comment">// $stub-&gt;sendMessage(&#39;createSerialOrderNo&#39;)返回的结果就是createSerialOrderNo(&#39;createSerialOrderNo&#39;)方法返回的结果</span>
        <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">stub</span><span class="token operator">-&gt;</span><span class="token function">method</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;sendMessage&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">will</span><span class="token punctuation">(</span><span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">returnCallback</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;createSerialOrderNo&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">assertSame</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;foo&#39;</span><span class="token punctuation">,</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">stub</span><span class="token operator">-&gt;</span><span class="token function">sendMessage</span><span class="token punctuation">(</span><span class="token variable">$order</span><span class="token operator">-&gt;</span><span class="token property">user_mobile</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * @test
     * @depends serialOrderData
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">exampleOnConsecutiveCallsStub</span><span class="token punctuation">(</span><span class="token class-name type-declaration">Order</span> <span class="token variable">$order</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$stub</span> <span class="token operator">=</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">createStub</span><span class="token punctuation">(</span><span class="token class-name static-context">PlatformBarService</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">// 相比于建立回调方法，有一个更简单的选择是直接给出期望返回值的列表</span>
        <span class="token variable">$stub</span><span class="token operator">-&gt;</span><span class="token function">method</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;sendMessage&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">will</span><span class="token punctuation">(</span><span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">onConsecutiveCalls</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">assertSame</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token variable">$stub</span><span class="token operator">-&gt;</span><span class="token function">sendMessage</span><span class="token punctuation">(</span><span class="token variable">$order</span><span class="token operator">-&gt;</span><span class="token property">user_mobile</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">assertSame</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token variable">$stub</span><span class="token operator">-&gt;</span><span class="token function">sendMessage</span><span class="token punctuation">(</span><span class="token variable">$order</span><span class="token operator">-&gt;</span><span class="token property">user_mobile</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">assertSame</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span> <span class="token variable">$stub</span><span class="token operator">-&gt;</span><span class="token function">sendMessage</span><span class="token punctuation">(</span><span class="token variable">$order</span><span class="token operator">-&gt;</span><span class="token property">user_mobile</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">assertSame</span><span class="token punctuation">(</span><span class="token number">7</span><span class="token punctuation">,</span> <span class="token variable">$stub</span><span class="token operator">-&gt;</span><span class="token function">sendMessage</span><span class="token punctuation">(</span><span class="token variable">$order</span><span class="token operator">-&gt;</span><span class="token property">user_mobile</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 对方法的调用进行上桩，抛出异常
     *
     * @test
     * @depends serialOrderData
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">exampleException</span><span class="token punctuation">(</span><span class="token class-name type-declaration">Order</span> <span class="token variable">$order</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$stub</span> <span class="token operator">=</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">createStub</span><span class="token punctuation">(</span><span class="token class-name static-context">PlatformBarService</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token variable">$stub</span><span class="token operator">-&gt;</span><span class="token function">method</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;sendMessage&#39;</span><span class="token punctuation">)</span><span class="token operator">-&gt;</span><span class="token function">will</span><span class="token punctuation">(</span><span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">throwException</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">Exception</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token variable">$stub</span><span class="token operator">-&gt;</span><span class="token function">sendMessage</span><span class="token punctuation">(</span><span class="token variable">$order</span><span class="token operator">-&gt;</span><span class="token property">user_mobile</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</span></code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><blockquote><p>说明：添加<code>@test</code>可以表示这个方法是一个测试方法，添加<code>@depends serialOrderData</code>，表示改测试类的传参依赖于<code>depends</code>后面方法名的返回结果</p></blockquote><hr><h2 id="二丶-mock-object-仿件对象" tabindex="-1">二丶 <code>Mock Object (仿件对象)</code> <a class="header-anchor" href="#二丶-mock-object-仿件对象" aria-hidden="true">#</a></h2><blockquote><p> 将对象替换为能验证预期行为（例如断言某个方法必会被调用）的测试替身的实践方法称为模仿（<code>mocking</code>）。  可以用仿件对象（<code>mock object</code>）“作为观察点来核实被测试系统在测试中的间接输出。通常，仿件对象还需要包括桩件的功能，因为如果测试尚未失败则仿件对象需要向被测系统返回一些值，但是其重点还是在对间接输出的核实上。因此，仿件对象远不止是桩件加断言，它是以一种从根本上完全不同的方式来使用的”（<code>Gerard Meszaros</code>）。</p></blockquote><h3 id="匹配器" tabindex="-1"><code>匹配器</code> <a class="header-anchor" href="#匹配器" aria-hidden="true">#</a></h3><table><thead><tr><th style="text-align:center;">匹配器</th><th style="text-align:center;">含义</th></tr></thead><tbody><tr><td style="text-align:center;">any()</td><td style="text-align:center;">方法执行任意次数时匹配成功。</td></tr><tr><td style="text-align:center;">never()</td><td style="text-align:center;">方法从未执行时匹配成功。</td></tr><tr><td style="text-align:center;">atLeastOnce()</td><td style="text-align:center;">方法执行至少一次时匹配成功。</td></tr><tr><td style="text-align:center;">once()</td><td style="text-align:center;">方法执行恰好一次时匹配成功。</td></tr><tr><td style="text-align:center;">exactly(int <code>$count</code>)</td><td style="text-align:center;">方法执行恰好 <code>$count</code> 次时匹配成功。</td></tr><tr><td style="text-align:center;">at(int <code>$index</code>)</td><td style="text-align:center;">方法是第 <code>$index</code> 个执行的方法时匹配成功。</td></tr></tbody></table><hr><blockquote><p>如一开始提到的，如果 <code>createStub()</code> 和 <code>createMock()</code> 方法在生成测试替身时所使用的默认值不符合你的要求，则可以通过 <code>getMockBuilder($type)</code> 方法来用流畅式接口定制测试替身的生成过程。以下是仿件生成器所提供的方法列表：</p></blockquote><ul><li><code>setMethods(array $methods)</code> 可以在仿件生成器对象上调用，来指定哪些方法将被替换为可配置的测试替身。其他方法的行为不会有所改变。如果调用 <code>setMethods(null)</code>，那么没有方法会被替换。</li><li>可以在仿件生成器对象上调用 <code>setMethodsExcept(array $methods)</code> 来指定哪些方法不被替换为可配置的测试替身，与此同时所有其他 <code>public</code> 方法都会被替换。<code>setMethods()</code> 的作用则相反。</li><li><code>setConstructorArgs(array $args)</code> 可用于向原版类的构造函数（默认情况下不会被替换为伪实现）提供参数数组。</li><li><code>setMockClassName($name)</code> 可用于指定生成的测试替身类的类名。</li><li><code>disableOriginalConstructor()</code> 参数可用于禁用对原版类的构造方法的调用。</li><li><code>disableOriginalClone()</code> 可用于禁用对原版类的克隆方法的调用。</li><li><code>disableAutoload()</code> 可用于在测试替身类的生成期间禁用 <code>__autoload()</code>。</li></ul><hr><div class="demo-block demo-mock" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例：模拟的<code>observer</code>类</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-php"><pre><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>


<span class="token keyword">namespace</span> <span class="token package">HyperfTest<span class="token punctuation">\</span>Cases</span><span class="token punctuation">;</span>


<span class="token keyword">class</span> <span class="token class-name-definition class-name">Observer</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">update</span><span class="token punctuation">(</span><span class="token variable">$argument</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">//TODO:更新数据</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">reportError</span><span class="token punctuation">(</span><span class="token variable">$errorCode</span><span class="token punctuation">,</span> <span class="token variable">$errorMessage</span><span class="token punctuation">,</span> <span class="token class-name type-declaration">Subject</span> <span class="token variable">$subject</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// TODO:异常处理</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</span></code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><div class="demo-block demo-mock" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例：模拟的 <code>subject</code> 类</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-php"><pre><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>
<span class="token keyword">declare</span><span class="token punctuation">(</span>strict_types<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">namespace</span> <span class="token package">HyperfTest<span class="token punctuation">\</span>Cases</span><span class="token punctuation">;</span>

<span class="token keyword">class</span> <span class="token class-name-definition class-name">Subject</span>
<span class="token punctuation">{</span>
    <span class="token keyword">protected</span> <span class="token keyword type-declaration">array</span> <span class="token variable">$observers</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">protected</span> <span class="token keyword type-declaration">string</span> <span class="token variable">$name</span><span class="token punctuation">;</span>

    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">__construct</span><span class="token punctuation">(</span><span class="token variable">$name</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">name</span> <span class="token operator">=</span> <span class="token variable">$name</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword return-type">string</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">name</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">attach</span><span class="token punctuation">(</span><span class="token class-name type-declaration">Observer</span> <span class="token variable">$observer</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">observers</span><span class="token punctuation">[</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token variable">$observer</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">notify</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;something&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">doSomethingError</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">observers</span> <span class="token keyword">as</span> <span class="token variable">$observer</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token variable">$observer</span><span class="token operator">-&gt;</span><span class="token function">reportError</span><span class="token punctuation">(</span><span class="token number">42</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;Something error happened&#39;</span><span class="token punctuation">,</span> <span class="token variable">$this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">protected</span> <span class="token keyword">function</span> <span class="token function-definition function">notify</span><span class="token punctuation">(</span><span class="token variable">$argument</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">foreach</span> <span class="token punctuation">(</span><span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token property">observers</span> <span class="token keyword">as</span> <span class="token variable">$observer</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token variable">$observer</span><span class="token operator">-&gt;</span><span class="token function">update</span><span class="token punctuation">(</span><span class="token variable">$argument</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</span></code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><div class="demo-block demo-mock" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例：对<code>subject</code>类进行模拟</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-php"><pre><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">declare</span><span class="token punctuation">(</span>strict_types<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">/**
 * This file is part of Hyperf.
 *
 * @link     https://www.hyperf.io
 * @document https://hyperf.wiki
 * @contact  group@hyperf.io
 * @license  https://github.com/hyperf/hyperf/blob/master/LICENSE
 */</span>
<span class="token keyword">namespace</span> <span class="token package">HyperfTest<span class="token punctuation">\</span>Cases</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">PHPUnit<span class="token punctuation">\</span>Framework<span class="token punctuation">\</span>TestCase</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">stdClass</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * @internal
 * @coversNothing
 */</span>
<span class="token keyword">class</span> <span class="token class-name-definition class-name">SubjectTest</span> <span class="token keyword">extends</span> <span class="token class-name">TestCase</span>
<span class="token punctuation">{</span>
    <span class="token comment">/**
     * @test
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">observerUpdate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword return-type">void</span>
    <span class="token punctuation">{</span>
        <span class="token comment">// 为 [Observer] 创建仿件, 模仿 [update()] 方法</span>
        <span class="token variable">$observer</span> <span class="token operator">=</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">createMock</span><span class="token punctuation">(</span><span class="token class-name static-context">Observer</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 为 [update()] 方法建立预期, 只会以字符串 [someThing] 为参数调用一次</span>
        <span class="token comment">// [with()] 方法可以携带任何数量的参数，对应于被模仿的方法的参数数量。可以对方法的参数指定更加高等的约束而不仅是简单的匹配。</span>
        <span class="token variable">$observer</span><span class="token operator">-&gt;</span><span class="token function">expects</span><span class="token punctuation">(</span><span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">once</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token operator">-&gt;</span><span class="token function">method</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;update&#39;</span><span class="token punctuation">)</span>
            <span class="token operator">-&gt;</span><span class="token function">with</span><span class="token punctuation">(</span><span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">equalTo</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;something&#39;</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 建立 [Subject] 对象，并且将模拟的 [Observer] 对象附加在上面</span>
        <span class="token variable">$subject</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Subject</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;subject&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token variable">$subject</span><span class="token operator">-&gt;</span><span class="token function">attach</span><span class="token punctuation">(</span><span class="token variable">$observer</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">// 在 [Subject] 对象上调用 [doSomething()] 方法，我们预期会以字符串</span>
        <span class="token comment">// [something] 调用模仿的 [Observer] 对象的 [update()] 方法。</span>
        <span class="token variable">$subject</span><span class="token operator">-&gt;</span><span class="token function">doSomething</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 测试某个方法将会以特定数量的参数进行调用，并且对各个参数以多种方式进行约束
     *
     * @test
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">observerReportError</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$observer</span> <span class="token operator">=</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">createMock</span><span class="token punctuation">(</span><span class="token class-name static-context">Observer</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token variable">$observer</span><span class="token operator">-&gt;</span><span class="token function">expects</span><span class="token punctuation">(</span><span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">once</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token operator">-&gt;</span><span class="token function">method</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;reportError&#39;</span><span class="token punctuation">)</span>
            <span class="token operator">-&gt;</span><span class="token function">with</span><span class="token punctuation">(</span>
                <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">equalTo</span><span class="token punctuation">(</span><span class="token number">42</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">stringContains</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;Something error happened&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">anything</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token variable">$subject</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Subject</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;subject&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token variable">$subject</span><span class="token operator">-&gt;</span><span class="token function">attach</span><span class="token punctuation">(</span><span class="token variable">$observer</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token variable">$subject</span><span class="token operator">-&gt;</span><span class="token function">doSomethingError</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 方法可以接受任意多个数组作为参数，具体数量取决于欲测试的调用。每个数组都都是对被仿方法的相应参数的一组约束
     *
     * @test
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">functionCalledTwoTimesWithSpecificArguments</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$stdclass</span> <span class="token operator">=</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">getMockBuilder</span><span class="token punctuation">(</span><span class="token class-name static-context">stdClass</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">)</span>
            <span class="token operator">-&gt;</span><span class="token function">addMethods</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;set&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>  <span class="token comment">// setMethods([&#39;set&#39;])方法已经被废弃</span>
            <span class="token operator">-&gt;</span><span class="token function">getMock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token variable">$stdclass</span><span class="token operator">-&gt;</span><span class="token function">expects</span><span class="token punctuation">(</span><span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">exactly</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token operator">-&gt;</span><span class="token function">method</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;set&#39;</span><span class="token punctuation">)</span>
            <span class="token operator">-&gt;</span><span class="token function">withConsecutive</span><span class="token punctuation">(</span>
                <span class="token punctuation">[</span><span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">equalTo</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;foo&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">greaterThan</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
                <span class="token punctuation">[</span><span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">equalTo</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;bar&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">greaterThan</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">]</span>
            <span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token variable">$stdclass</span><span class="token operator">-&gt;</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;foo&#39;</span><span class="token punctuation">,</span> <span class="token number">21</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token variable">$stdclass</span><span class="token operator">-&gt;</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;bar&#39;</span><span class="token punctuation">,</span> <span class="token number">48</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * callback() 约束用来进行更加复杂的参数校验。此约束的唯一参数是一个 PHP 回调项（callback）。
     * 此 PHP 回调项接受需要校验的参数作为其唯一参数，并应当在参数通过校验时返回 true，否则返回 false
     *
     * @test
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">errorReportCallback</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$observer</span> <span class="token operator">=</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">createMock</span><span class="token punctuation">(</span><span class="token class-name static-context">Observer</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token variable">$observer</span><span class="token operator">-&gt;</span><span class="token function">expects</span><span class="token punctuation">(</span><span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">once</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token operator">-&gt;</span><span class="token function">method</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;reportError&#39;</span><span class="token punctuation">)</span>
            <span class="token operator">-&gt;</span><span class="token function">with</span><span class="token punctuation">(</span>
                <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">greaterThan</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">stringContains</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;SomeThing&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
                <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">callback</span><span class="token punctuation">(</span>
                    <span class="token keyword">fn</span> <span class="token punctuation">(</span><span class="token class-name type-declaration">Subject</span> <span class="token variable">$subject</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">is_callable</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token variable">$subject</span><span class="token punctuation">,</span> <span class="token string single-quoted-string">&#39;getName&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token operator">&amp;&amp;</span> <span class="token variable">$subject</span><span class="token operator">-&gt;</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> <span class="token string single-quoted-string">&#39;subject&#39;</span>
                <span class="token punctuation">)</span>
            <span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token variable">$subject</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Subject</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;subject&#39;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token variable">$subject</span><span class="token operator">-&gt;</span><span class="token function">attach</span><span class="token punctuation">(</span><span class="token variable">$observer</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token variable">$subject</span><span class="token operator">-&gt;</span><span class="token function">doSomethingError</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 测试某个方法将会被调用一次，并且以某个特定对象作为参数。
     *
     * @test
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">specialObject</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$object</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">stdClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token variable">$stub</span> <span class="token operator">=</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">getMockBuilder</span><span class="token punctuation">(</span><span class="token class-name static-context">stdClass</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">)</span>
            <span class="token operator">-&gt;</span><span class="token function">addMethods</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;testMethod&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
            <span class="token operator">-&gt;</span><span class="token function">getMock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token variable">$stub</span><span class="token operator">-&gt;</span><span class="token function">expects</span><span class="token punctuation">(</span><span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">once</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token operator">-&gt;</span><span class="token function">method</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;testMethod&#39;</span><span class="token punctuation">)</span>
            <span class="token operator">-&gt;</span><span class="token function">with</span><span class="token punctuation">(</span><span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">identicalTo</span><span class="token punctuation">(</span><span class="token variable">$object</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token variable">$stub</span><span class="token operator">-&gt;</span><span class="token function">testMethod</span><span class="token punctuation">(</span><span class="token variable">$object</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * 创建仿件对象时启用参数克隆
     *
     * @test
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">paramsClone</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$object</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">stdClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token variable">$stub</span> <span class="token operator">=</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">getMockBuilder</span><span class="token punctuation">(</span><span class="token class-name static-context">stdClass</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">)</span>
            <span class="token operator">-&gt;</span><span class="token function">addMethods</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;testMethod&#39;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
            <span class="token operator">-&gt;</span><span class="token function">enableArgumentCloning</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
            <span class="token operator">-&gt;</span><span class="token function">getMock</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token variable">$stub</span><span class="token operator">-&gt;</span><span class="token function">expects</span><span class="token punctuation">(</span><span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">once</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token operator">-&gt;</span><span class="token function">method</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;testMethod&#39;</span><span class="token punctuation">)</span>
            <span class="token comment">// 现在仿件会克隆参数，因此 identicalTo 约束会失败。</span>
            <span class="token operator">-&gt;</span><span class="token function">with</span><span class="token punctuation">(</span><span class="token variable">$object</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token variable">$stub</span><span class="token operator">-&gt;</span><span class="token function">testMethod</span><span class="token punctuation">(</span><span class="token variable">$object</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</span></code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><h2 id="三丶-对特质（trait）与抽象类进行模仿" tabindex="-1">三丶 <code>对特质（Trait）与抽象类进行模仿</code> <a class="header-anchor" href="#三丶-对特质（trait）与抽象类进行模仿" aria-hidden="true">#</a></h2><blockquote><p> <code>getMockForTrait()</code> 方法返回一个使用了特定特质（trait）的仿件对象。给定特质的所有抽象方法将都被模仿。  <code>getMockForAbstractClass()</code> 方法返回一个抽象类的仿件对象。给定抽象类的所有抽象方法将都被模仿</p></blockquote><hr><div class="demo-block demo-mock" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例：模拟的<code>abstract</code>类</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-php"><pre><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">declare</span><span class="token punctuation">(</span>strict_types<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">/**
 * This file is part of Hyperf.
 *
 * @link     https://www.hyperf.io
 * @document https://hyperf.wiki
 * @contact  group@hyperf.io
 * @license  https://github.com/hyperf/hyperf/blob/master/LICENSE
 */</span>
<span class="token keyword">namespace</span> <span class="token package">HyperfTest<span class="token punctuation">\</span>Cases<span class="token punctuation">\</span>TestTrait</span><span class="token punctuation">;</span>

<span class="token keyword">abstract</span> <span class="token keyword">class</span> <span class="token class-name-definition class-name">AbstractClass</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">creteMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">abstractMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">abstract</span> <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">abstractMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</span></code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><div class="demo-block demo-mock" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例：模拟<code>trait</code>类</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-php"><pre><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">declare</span><span class="token punctuation">(</span>strict_types<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">/**
 * This file is part of Hyperf.
 *
 * @link     https://www.hyperf.io
 * @document https://hyperf.wiki
 * @contact  group@hyperf.io
 * @license  https://github.com/hyperf/hyperf/blob/master/LICENSE
 */</span>
<span class="token keyword">namespace</span> <span class="token package">HyperfTest<span class="token punctuation">\</span>Cases<span class="token punctuation">\</span>TestTrait</span><span class="token punctuation">;</span>

<span class="token keyword">trait</span> <span class="token class-name-definition class-name">AbstractTrait</span>
<span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">creteMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">abstractMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">abstract</span> <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">abstractMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>

</span></code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><div class="demo-block demo-mock" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例：对<code>trait</code>和<code>abstract</code>类进行模拟</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-php"><pre><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">declare</span><span class="token punctuation">(</span>strict_types<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">/**
 * This file is part of Hyperf.
 *
 * @link     https://www.hyperf.io
 * @document https://hyperf.wiki
 * @contact  group@hyperf.io
 * @license  https://github.com/hyperf/hyperf/blob/master/LICENSE
 */</span>
<span class="token keyword">namespace</span> <span class="token package">HyperfTest<span class="token punctuation">\</span>Cases<span class="token punctuation">\</span>TestTrait</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">PHPUnit<span class="token punctuation">\</span>Framework<span class="token punctuation">\</span>TestCase</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * @internal
 * @coversNothing
 */</span>
<span class="token keyword">class</span> <span class="token class-name-definition class-name">TraitTestClass</span> <span class="token keyword">extends</span> <span class="token class-name">TestCase</span>
<span class="token punctuation">{</span>

    <span class="token comment">/**
     * @test
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">traitConcreteMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$mock</span> <span class="token operator">=</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">getMockForTrait</span><span class="token punctuation">(</span><span class="token class-name static-context">AbstractTrait</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token variable">$mock</span><span class="token operator">-&gt;</span><span class="token function">expects</span><span class="token punctuation">(</span><span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">any</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token operator">-&gt;</span><span class="token function">method</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;abstractMethod&#39;</span><span class="token punctuation">)</span>
            <span class="token operator">-&gt;</span><span class="token function">will</span><span class="token punctuation">(</span><span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">returnValue</span><span class="token punctuation">(</span><span class="token constant boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">assertTrue</span><span class="token punctuation">(</span><span class="token variable">$mock</span><span class="token operator">-&gt;</span><span class="token function">creteMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token comment">/**
     * @test
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">abstractConcreteMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$mock</span> <span class="token operator">=</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">getMockForAbstractClass</span><span class="token punctuation">(</span><span class="token class-name static-context">AbstractClass</span><span class="token operator">::</span><span class="token keyword">class</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token variable">$mock</span><span class="token operator">-&gt;</span><span class="token function">expects</span><span class="token punctuation">(</span><span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">any</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token operator">-&gt;</span><span class="token function">method</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;abstractMethod&#39;</span><span class="token punctuation">)</span>
            <span class="token operator">-&gt;</span><span class="token function">will</span><span class="token punctuation">(</span><span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">returnValue</span><span class="token punctuation">(</span><span class="token constant boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">assertTrue</span><span class="token punctuation">(</span><span class="token variable">$mock</span><span class="token operator">-&gt;</span><span class="token function">creteMethod</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</span></code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><h2 id="四丶-web-服务（web-services）进行上桩或模仿" tabindex="-1">四丶 <code>Web 服务（Web Services）进行上桩或模仿</code> <a class="header-anchor" href="#四丶-web-服务（web-services）进行上桩或模仿" aria-hidden="true">#</a></h2><blockquote><p> 当应用程序需要和 <code>web</code> 服务进行交互时，会想要在不与 <code>web</code> 服务进行实际交互的情况下对其进行测试。为了给 web 服务创建桩件或仿件，可以像使用 <code>getMock()</code>（见上文）那样使用 <code>getMockFromWsdl()</code>。唯一的区别是 <code>getMockFromWsdl()</code> 所返回的桩件或者仿件是基于以 <code>WSDL</code> 描述的 <code>web</code> 服务，而 <code>getMock()</code> 返回的桩件或者仿件是基于 <code>PHP</code> 类或接口的。  展示了如何用 <code>getMockFromWsdl()</code> 来对（例如）<code>GoogleSearch.wsdl</code> 中描述的 web 服务上桩。</p></blockquote><hr><div class="demo-block demo-mock" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例：对<code>googleSearch</code>进行上桩</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-php"><pre><code><span class="token php language-php"><span class="token delimiter important">&lt;?php</span>

<span class="token keyword">declare</span><span class="token punctuation">(</span>strict_types<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token comment">/**
 * This file is part of Hyperf.
 *
 * @link     https://www.hyperf.io
 * @document https://hyperf.wiki
 * @contact  group@hyperf.io
 * @license  https://github.com/hyperf/hyperf/blob/master/LICENSE
 */</span>
<span class="token keyword">namespace</span> <span class="token package">HyperfTest<span class="token punctuation">\</span>Cases<span class="token punctuation">\</span>TestTrait</span><span class="token punctuation">;</span>

<span class="token keyword">use</span> <span class="token package">PHPUnit<span class="token punctuation">\</span>Framework<span class="token punctuation">\</span>TestCase</span><span class="token punctuation">;</span>
<span class="token keyword">use</span> <span class="token package">stdClass</span><span class="token punctuation">;</span>

<span class="token comment">/**
 * @internal
 * @coversNothing
 */</span>
<span class="token keyword">class</span> <span class="token class-name-definition class-name">GoogleTest</span> <span class="token keyword">extends</span> <span class="token class-name">TestCase</span>
<span class="token punctuation">{</span>
    <span class="token comment">/**
     * @test
     */</span>
    <span class="token keyword">public</span> <span class="token keyword">function</span> <span class="token function-definition function">search</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token keyword return-type">void</span>
    <span class="token punctuation">{</span>
        <span class="token variable">$googleSearch</span> <span class="token operator">=</span> <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">getMockFromWsdl</span><span class="token punctuation">(</span>
            <span class="token string single-quoted-string">&#39;GoogleSearch.wsdl&#39;</span><span class="token punctuation">,</span>
            <span class="token string single-quoted-string">&#39;GoogleSearch&#39;</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token variable">$directoryCategory</span>                   <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">stdClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token variable">$directoryCategory</span><span class="token operator">-&gt;</span><span class="token property">fullViewableName</span> <span class="token operator">=</span> <span class="token string single-quoted-string">&#39;&#39;</span><span class="token punctuation">;</span>
        <span class="token variable">$directoryCategory</span><span class="token operator">-&gt;</span><span class="token property">specialEncoding</span>  <span class="token operator">=</span> <span class="token string single-quoted-string">&#39;&#39;</span><span class="token punctuation">;</span>

        <span class="token variable">$element</span>                            <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">stdClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token variable">$element</span><span class="token operator">-&gt;</span><span class="token property">summary</span>                   <span class="token operator">=</span> <span class="token string single-quoted-string">&#39;&#39;</span><span class="token punctuation">;</span>
        <span class="token variable">$element</span><span class="token operator">-&gt;</span><span class="token constant">URL</span>                       <span class="token operator">=</span> <span class="token string single-quoted-string">&#39;https://phpunit.de/&#39;</span><span class="token punctuation">;</span>
        <span class="token variable">$element</span><span class="token operator">-&gt;</span><span class="token property">snippet</span>                   <span class="token operator">=</span> <span class="token string single-quoted-string">&#39;...&#39;</span><span class="token punctuation">;</span>
        <span class="token variable">$element</span><span class="token operator">-&gt;</span><span class="token property">title</span>                     <span class="token operator">=</span> <span class="token string single-quoted-string">&#39;&lt;b&gt;PHPUnit&lt;/b&gt;&#39;</span><span class="token punctuation">;</span>
        <span class="token variable">$element</span><span class="token operator">-&gt;</span><span class="token property">cachedSize</span>                <span class="token operator">=</span> <span class="token string single-quoted-string">&#39;11k&#39;</span><span class="token punctuation">;</span>
        <span class="token variable">$element</span><span class="token operator">-&gt;</span><span class="token property">relatedInformationPresent</span> <span class="token operator">=</span> <span class="token constant boolean">true</span><span class="token punctuation">;</span>
        <span class="token variable">$element</span><span class="token operator">-&gt;</span><span class="token property">hostName</span>                  <span class="token operator">=</span> <span class="token string single-quoted-string">&#39;phpunit.de&#39;</span><span class="token punctuation">;</span>
        <span class="token variable">$element</span><span class="token operator">-&gt;</span><span class="token property">directoryCategory</span>         <span class="token operator">=</span> <span class="token variable">$directoryCategory</span><span class="token punctuation">;</span>
        <span class="token variable">$element</span><span class="token operator">-&gt;</span><span class="token property">directoryTitle</span>            <span class="token operator">=</span> <span class="token string single-quoted-string">&#39;&#39;</span><span class="token punctuation">;</span>

        <span class="token variable">$result</span>                             <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">stdClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token variable">$result</span><span class="token operator">-&gt;</span><span class="token property">documentFiltering</span>          <span class="token operator">=</span> <span class="token constant boolean">false</span><span class="token punctuation">;</span>
        <span class="token variable">$result</span><span class="token operator">-&gt;</span><span class="token property">searchComments</span>             <span class="token operator">=</span> <span class="token string single-quoted-string">&#39;&#39;</span><span class="token punctuation">;</span>
        <span class="token variable">$result</span><span class="token operator">-&gt;</span><span class="token property">estimatedTotalResultsCount</span> <span class="token operator">=</span> <span class="token number">3.9000</span><span class="token punctuation">;</span>
        <span class="token variable">$result</span><span class="token operator">-&gt;</span><span class="token property">estimateIsExact</span>            <span class="token operator">=</span> <span class="token constant boolean">false</span><span class="token punctuation">;</span>
        <span class="token variable">$result</span><span class="token operator">-&gt;</span><span class="token property">resultElements</span>             <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token variable">$element</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token variable">$result</span><span class="token operator">-&gt;</span><span class="token property">searchQuery</span>                <span class="token operator">=</span> <span class="token string single-quoted-string">&#39;PHPUnit&#39;</span><span class="token punctuation">;</span>
        <span class="token variable">$result</span><span class="token operator">-&gt;</span><span class="token property">startIndex</span>                 <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token variable">$result</span><span class="token operator">-&gt;</span><span class="token property">endIndex</span>                   <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>
        <span class="token variable">$result</span><span class="token operator">-&gt;</span><span class="token property">searchTips</span>                 <span class="token operator">=</span> <span class="token string single-quoted-string">&#39;&#39;</span><span class="token punctuation">;</span>
        <span class="token variable">$result</span><span class="token operator">-&gt;</span><span class="token property">directoryCategories</span>        <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
        <span class="token variable">$result</span><span class="token operator">-&gt;</span><span class="token property">searchTime</span>                 <span class="token operator">=</span> <span class="token number">0.248822</span><span class="token punctuation">;</span>

        <span class="token variable">$googleSearch</span><span class="token operator">-&gt;</span><span class="token function">expects</span><span class="token punctuation">(</span><span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">any</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
            <span class="token operator">-&gt;</span><span class="token function">method</span><span class="token punctuation">(</span><span class="token string single-quoted-string">&#39;googleSearch&#39;</span><span class="token punctuation">)</span>
            <span class="token operator">-&gt;</span><span class="token function">will</span><span class="token punctuation">(</span><span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">returnValue</span><span class="token punctuation">(</span><span class="token variable">$result</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        <span class="token comment">/*
         * $googleSearch-&gt;doGoogleSearch() 现在会返回桩结果，
         * 并不会调用 web 服务的 doGoogleSearch() 方法。
         */</span>
        <span class="token variable">$this</span><span class="token operator">-&gt;</span><span class="token function">assertEquals</span><span class="token punctuation">(</span>
            <span class="token variable">$result</span><span class="token punctuation">,</span>
            <span class="token variable">$googleSearch</span><span class="token operator">-&gt;</span><span class="token function">googleSearch</span><span class="token punctuation">(</span>
                <span class="token string single-quoted-string">&#39;00000000000000000000000000000000&#39;</span><span class="token punctuation">,</span>
                <span class="token string single-quoted-string">&#39;PHPUnit&#39;</span><span class="token punctuation">,</span>
                <span class="token number">0</span><span class="token punctuation">,</span>
                <span class="token number">1</span><span class="token punctuation">,</span>
                <span class="token constant boolean">false</span><span class="token punctuation">,</span>
                <span class="token string single-quoted-string">&#39;&#39;</span><span class="token punctuation">,</span>
                <span class="token constant boolean">false</span><span class="token punctuation">,</span>
                <span class="token string single-quoted-string">&#39;&#39;</span><span class="token punctuation">,</span>
                <span class="token string single-quoted-string">&#39;&#39;</span><span class="token punctuation">,</span>
                <span class="token string single-quoted-string">&#39;&#39;</span>
            <span class="token punctuation">)</span>
        <span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

</span></code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><div class="demo-block demo-mock" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>插件</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-php"><pre><code>
<span class="token string single-quoted-string">&#39;@vuepress/active-header-links&#39;</span><span class="token punctuation">,</span> <span class="token comment">// 页面滚动时自动激活侧边栏链接的插件</span>
    <span class="token string single-quoted-string">&#39;@vuepress/back-to-top&#39;</span><span class="token punctuation">,</span> <span class="token comment">// 返回顶部插件</span>
    <span class="token string single-quoted-string">&#39;@vuepress/medium-zoom&#39;</span><span class="token punctuation">,</span> <span class="token comment">// 图片预览插件</span>
    <span class="token string single-quoted-string">&#39;@vuepress/nprogress&#39;</span><span class="token punctuation">,</span> <span class="token comment">//页面顶部进度条</span>
    <span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;@vuepress/active-header-links&#39;</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
      sidebarLinkSelector<span class="token punctuation">:</span> <span class="token string single-quoted-string">&#39;.sidebar-link&#39;</span><span class="token punctuation">,</span>
      <span class="token argument-name">headerAnchorSelector</span><span class="token punctuation">:</span> <span class="token string single-quoted-string">&#39;.header-anchor&#39;</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span>  <span class="token comment">// 页面滚动时自动激活侧边栏链接的插件</span>
    <span class="token punctuation">[</span><span class="token string single-quoted-string">&#39;vuepress-plugin-code-copy&#39;</span><span class="token punctuation">,</span> <span class="token constant boolean">true</span><span class="token punctuation">]</span><span class="token punctuation">,</span> <span class="token comment">// 代码复制</span>
    <span class="token punctuation">[</span>
      <span class="token string single-quoted-string">&#39;@vuepress/plugin-search&#39;</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        locales<span class="token punctuation">:</span> <span class="token punctuation">{</span>
          <span class="token string single-quoted-string">&#39;/&#39;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
            placeholder<span class="token punctuation">:</span> <span class="token string single-quoted-string">&#39;Search&#39;</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
          <span class="token string single-quoted-string">&#39;/zh/&#39;</span><span class="token punctuation">:</span> <span class="token punctuation">{</span>
            placeholder<span class="token punctuation">:</span> <span class="token string single-quoted-string">&#39;搜索&#39;</span><span class="token punctuation">,</span>
          <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token punctuation">]</span><span class="token punctuation">,</span>

</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><!--v-if--></div></div><footer class="page-footer" data-v-7eddb2c4 data-v-07c132fc><div class="edit" data-v-07c132fc><div class="edit-link" data-v-07c132fc data-v-1ed99556><!----></div></div><div class="updated" data-v-07c132fc><!----></div></footer><div class="next-and-prev-link" data-v-7eddb2c4 data-v-38ede35f><div class="container" data-v-38ede35f><div class="prev" data-v-38ede35f><a class="link" href="/blog-vitepress/phpunit/assert" data-v-38ede35f><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon icon-prev" data-v-38ede35f><path d="M19,11H7.4l5.3-5.3c0.4-0.4,0.4-1,0-1.4s-1-0.4-1.4,0l-7,7c-0.1,0.1-0.2,0.2-0.2,0.3c-0.1,0.2-0.1,0.5,0,0.8c0.1,0.1,0.1,0.2,0.2,0.3l7,7c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3c0.4-0.4,0.4-1,0-1.4L7.4,13H19c0.6,0,1-0.4,1-1S19.6,11,19,11z"></path></svg><span class="text" data-v-38ede35f>断言</span></a></div><div class="next" data-v-38ede35f><a class="link" href="/blog-vitepress/fxiaoke/api-analysis/" data-v-38ede35f><span class="text" data-v-38ede35f>api分析</span><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon icon-next" data-v-38ede35f><path d="M19.9,12.4c0.1-0.2,0.1-0.5,0-0.8c-0.1-0.1-0.1-0.2-0.2-0.3l-7-7c-0.4-0.4-1-0.4-1.4,0s-0.4,1,0,1.4l5.3,5.3H5c-0.6,0-1,0.4-1,1s0.4,1,1,1h11.6l-5.3,5.3c-0.4,0.4-0.4,1,0,1.4c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3l7-7C19.8,12.6,19.9,12.5,19.9,12.4z"></path></svg></a></div></div></div><!--[--><!--]--></div></main></div><!----><!--]--></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"fxiaoke_analysis_customer.md\":\"bf9c1be3\",\"fxiaoke_analysis_index.md\":\"e41b2d69\",\"fxiaoke_analysis_org-employee-user.md\":\"0705db6d\",\"fxiaoke_analysis_product.md\":\"f1b8ba66\",\"fxiaoke_api-analysis_index.md\":\"56f67eea\",\"golang_article_index.md\":\"5682931e\",\"golang_article_index1.md\":\"8f5ae353\",\"golang_basic-knowledge.md\":\"27b162f2\",\"golang_basic.md\":\"b7054939\",\"index.md\":\"3fc26fa2\",\"notes_account_screat.md\":\"977ecba6\",\"notes_docker.md\":\"4fcc0877\",\"notes_git.md\":\"962a40de\",\"notes_linux.md\":\"3b58c4a7\",\"notes_love.md\":\"eeaa558f\",\"notes_mysql.md\":\"4541ac0d\",\"notes_ssh.md\":\"e5bddd19\",\"notes_typescript.md\":\"c0867328\",\"other_easy_api.md\":\"387847ea\",\"phpunit_assert.md\":\"09a25390\",\"phpunit_base.md\":\"2c3fc63e\",\"phpunit_mock.md\":\"ad73e9a3\"}")</script>
    <script type="module" async src="/blog-vitepress/assets/app.b68c4d44.js"></script>
    
  </body>
</html>