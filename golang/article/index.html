<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>go语言教程 | 求知若愚</title>
    <meta name="description" content="知识文章和随笔记录">
    <link rel="stylesheet" href="/blog-vitepress/assets/style.05fd9d65.css">
    <link rel="modulepreload" href="/blog-vitepress/assets/chunks/AlgoliaSearchBox.d45cd405.js">
    <link rel="modulepreload" href="/blog-vitepress/assets/app.b68c4d44.js">
    <link rel="modulepreload" href="/blog-vitepress/assets/golang_article_index.md.5682931e.lean.js">
    
    <link rel="icon" href="/favicon.ico">
  <meta name="twitter:title" content="go语言教程 | 求知若愚">
  <meta property="og:title" content="go语言教程 | 求知若愚">
  </head>
  <body>
    <div id="app"><!--[--><div class="theme"><header class="nav-bar" data-v-675d8756><div class="sidebar-button" data-v-675d8756><svg class="icon" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z" class></path></svg></div><a class="nav-bar-title" href="/blog-vitepress/" aria-label="求知若愚, back to home" data-v-675d8756 data-v-cc01ef16><img class="logo" src="/blog-vitepress/favicon.ico" alt="Logo" data-v-cc01ef16> 求知若愚</a><div class="flex-grow" data-v-675d8756></div><div class="nav" data-v-675d8756><nav class="nav-links" data-v-675d8756 data-v-eab3edfe><!--[--><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item isExternal" href="https://zzj-custom.github.io/blog-vitepress/" target="_blank" rel="noopener noreferrer" data-v-b8818f8c>我的个人网站 <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-b8818f8c><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item isExternal" href="https://juejin.cn/user/976022057793207" target="_blank" rel="noopener noreferrer" data-v-b8818f8c>掘金 <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-b8818f8c><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item isExternal" href="https://github.com/zzj-custom" target="_blank" rel="noopener noreferrer" data-v-b8818f8c>Github <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-b8818f8c><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><!--]--><!----><!----></nav></div><!--[--><!--[--><div class="algolia-search-box" id="docsearch"></div><!--]--><!--]--></header><aside class="sidebar" data-v-83e92a68><nav class="nav-links nav" data-v-83e92a68 data-v-eab3edfe><!--[--><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item isExternal" href="https://zzj-custom.github.io/blog-vitepress/" target="_blank" rel="noopener noreferrer" data-v-b8818f8c>我的个人网站 <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-b8818f8c><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item isExternal" href="https://juejin.cn/user/976022057793207" target="_blank" rel="noopener noreferrer" data-v-b8818f8c>掘金 <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-b8818f8c><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><div class="item" data-v-eab3edfe><div class="nav-link" data-v-eab3edfe data-v-b8818f8c><a class="item isExternal" href="https://github.com/zzj-custom" target="_blank" rel="noopener noreferrer" data-v-b8818f8c>Github <svg class="icon outbound" xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewbox="0 0 100 100" width="15" height="15" data-v-b8818f8c><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path><polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div></div><!--]--><!----><!----></nav><!--[--><!--]--><ul class="sidebar-links" data-v-83e92a68><!--[--><li class="sidebar-link"><p class="sidebar-link-item">php单元测试</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/blog-vitepress/phpunit/base">基础内容</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/blog-vitepress/phpunit/assert">断言</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/blog-vitepress/phpunit/mock">测试替身</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">纷销客</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/blog-vitepress/fxiaoke/api-analysis/index">api分析</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/blog-vitepress/fxiaoke/analysis/index">指标维度字段分析</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">golang学习之路</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/blog-vitepress/golang/basic-knowledge">基础知识</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/blog-vitepress/golang/article/index">优秀文章</a><!----></li></ul></li><li class="sidebar-link"><p class="sidebar-link-item">笔记</p><ul class="sidebar-links"><li class="sidebar-link"><a class="sidebar-link-item" href="/blog-vitepress/notes/git">git</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/blog-vitepress/notes/linux">linux</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/blog-vitepress/notes/typescript">typescript</a><!----></li><li class="sidebar-link"><a class="sidebar-link-item" href="/blog-vitepress/notes/docker">docker</a><!----></li></ul></li><!--]--></ul><!--[--><!--]--></aside><div class="sidebar-mask"></div><main class="page" data-v-7eddb2c4><div class="container" data-v-7eddb2c4><!--[--><!--]--><div style="position:relative;" class="content" data-v-7eddb2c4><div><h1 id="frontmatter-title" tabindex="-1">go语言教程 <a class="header-anchor" href="#frontmatter-title" aria-hidden="true">#</a></h1><p align="center"><a href="https://mp.weixin.qq.com/s/PpeblHk6Ml4w8iNrrw8UAA" target="_blank"><img src="https://img.shields.io/static/v1?label=go语言教程（上）&amp;message=数据链接&amp;color=orange&amp;style=social&amp;logo=appveyor"></a><a href="https://mp.weixin.qq.com/s/lUwQtpNb67UImTQ98s4ZoA" target="_blank"><img src="https://img.shields.io/static/v1?label=go语言教程（下）&amp;message=数据链接&amp;color=orange&amp;style=social&amp;logo=appveyor"></a></p><h2 id="什么是-go-语言" tabindex="-1">什么是 Go 语言 <a class="header-anchor" href="#什么是-go-语言" aria-hidden="true">#</a></h2><blockquote><p>Go 语言(Golang)是 Google 公司 2009 年推出的一门&quot;高级编程言语&quot;, 目的是为了解决:</p></blockquote><ul><li><strong>现有主流编程语言</strong> 明显<strong>落后于硬件发展速度</strong>的问题</li><li><strong>不能合理利用多核 CPU</strong>的优势提升软件系统性能的问题</li><li>软件复杂度越来越高, <strong>维护成本也越来越高</strong>的问题</li><li>企业开发中不得不在<strong>快速开发和性能之间艰难抉择</strong>的问题</li></ul><blockquote><p>科普小知识: 1.静态语言：1.1 一般都需要通过编译器（compiler）将源代码翻译成机器码，之后才能执行。程序被编译之后无论是程序中的数据类型还是程序的结构都不可以被改变 1.2 静态语言的性能和安全性都非常好, 例如 C 和 C++、Go, 但是 C 和 C++的缺点是开发速度慢, 维护成本高 2.动态语言 2.1 一般不需要通过编译器将源代码翻译成机器码，在运行程序的时候才逐行翻译。程序在运行的过程中可以动态修改程序中的数据类型和程序的结构 2.2 动态语言开发速度快,维护成本低,例如 Ruby 和 Python, 但是 Ruby 和 Python 的性能和安全性又略低</p></blockquote><ul><li>Go 语言专门针对多核 CPU 进行了优化, <strong>能够充分使用硬件多核 CPU 的优势</strong>, 使得通过 Go 语言编写的<strong>软件系统性能能够得到很大提升</strong></li><li>Go 语言编写的程序,既可以媲美 C 或 C++代码的运行速度, 也可以媲美 Ruby 或 Python 开发的效率</li><li>所以 Go 语言很好的解决了&quot;现有主流编程语言&quot;存在的问题, 被誉<strong>现代化的编程语言</strong></li></ul><hr><h2 id="语言优势" tabindex="-1">语言优势 <a class="header-anchor" href="#语言优势" aria-hidden="true">#</a></h2><ul><li><p>简单易学</p></li><li><p>G o 语言的作者都有 C 的基因，Go 自然而然也有了 C 的基因，但是 Go 的语法比 C 还简单, 并且几乎支持大多数你在其他语言见过的特性：封装、继承、多态、反射等</p></li><li><p>丰富的标准库</p><ul><li>Go 目前已经内置了大量的库，特别是网络库非常强大</li><li>前面说了作者是 C 的作者，所以 Go 里面也可以直接包含 c 代码，利用现有的丰富的 C 库</li></ul></li><li><p>跨平台编译和部署</p><ul><li>Go 代码可直接编译成机器码，不依赖其他库，部署就是扔一个文件上去就完事了. 并且 Go 代码还可以做到跨平台编译(例如: window 系统编译 linux 的应用)</li></ul></li><li><p>内置强大的工具</p><ul><li>Go 语言里面内置了很多工具链，最好的应该是 gofmt 工具，自动化格式化代码，能够让团队 review 变得如此的简单，代码格式一模一样，想不一样都很困难</li></ul></li><li><p>性能优势: Go 极其地快。其性能与 C 或 C++相似。在我们的使用中，Go 一般比 Python 要快 30 倍左右</p><ul><li>语言层面支持并发，这个就是 Go 最大的特色，天生的支持并发，可以充分的利用多核，很容易的使用并发</li><li>内置 runtime，支持垃圾回收</li></ul></li><li><p>... ...</p></li></ul><blockquote><p>Go 语言的吉祥物是地鼠 地鼠的特点是速度快、成群结队、头脑简单 而 Go 语言的特点正好也是编程速度快、并发性好、简单易学</p></blockquote><hr><h2 id="go-语言发展史" tabindex="-1">Go 语言发展史 <a class="header-anchor" href="#go-语言发展史" aria-hidden="true">#</a></h2><pre><code>2007年，谷歌工程师Rob Pike, Ken Thompson和Robert Griesemer开始设计一门全新的语言，这是Go语言的最初原型。

2009年11月10日，Go语言以开放源代码的方式向全球发布。

2011年3月16日，Go语言的第一个稳定(stable)版本r56发布。

2012年3月28日，Go语言的第一个正式版本Go1发布。

2013年4月04日，Go语言的第一个Go 1.1beta1测试版发布。

2013年4月08日，Go语言的第二个Go 1.1beta2测试版发布。

2013年5月02日，Go语言Go 1.1RC1版发布。

2013年5月07日，Go语言Go 1.1RC2版发布。

2013年5月09日，Go语言Go 1.1RC3版发布。

2013年5月13日，Go语言Go 1.1正式版发布。

2013年9月20日，Go语言Go 1.2RC1版发布。

2013年12月1日，Go语言Go 1.2正式版发布。

2014年6月18日，Go语言Go 1.3版发布。

2014年12月10日，Go语言Go 1.4版发布。

2015年8月19日，Go语言Go 1.5版发布，本次更新中移除了”最后残余的C代码”。

2016年2月17日，Go语言Go 1.6版发布。

2016年8月15日，Go语言Go 1.7版发布。

2017年2月17日，Go语言Go 1.8版发布。

2017年8月24日，Go语言Go 1.9版发布。

2018年2月16日，Go语言Go 1.10版发布。
</code></pre><hr><h2 id="go-作者" tabindex="-1">Go 作者 <a class="header-anchor" href="#go-作者" aria-hidden="true">#</a></h2><ul><li>Go 语言是 UNIX 作者、C 语言作者、谷歌 V8 引擎作者携手打造的, 由谷歌公司 2009 年推出的一门高级编程言语。</li></ul><blockquote><p>跟着谷歌走吃喝啥都有</p></blockquote><hr><h2 id="go-语言现状" tabindex="-1">Go 语言现状 <a class="header-anchor" href="#go-语言现状" aria-hidden="true">#</a></h2><ul><li><p>多次获得 TIOBE 年度最佳语言</p></li><li><p>2018 年 Go 语言一度超过 Java, 进入编程语言排行榜前三名.</p></li><li><p>从公司角度:</p><ul><li>许多大厂都已经拥抱 Go 语言，包括阿里巴巴、京东、今日头条、小米、滴滴、七牛云、360 等明星公司, 也包括知乎、轻松筹、快手、探探、美图、猎豹移动等等。同时，创业公司也很喜欢 Go 语言，主要因为其入门快、程序库多、运行迅速，很适合快速构建互联网软件产品。</li></ul></li><li><p>从业务维度:</p><ul><li>Go 程序可以在装有 Windows、Linux、FreeBSD 等操作系统的服务器上运行，并用于提供基础软件支撑、API 服务、Web 服务、网页服务等等。</li><li>在云计算、微服务、大数据、区块链、物联网等领域，Go 语言早已蓬勃发展. 除了语法简单, 性能优越以外, K8S 底层架构在云计算的领导地位(<code>K8S就是Go开发的</code>), 也让这些各大公司不得不拥抱 Go 语言。</li><li>区块链的崛起更进一步带动了 Go 工程师的需求,市面上大部分区块链明星项目都是用 Go 开发的, 足以说明 Go 在分布式系统中的地位，这也就是为什么今年开始，大批金融公司开始招聘 Go 工程师的重要原因。</li></ul></li><li><p>从薪资角度来看</p><ul><li>应届生普遍在<code>4~8K</code>,  1 年左右普遍在<code>10K左右</code>, 2 年~3 年普遍在<code>20K左右</code></li></ul></li></ul><hr><h2 id="go-语言应用场景" tabindex="-1">Go 语言应用场景 <a class="header-anchor" href="#go-语言应用场景" aria-hidden="true">#</a></h2><ul><li>网络编程，这一块目前应用最广，包括 Web 应用、API 应用、下载应用、内存数据库等</li><li>云平台开发，目前国外很多云平台在采用 Go 开</li><li>服务器编程, 以前你如果使用 Java 或者 C++做的那些事情，都可以用 Go 来做</li><li>分布式系统，数据库代理器等</li><li>它可以做从底层到前端的任何工作</li></ul><hr><h2 id="如何学习-go-语言" tabindex="-1">如何学习 Go 语言 <a class="header-anchor" href="#如何学习-go-语言" aria-hidden="true">#</a></h2><ul><li>Go 语言被称之为现代化的 C 语言, 所以无论是从语法特性, 还是作者本身, Go 语言都与 C 语言有着莫大的关系, 所以学习本套课程之前如果你有 C 语言的基础, 那么将会事半功倍</li><li>对于初学者而言, 学习编程的捷径只有一条, 那就是<strong>多动手</strong></li></ul><blockquote><p>竹子用了 4 年的时间， 仅仅长了 3cm， 从第五年开始， 以每天 30cm 的速度疯狂地生长， 仅仅用了六周的时间就长到了 15 米。其实，在前面的四年， 竹子将根在土壤里延伸了数百平米。做人做事亦是如此， 不要担心你此时此刻的付出得不到回报， 因为这些付出都是为了扎根。</p></blockquote><hr><h2 id="源文件对比" tabindex="-1">源文件对比 <a class="header-anchor" href="#源文件对比" aria-hidden="true">#</a></h2><ul><li>C 语言源文件</li></ul><table><thead><tr><th style="text-align:center;">文件扩展名</th><th style="text-align:center;">源类型</th></tr></thead><tbody><tr><td style="text-align:center;">.h</td><td style="text-align:center;">头文件，存放代码声明</td></tr><tr><td style="text-align:center;">.c</td><td style="text-align:center;">C 语言源文件，存放代码实现</td></tr></tbody></table><ul><li>Go 语言源文件</li></ul><table><thead><tr><th style="text-align:center;">文件扩展名</th><th style="text-align:center;">源类型</th></tr></thead><tbody><tr><td style="text-align:center;">.go</td><td style="text-align:center;">Go 语言源文件，存放代码实现</td></tr></tbody></table><hr><h2 id="代码管理对比" tabindex="-1">代码管理对比 <a class="header-anchor" href="#代码管理对比" aria-hidden="true">#</a></h2><ul><li>C 语言中通过文件来管理代码 <ul><li>想使用某一个函数时,只需要 include 导入对应的.h 文件即可</li></ul></li><li>Go 语言中通过包来管理代码 <ul><li>Go 语言没有.h 文件的概念, 在 Go 中想使用某一个函数时, 只需要 import 导入对应的包即可</li></ul></li><li>C 语言中函数、变量公私有管理 <ul><li>通过 extern 和 static 实现是否公开函数和变量</li></ul></li><li>Go 语言中函数、变量公私有管理 <ul><li>通过函数名称首字母大小写实现是否公开函数</li><li>通过变量名称首字母大小写实现是否公开变量</li></ul></li></ul><hr><h2 id="关键字对比" tabindex="-1">关键字对比 <a class="header-anchor" href="#关键字对比" aria-hidden="true">#</a></h2><ul><li>C 语言中一共有 32 个关键字</li></ul><table><thead><tr><th style="text-align:center;">1</th><th style="text-align:center;">2</th><th style="text-align:center;">3</th><th style="text-align:center;">4</th><th style="text-align:center;">5</th><th style="text-align:center;">6</th><th style="text-align:center;">7</th><th style="text-align:center;">8</th></tr></thead><tbody><tr><td style="text-align:center;"><strong>if</strong></td><td style="text-align:center;"><strong>else</strong></td><td style="text-align:center;"><strong>switch</strong></td><td style="text-align:center;"><strong>case</strong></td><td style="text-align:center;"><strong>default</strong></td><td style="text-align:center;"><strong>break</strong></td><td style="text-align:center;"><strong>return</strong></td><td style="text-align:center;"><strong>goto</strong></td></tr><tr><td style="text-align:center;">do</td><td style="text-align:center;">while</td><td style="text-align:center;"><strong>for</strong></td><td style="text-align:center;"><strong>continue</strong></td><td style="text-align:center;">typedef</td><td style="text-align:center;"><strong>struct</strong></td><td style="text-align:center;">enum</td><td style="text-align:center;">union</td></tr><tr><td style="text-align:center;">char</td><td style="text-align:center;">short</td><td style="text-align:center;">int</td><td style="text-align:center;">long</td><td style="text-align:center;">float</td><td style="text-align:center;">double</td><td style="text-align:center;">void</td><td style="text-align:center;">sizeof</td></tr><tr><td style="text-align:center;">signed</td><td style="text-align:center;">unsigned</td><td style="text-align:center;"><strong>const</strong></td><td style="text-align:center;">auto</td><td style="text-align:center;">register</td><td style="text-align:center;">static</td><td style="text-align:center;">extern</td><td style="text-align:center;">volatile</td></tr></tbody></table><ul><li>Go 语言中一共有 25 个关键字</li></ul><table><thead><tr><th style="text-align:center;">1</th><th style="text-align:center;">2</th><th style="text-align:center;">3</th><th style="text-align:center;">4</th><th style="text-align:center;">5</th><th style="text-align:center;">6</th><th style="text-align:center;">7</th><th style="text-align:center;">8</th></tr></thead><tbody><tr><td style="text-align:center;"><strong>if</strong></td><td style="text-align:center;"><strong>else</strong></td><td style="text-align:center;"><strong>switch</strong></td><td style="text-align:center;"><strong>case</strong></td><td style="text-align:center;"><strong>default</strong></td><td style="text-align:center;"><strong>break</strong></td><td style="text-align:center;"><strong>return</strong></td><td style="text-align:center;"><strong>goto</strong></td></tr><tr><td style="text-align:center;">fallthrough</td><td style="text-align:center;"><strong>for</strong></td><td style="text-align:center;"><strong>continue</strong></td><td style="text-align:center;">type</td><td style="text-align:center;"><strong>struct</strong></td><td style="text-align:center;">var</td><td style="text-align:center;"><strong>const</strong></td><td style="text-align:center;">map</td></tr><tr><td style="text-align:center;">func</td><td style="text-align:center;">interface</td><td style="text-align:center;">range</td><td style="text-align:center;">import</td><td style="text-align:center;">package</td><td style="text-align:center;">defer</td><td style="text-align:center;">go</td><td style="text-align:center;">select</td></tr><tr><td style="text-align:center;">chan</td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;"></td><td style="text-align:center;"></td></tr></tbody></table><hr><h2 id="数据类型对比" tabindex="-1">数据类型对比 <a class="header-anchor" href="#数据类型对比" aria-hidden="true">#</a></h2><ul><li>C 语言数据类型</li><li>Go 语言数据类型</li></ul><hr><ul><li>C 语言各数据类型占用内存空间</li></ul><table><thead><tr><th style="text-align:center;">类型</th><th style="text-align:center;">32 位编译器</th><th style="text-align:center;">64 位编译器</th></tr></thead><tbody><tr><td style="text-align:center;">char</td><td style="text-align:center;">1</td><td style="text-align:center;">1</td></tr><tr><td style="text-align:center;">int</td><td style="text-align:center;">4</td><td style="text-align:center;">4</td></tr><tr><td style="text-align:center;">float</td><td style="text-align:center;">4</td><td style="text-align:center;">4</td></tr><tr><td style="text-align:center;">double</td><td style="text-align:center;">8</td><td style="text-align:center;">8</td></tr><tr><td style="text-align:center;">short</td><td style="text-align:center;">2</td><td style="text-align:center;">2</td></tr><tr><td style="text-align:center;">long</td><td style="text-align:center;">4</td><td style="text-align:center;">8</td></tr><tr><td style="text-align:center;">long long</td><td style="text-align:center;">8</td><td style="text-align:center;">8</td></tr><tr><td style="text-align:center;">void*</td><td style="text-align:center;">4</td><td style="text-align:center;">8</td></tr></tbody></table><ul><li>Go 语言各数据类型占用内存空间</li></ul><table><thead><tr><th style="text-align:center;">类型</th><th style="text-align:center;">32 位编译器</th><th style="text-align:center;">64 位编译器</th><th style="text-align:center;">本质</th></tr></thead><tbody><tr><td style="text-align:center;">int8/uint8</td><td style="text-align:center;">1</td><td style="text-align:center;">1</td><td style="text-align:center;">signed char/unsigned char</td></tr><tr><td style="text-align:center;">int16/uint16</td><td style="text-align:center;">2</td><td style="text-align:center;">2</td><td style="text-align:center;">signed short/unsigned short</td></tr><tr><td style="text-align:center;">int32/uint32</td><td style="text-align:center;">4</td><td style="text-align:center;">4</td><td style="text-align:center;">signed int/unsigned int</td></tr><tr><td style="text-align:center;">int64/uint64</td><td style="text-align:center;">8</td><td style="text-align:center;">8</td><td style="text-align:center;">signed long long int/unsigned long long int</td></tr><tr><td style="text-align:center;">byte</td><td style="text-align:center;">1</td><td style="text-align:center;">1</td><td style="text-align:center;">uint8/unsigned char</td></tr><tr><td style="text-align:center;">rune</td><td style="text-align:center;">4</td><td style="text-align:center;">4</td><td style="text-align:center;">int32/signed int</td></tr><tr><td style="text-align:center;">int</td><td style="text-align:center;">4</td><td style="text-align:center;">8</td><td style="text-align:center;">根据机器位数决定长度</td></tr><tr><td style="text-align:center;">uintptr</td><td style="text-align:center;">4</td><td style="text-align:center;">8</td><td style="text-align:center;">根据机器位数决定长度 uint32/uint64</td></tr><tr><td style="text-align:center;">float32</td><td style="text-align:center;">4</td><td style="text-align:center;">4</td><td style="text-align:center;">float</td></tr><tr><td style="text-align:center;">float64</td><td style="text-align:center;">8</td><td style="text-align:center;">8</td><td style="text-align:center;">double</td></tr><tr><td style="text-align:center;">true</td><td style="text-align:center;">1</td><td style="text-align:center;">1</td><td style="text-align:center;">char 类型的整型</td></tr><tr><td style="text-align:center;">false</td><td style="text-align:center;">1</td><td style="text-align:center;">1</td><td style="text-align:center;">char 类型的整型</td></tr></tbody></table><ul><li>和 C 语言一样,Go 语言也提供了 Sizeof 计算变量的内存空间 <ul><li>导入 import &quot;unsafe&quot;包</li><li>通过 unsafe.Sizeof()计算变量内存空间</li></ul></li></ul><hr><ul><li>Go 语言基本数据类型内部实现 <ul><li>越老版本的代码越纯粹,越适合新手学习</li><li>随着代码的更新迭代会逐步变得非常复杂, 所以此处建议下载 1.4 版本</li><li>golang 官方网站下载 go1.4 版本源代码</li><li>解压后打开路径: <code>go\src\runtime\runtime.h</code></li><li>得到如下实现代码</li></ul></li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-c"><pre><code>   <span class="token comment">// 第8行到35行</span>

    <span class="token keyword">typedef</span> <span class="token keyword">signed</span> <span class="token keyword">char</span>  int8<span class="token punctuation">;</span>

    <span class="token keyword">typedef</span> <span class="token keyword">unsigned</span> <span class="token keyword">char</span>  uint8<span class="token punctuation">;</span>

    <span class="token keyword">typedef</span> <span class="token keyword">signed</span> <span class="token keyword">short</span>  int16<span class="token punctuation">;</span>

    <span class="token keyword">typedef</span> <span class="token keyword">unsigned</span> <span class="token keyword">short</span>  uint16<span class="token punctuation">;</span>

    <span class="token keyword">typedef</span> <span class="token keyword">signed</span> <span class="token keyword">int</span>  int32<span class="token punctuation">;</span>

    <span class="token keyword">typedef</span> <span class="token keyword">unsigned</span> <span class="token keyword">int</span>  uint32<span class="token punctuation">;</span>

    <span class="token keyword">typedef</span> <span class="token keyword">signed</span> <span class="token keyword">long</span> <span class="token keyword">long</span> <span class="token keyword">int</span> int64<span class="token punctuation">;</span>

    <span class="token keyword">typedef</span> <span class="token keyword">unsigned</span> <span class="token keyword">long</span> <span class="token keyword">long</span> <span class="token keyword">int</span> uint64<span class="token punctuation">;</span>

    <span class="token keyword">typedef</span> <span class="token keyword">float</span>   float32<span class="token punctuation">;</span>

    <span class="token keyword">typedef</span> <span class="token keyword">double</span>   float64<span class="token punctuation">;</span>



    <span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifdef</span> <span class="token expression">_64BIT</span></span>

    <span class="token keyword">typedef</span> uint64  uintptr<span class="token punctuation">;</span>

    <span class="token keyword">typedef</span> int64  intptr<span class="token punctuation">;</span>

    <span class="token keyword">typedef</span> int64  intgo<span class="token punctuation">;</span> <span class="token comment">// Go&#39;s int</span>

    <span class="token keyword">typedef</span> uint64  uintgo<span class="token punctuation">;</span> <span class="token comment">// Go&#39;s uint</span>

    <span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">else</span></span>

    <span class="token keyword">typedef</span> uint32  uintptr<span class="token punctuation">;</span>

    <span class="token keyword">typedef</span> int32  intptr<span class="token punctuation">;</span>

    <span class="token keyword">typedef</span> int32  intgo<span class="token punctuation">;</span> <span class="token comment">// Go&#39;s int</span>

    <span class="token keyword">typedef</span> uint32  uintgo<span class="token punctuation">;</span> <span class="token comment">// Go&#39;s uint</span>

    <span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span>



    <span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifdef</span> <span class="token expression">_64BITREG</span></span>

    <span class="token keyword">typedef</span> uint64  uintreg<span class="token punctuation">;</span>

    <span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">else</span></span>

    <span class="token keyword">typedef</span> uint32  uintreg<span class="token punctuation">;</span>

    <span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span>



    <span class="token comment">// 第153行到157行</span>

    <span class="token keyword">enum</span>

    <span class="token punctuation">{</span>

     true <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>

     false <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>

    <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><blockquote><p>install B 时刻: Go 本质就是用 C 语言编写的一门高级编程语言 所以江哥前面教你 C 语言就是为了今天能让你看懂 Go 的实现代码,做到知其然知其所以然</p></blockquote><hr><h2 id="常量变量对比" tabindex="-1">常量变量对比 <a class="header-anchor" href="#常量变量对比" aria-hidden="true">#</a></h2><ul><li>C 语言定义常量和变量格式</li></ul><div class="language-c"><pre><code>数据类型 变量名称 <span class="token operator">=</span> 值<span class="token punctuation">;</span>
<span class="token keyword">const</span> 数据类型 常量名称 <span class="token operator">=</span> 值<span class="token punctuation">;</span>
</code></pre></div><ul><li>Go 语言定义常量和变量格式 <ul><li>除了以下标准格式外,Go 语言还提供了好几种简单的语法糖</li></ul></li></ul><div class="language-go"><pre><code><span class="token keyword">var</span> 变量名称 数据类型 <span class="token operator">=</span> 值<span class="token punctuation">;</span>
<span class="token keyword">const</span> 变量名称 数据类型 <span class="token operator">=</span> 值<span class="token punctuation">;</span>
</code></pre></div><hr><h2 id="注释对比" tabindex="-1">注释对比 <a class="header-anchor" href="#注释对比" aria-hidden="true">#</a></h2><ul><li>和 C 语言一样,Go 语言也支持单行注释和多行注释, 并且所有注释的特性都和 C 语言一样 <ul><li>单行注释 <code>// 被注释内容</code></li><li>多行注释 <code>/* 被注释内容*/</code></li></ul></li><li>在 Go 语言中,官方更加推荐使用单行注释,而非多行注释(详情可以直接查看 Go 官方源码)</li></ul><hr><h2 id="运算符对比" tabindex="-1">运算符对比 <a class="header-anchor" href="#运算符对比" aria-hidden="true">#</a></h2><ul><li>算数运算符和 C 语言几乎一样 <ul><li>错误写法: a = i++;  return i++;</li><li>错误写法: ++i; --i;</li><li>Go 语言中++、--运算符不支持前置</li><li>Go 语言中++、--是语句,不是表达式,所以必须独占一行</li></ul></li></ul><table><thead><tr><th style="text-align:center;">运算符</th><th style="text-align:center;">描述</th><th style="text-align:center;">实例</th></tr></thead><tbody><tr><td style="text-align:center;">+</td><td style="text-align:center;">相加</td><td style="text-align:center;">A + B</td></tr><tr><td style="text-align:center;">---</td><td style="text-align:center;">相减</td><td style="text-align:center;">A - B</td></tr><tr><td style="text-align:center;">*</td><td style="text-align:center;">相乘</td><td style="text-align:center;">A * B</td></tr><tr><td style="text-align:center;">/</td><td style="text-align:center;">相除</td><td style="text-align:center;">B / A</td></tr><tr><td style="text-align:center;">%</td><td style="text-align:center;">求余</td><td style="text-align:center;">B % A</td></tr><tr><td style="text-align:center;">++</td><td style="text-align:center;">自增</td><td style="text-align:center;">A++</td></tr><tr><td style="text-align:center;">--</td><td style="text-align:center;">自减</td><td style="text-align:center;">A--</td></tr></tbody></table><hr><ul><li>关系算符和 C 语言一样</li></ul><table><thead><tr><th style="text-align:center;">运算符</th><th style="text-align:center;">描述</th><th style="text-align:center;">实例</th></tr></thead><tbody><tr><td style="text-align:center;">==</td><td style="text-align:center;">检查两个值是否相等，如果相等返回 True 否则返回 False。</td><td style="text-align:center;">A == B</td></tr><tr><td style="text-align:center;">!=</td><td style="text-align:center;">检查两个值是否不相等，如果不相等返回 True 否则返回 False。</td><td style="text-align:center;">A != B</td></tr><tr><td style="text-align:center;">&gt;</td><td style="text-align:center;">检查左边值是否大于右边值，如果是返回 True 否则返回 False。</td><td style="text-align:center;">A &gt; B</td></tr><tr><td style="text-align:center;"><code>&lt;</code></td><td style="text-align:center;">检查左边值是否小于右边值，如果是返回 True 否则返回 False。</td><td style="text-align:center;"><code>A &lt; B</code></td></tr><tr><td style="text-align:center;">&gt;=</td><td style="text-align:center;">检查左边值是否大于等于右边值，如果是返回 True 否则返回 False。</td><td style="text-align:center;">A &gt;= B</td></tr><tr><td style="text-align:center;"><code>&lt;=</code></td><td style="text-align:center;">检查左边值是否小于等于右边值，如果是返回 True 否则返回 False。</td><td style="text-align:center;"><code>A &lt;= B</code></td></tr></tbody></table><hr><ul><li>逻辑运算符和 C 语言一样</li></ul><table><thead><tr><th style="text-align:center;">运算符</th><th style="text-align:center;">描述</th><th style="text-align:center;">实例</th></tr></thead><tbody><tr><td style="text-align:center;">&amp;&amp;</td><td style="text-align:center;">如果两边的操作数都是 True，则条件 True，否则为 False。</td><td style="text-align:center;">A &amp;&amp; B</td></tr><tr><td style="text-align:center;"><code>||</code></td><td style="text-align:center;">如果两边的操作数有一个 True，则条件 True，否则为 False。</td><td style="text-align:center;"><code>A|| B</code></td></tr><tr><td style="text-align:center;">!</td><td style="text-align:center;">如果条件为 True，则逻辑 NOT 条件 False，否则为 True。</td><td style="text-align:center;">!A</td></tr></tbody></table><hr><ul><li>位运算符和 C 语言几乎一样 <ul><li>新增一个&amp;^运算符</li></ul></li></ul><table><thead><tr><th style="text-align:center;">运算符</th><th style="text-align:center;">描述</th><th style="text-align:center;">实例</th></tr></thead><tbody><tr><td style="text-align:center;">&amp;</td><td style="text-align:center;">参与运算的两数各对应的二进位相与, 对应位只要都是 1 结果就为 1</td><td style="text-align:center;">A &amp; B</td></tr><tr><td style="text-align:center;"><code>|</code></td><td style="text-align:center;">参与运算的两数各对应的二进位相或,对应位只要其中一个是 1 结果就为 1</td><td style="text-align:center;"><code>A | B</code></td></tr><tr><td style="text-align:center;">^</td><td style="text-align:center;">参与运算的两数各对应的二进位相异或,对应位只要不同结果就是 1</td><td style="text-align:center;">A ^ B</td></tr><tr><td style="text-align:center;"><code>&lt;&lt;</code></td><td style="text-align:center;">左移运算符,左移 n 位就是乘以 2 的 n 次方</td><td style="text-align:center;"><code>A &lt;&lt; 2</code></td></tr><tr><td style="text-align:center;">&gt;&gt;</td><td style="text-align:center;">右移运算符,右移 n 位就是除以 2 的 n 次方</td><td style="text-align:center;">B &gt;&gt; 2</td></tr><tr><td style="text-align:center;">&amp;^</td><td style="text-align:center;">逻辑清零运算符, B 对应位是 1,A 对应位清零,B 对应位是 0, A 对应位保留原样</td><td style="text-align:center;">A &amp;^ B</td></tr></tbody></table><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-c"><pre><code><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

  <span class="token comment">// 0110 a  &amp;^1011      b 如果b位位1,那么结果为0, 否则结果为a位对应的值  0100</span>

     a1 <span class="token operator">:</span><span class="token operator">=</span> <span class="token number">6</span>

     b1 <span class="token operator">:</span><span class="token operator">=</span> <span class="token number">11</span>

     res1 <span class="token operator">:</span><span class="token operator">=</span> a1 <span class="token operator">&amp;</span><span class="token operator">^</span> b1

     fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;res1 = &quot;</span><span class="token punctuation">,</span> res1<span class="token punctuation">)</span> <span class="token comment">// 4</span>

    <span class="token comment">// 1011 a  &amp;^1101 b 如果b位位1,那么结果为0, 否则结果为a位对应的值  0010</span>

     a2 <span class="token operator">:</span><span class="token operator">=</span> <span class="token number">11</span>

     b2 <span class="token operator">:</span><span class="token operator">=</span> <span class="token number">13</span>

     res2 <span class="token operator">:</span><span class="token operator">=</span> a2 <span class="token operator">&amp;</span><span class="token operator">^</span> b2

     fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;res2 = &quot;</span><span class="token punctuation">,</span> res2<span class="token punctuation">)</span> <span class="token comment">// 2</span>

    <span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><hr><ul><li>赋值运算符和 C 语言几乎一样 <ul><li>新增一个&amp;^=运算符</li></ul></li></ul><table><thead><tr><th style="text-align:center;">运算符</th><th style="text-align:center;">描述</th><th style="text-align:center;">实例</th></tr></thead><tbody><tr><td style="text-align:center;">=</td><td style="text-align:center;">将右边赋值给左边</td><td style="text-align:center;">C = A + B 将 A + B 表达式结果赋值给 C</td></tr><tr><td style="text-align:center;">+=</td><td style="text-align:center;">相加后再赋值</td><td style="text-align:center;">C += A 等于 C = C + A</td></tr><tr><td style="text-align:center;">-=</td><td style="text-align:center;">相减后再赋值</td><td style="text-align:center;">C -= A 等于 C = C - A</td></tr><tr><td style="text-align:center;">*=</td><td style="text-align:center;">相乘后再赋值</td><td style="text-align:center;">C _= A 等于 C = C _ A</td></tr><tr><td style="text-align:center;">/=</td><td style="text-align:center;">相除后再赋值</td><td style="text-align:center;">C /= A 等于 C = C / A</td></tr><tr><td style="text-align:center;">%=</td><td style="text-align:center;">求余后再赋值</td><td style="text-align:center;">C %= A 等于 C = C % A</td></tr><tr><td style="text-align:center;"><code>&lt;&lt;=</code></td><td style="text-align:center;">左移赋值</td><td style="text-align:center;"><code>C &lt;&lt;= 2 等于 C = C &lt;&lt; 2</code></td></tr><tr><td style="text-align:center;">&gt;&gt;=</td><td style="text-align:center;">右移赋值</td><td style="text-align:center;">C &gt;&gt;= 2 等于 C = C &gt;&gt; 2</td></tr><tr><td style="text-align:center;">&amp;=</td><td style="text-align:center;">位逻辑与赋值</td><td style="text-align:center;">C &amp;= 2 等于 C = C &amp; 2</td></tr><tr><td style="text-align:center;">^=</td><td style="text-align:center;">位逻辑或赋值</td><td style="text-align:center;">C ^= 2 等于 C = C ^ 2</td></tr><tr><td style="text-align:center;"><code>|=</code></td><td style="text-align:center;">位逻辑异或赋值 C</td><td style="text-align:center;"><code>= 2 等于 C = C|2</code></td></tr><tr><td style="text-align:center;">&amp;^=</td><td style="text-align:center;">位逻辑清零赋值</td><td style="text-align:center;">C &amp;^= 2 等于 C = C &amp;^ 2</td></tr></tbody></table><hr><h2 id="流程控制语句对比" tabindex="-1">流程控制语句对比 <a class="header-anchor" href="#流程控制语句对比" aria-hidden="true">#</a></h2><ul><li>C 语言流程控制中的 if、switch、for 在 Go 语言都可以使用</li><li>C 语言中的四大跳转语句 return、break、continue、goto 在 Go 语言都可以使用</li><li>Go 语言除了实现 C 语言中 if、switch、for、return、break、continue、goto 的基本功能以外,还对 if、switch、for、break、continue 进行了增强 <ul><li>例如: if 条件表达式前面可以添加初始化表达式</li><li>例如: break、continue 可以指定标签</li><li>例如: switch 语句可以当做 if/elseif 来使用</li><li>... ...</li></ul></li><li>值得注意的是 Go 语言中没有 while 循环和 dowhile 循环, 因为它们能做的 Go 语言中的 for 循环都可以做</li></ul><hr><h2 id="函数和方法对比" tabindex="-1">函数和方法对比 <a class="header-anchor" href="#函数和方法对比" aria-hidden="true">#</a></h2><ul><li>语言定义函数格式</li></ul><div class="language-c"><pre><code>返回值类型 函数名称<span class="token punctuation">(</span>形参列表<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  函数体相关语句<span class="token punctuation">;</span>
  <span class="token keyword">return</span> 返回值<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>语言定义函数格式</li></ul><div class="language-c"><pre><code>func  函数名称<span class="token punctuation">(</span>形参列表<span class="token punctuation">)</span><span class="token punctuation">(</span>返回值列表<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  函数体相关语句<span class="token punctuation">;</span>
  <span class="token keyword">return</span> 返回值<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><ul><li>C 语言中没有方法的概念, 但是 Go 语言中有方法 对于初学者而言,可以简单的把方法理解为一种特殊的函数</li></ul><div class="language-c"><pre><code><span class="token function">func</span>  <span class="token punctuation">(</span>接收者 接受者类型<span class="token punctuation">)</span>函数名称<span class="token punctuation">(</span>形参列表<span class="token punctuation">)</span><span class="token punctuation">(</span>返回值列表<span class="token punctuation">)</span> <span class="token punctuation">{</span>
  函数体相关语句<span class="token punctuation">;</span>
  <span class="token keyword">return</span> 返回值<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><hr><h2 id="编程思想对比" tabindex="-1">编程思想对比 <a class="header-anchor" href="#编程思想对比" aria-hidden="true">#</a></h2><ul><li>C 语言是一门面向过程的编程语言 <ul><li>1.上街买菜</li><li>2.摘菜</li><li>3.洗菜</li><li>4.切菜</li><li>5.开火炒菜</li><li>6.淘米煮饭</li><li>7.吃饭</li><li>面向过程: 按部就班, 亲力亲为,关注的是我应该怎么做?</li><li>做饭例子: 面向过程做饭</li></ul></li><li>Go 语言是门面向对象的编程语言 <ul><li>面向对象:化繁为简, 能不自己干自己就不干,关注的是我应该让谁来做?</li><li>做饭例子: 面向对象做饭</li><li>1.找个会做饭女朋友 or 男朋友</li><li>2.老婆我饿了 or 老公我饿了</li><li>3.躺着...等她/他把饭做好</li><li>4.吃饭</li></ul></li><li>不要把面向过程和面向对象想象得那么神奇, 它们只是思考问题的方式不同而已</li></ul><hr><h2 id="其它新增特性" tabindex="-1">其它新增特性 <a class="header-anchor" href="#其它新增特性" aria-hidden="true">#</a></h2><ul><li>接口</li><li>并发</li><li>反射</li><li>异常处理</li><li>....</li></ul><h2 id="go-语言-sdk-安装和配置" tabindex="-1">Go 语言 SDK 安装和配置 <a class="header-anchor" href="#go-语言-sdk-安装和配置" aria-hidden="true">#</a></h2><ul><li><p><strong>什么是 SDK</strong></p><ul><li>软件开发工具包（外语首字母缩写：<strong>SDK</strong>、外语全称：**SoftwareDevelopmentKit）**一般都是一些软件工程师为特定的软件包、软件框架、硬件平台、操作系统等建立应用软件时的开发工具的集合</li><li>如果不安装 SDK, 你可以编写 Go 语言代码, 但是你不能编译执行编写好的 Go 语言代码</li></ul></li><li><p><strong>如何安装?</strong></p></li><li><p>1.下载 SDK 安装包。地址: <a href="https://golang.google.cn/dl/" target="_blank" rel="noopener noreferrer">https://golang.google.cn/dl/</a></p><ul><li>由于新版本一般不太稳定, 所以我们选择下载上一个版本</li></ul></li><li><p>2.<strong>运行图形化安装包</strong></p></li><li><p><strong>3.环境变量配置</strong></p><ul><li><strong>3.检测配置环境变量</strong><ul><li>用于告诉操作系统，我们把Go语言SDK安装到哪了</li><li><strong>3.1.添加 GOROOT 环境变量</strong></li><li><strong>3.2.配置 GOPATH 环境变量</strong><ul><li>用于告诉操作系统，将来我们要在哪里编写Go语言程序</li></ul></li><li><strong>3.3.配置 GoBin 环境变量</strong><ul><li>用于告诉操作系统，去哪查找Go语言提供的一些应用程序</li></ul></li></ul></li></ul></li><li><p><strong>最终结果</strong></p><ul><li><em><strong>4.检查是否安装配置成功</strong></em><ul><li>4.1打开CMD</li><li>4.2 输入<code>go version</code></li><li>4.3 输入<code>go env</code></li></ul></li></ul></li></ul><hr><h2 id="安装-go-语言开发工具" tabindex="-1">安装 Go 语言开发工具 <a class="header-anchor" href="#安装-go-语言开发工具" aria-hidden="true">#</a></h2><ul><li>记事本(开发效率极低)</li><li>Vim(初学者入门门槛高)</li><li>VSCode(不喜欢)</li><li>Sublime Test(不喜欢)</li><li>GoLand(喜欢,当收费)</li><li>LiteIDE（开源免费， 跨平台运行，轻量级）</li><li>生男生女都一样， 最关键是你中意哪个就用哪个</li></ul><hr><h2 id="goland-安装" tabindex="-1">Goland 安装 <a class="header-anchor" href="#goland-安装" aria-hidden="true">#</a></h2><ul><li>下载安装包: 点我下载 Goland</li><li>提取码：lm7v</li><li>运行安装文件</li><li>疯狂下一步</li></ul><blockquote><ul><li>激活程序: 自行淘宝<code>JetBrains 激活</code>(仅供学生党参考, 在职人员请支持正版)</li><li>看不习惯英文的可以自行百度<code>Goland汉化包</code></li></ul></blockquote><ul><li>打开项目文件夹</li><li>测试开发工具是否安装正确</li></ul><hr><ul><li>其它问题: <ul><li>提示没有安装JVM</li><li>下载 Java SDK 点我下载</li><li>安装即可</li></ul></li></ul><h2 id="go-语言程序组成" tabindex="-1">Go 语言程序组成 <a class="header-anchor" href="#go-语言程序组成" aria-hidden="true">#</a></h2><ul><li>和 C 语言程序一样，Go 语言程序也是由众多函数组成的</li><li>和 C 语言程序一样，程序运行时系统会**<em>自动调用</em><strong>名称叫做</strong><em>main 的函数</em>**</li><li>和 C 语言程序一样，如果一个程序**<em>没有主函数</em><strong>，则这个程序</strong><em>不具备运行能力</em>**</li><li>和 C 语言程序一样，一个 Go 语言程序**<em>有且只能有一个主函数</em>**</li></ul><hr><h2 id="go-语言程序主函数定义格式" tabindex="-1">Go 语言程序主函数定义格式 <a class="header-anchor" href="#go-语言程序主函数定义格式" aria-hidden="true">#</a></h2><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>C 语言 main 函数格式</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-c"><pre><code><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span> argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><ul><li>Go 语言 main 函数格式 <ul><li>func 告诉系统这是一个函数</li><li>main 主函数固定名称</li><li>函数左括号必须和函数名在同一行</li><li>main 函数必须在 main 包中</li></ul></li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token comment">// 告诉系统当前编写的代码属于哪个包</span>
<span class="token keyword">package</span> main

<span class="token comment">// 定义了一个名称叫做main的函数</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

<span class="token punctuation">}</span>

</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><hr><h2 id="go-语言-helloworld" tabindex="-1">Go 语言 HelloWorld <a class="header-anchor" href="#go-语言-helloworld" aria-hidden="true">#</a></h2><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main <span class="token comment">// 告诉系统当前代码属于main这个包</span>

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span> <span class="token comment">// 导入打印函数对应的fmt包</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token comment">// 通过包名.函数名称的方式, 利用fmt包中的打印函数输出语句</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Hello World!!!&quot;</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><hr><h2 id="go-语言-helloworld-和-c-语言-helloworld-异同" tabindex="-1">Go 语言 HelloWorld 和 C 语言 HelloWorld 异同 <a class="header-anchor" href="#go-语言-helloworld-和-c-语言-helloworld-异同" aria-hidden="true">#</a></h2><ul><li><p><em><strong>1.文件类型不同</strong></em></p><ul><li>C语言代码保存在.c为后缀的文件中</li><li>Go 语言代码保存在.go 为后缀的文件中</li></ul></li><li><p><em><strong>2.代码管理方式不同</strong></em></p><ul><li>我们会把不同类型的代码放到不同的.go文件中,然后通过package给该文件指定一个包名</li><li>需要使用时直接通过 import 导入对应的包名即可</li><li>C 语言会把不同类型的代码放到不同的.c 文件中, 然后再编写对应的.h 文件</li><li>需要使用时直接通过#include 导入对应文件的.h 文件即可</li><li>C 语言程序用**<em>文件</em>**的方式管理代码</li><li>Go 语言程序用<strong>包</strong>的形式管理代码</li></ul></li><li><p><strong>3.main 函数书写文件不同</strong></p><ul><li>C语言中main函数可以写在任意文件中, 只要保证一个程序只有一个main函数即可</li><li>Go 语言中 main 函数只能写在包名为 main 的文件夹中, 同样需要保存一个程序只有一个 main 函数</li></ul></li><li><p><em><strong>4.函数编写的格式不同</strong></em></p><ul><li>注意:C语言函数的左括号可以和函数名称在同一行, 也可以不在同一行</li></ul></li><li><p>C 语言中函数的格式为</p></li></ul><div class="language-c"><pre><code>返回值类型 函数名称<span class="token punctuation">(</span>形参列表<span class="token punctuation">)</span> <span class="token punctuation">{</span>

函数体相关语句<span class="token punctuation">;</span>

<span class="token keyword">return</span> 返回值<span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre></div><ul><li>Go 语言函数定义格式 注意:Go 语言函数的左括号必须和函数名称在同一行,否则会报错</li></ul><div class="language-go"><pre><code><span class="token keyword">func</span>  函数名称<span class="token punctuation">(</span>形参列表<span class="token punctuation">)</span><span class="token punctuation">(</span>返回值列表<span class="token punctuation">)</span> <span class="token punctuation">{</span>

函数体相关语句<span class="token punctuation">;</span>

<span class="token keyword">return</span> 返回值<span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre></div><ul><li><em><strong>5.函数调用的格式不同</strong></em><ul><li>C语言通过#include导入.h文件后,直接通过函数名称调用函数</li><li>Go 语言通过 import 导入对应的包后,需要通过包名.函数名称的方式调用</li></ul></li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-c"><pre><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&quot;calculate.h&quot;</span></span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token punctuation">{</span>

<span class="token keyword">int</span> res <span class="token operator">=</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 直接利用函数名称调用函数</span>

<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;res = %d!\n&quot;</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;fmt&quot;</span>

	<span class="token string">&quot;lesson_1/calculate&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	res <span class="token operator">:=</span> calculate<span class="token punctuation">.</span><span class="token function">Sum</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token comment">// 使用包名.函数名称调用函数</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;res1 = &quot;</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span>

<span class="token punctuation">}</span>

</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><ul><li><em><strong>6.语句的结束方式不同</strong></em><ul><li>C语言中每条语句都必须以分号结尾</li><li>Go 语言中每条语句后面不用添加分号(编译器会自动添加)</li></ul></li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-c"><pre><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&quot;calculate.h&quot;</span></span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token punctuation">{</span>

<span class="token keyword">int</span> res <span class="token operator">=</span> <span class="token function">sum</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 不写分号会报错</span>

<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;res = %d!\n&quot;</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 不写分号会报错</span>

<span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">// 不写分号会报错</span>

<span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;fmt&quot;</span>

	<span class="token string">&quot;lesson_1/calculate&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	res <span class="token operator">:=</span> calculate<span class="token punctuation">.</span><span class="token function">Sum</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span> <span class="token comment">// 不用写分号</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;res1 = &quot;</span><span class="token punctuation">,</span> res<span class="token punctuation">)</span> <span class="token comment">// 不用写分号</span>

<span class="token punctuation">}</span>

</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><hr><h2 id="go-语言注释" tabindex="-1">Go 语言注释 <a class="header-anchor" href="#go-语言注释" aria-hidden="true">#</a></h2><ul><li>和 C 语言一样,Go 语言也支持单行注释和多行注释, 并且所有注释的特性都和 C 语言一样 <ul><li>单行注释 <code>// 被注释内容</code></li><li>多行注释 <code>/* 被注释内容*/</code></li></ul></li><li>在 Go 语言中,官方更加推荐使用单行注释,而非多行注释(详情可以直接查看 Go 官方源码)</li></ul><hr><h2 id="go-语言编码风格" tabindex="-1">Go 语言编码风格 <a class="header-anchor" href="#go-语言编码风格" aria-hidden="true">#</a></h2><ul><li>1.go 程序编写在.go 为后缀的文件中</li><li>2.包名一般使用文件所在文件夹的名称</li><li>2.包名应该简洁、清晰且全小写</li><li>3.main 函数只能编写在 main 包中</li><li>4.每一条语句后面可以不用编写分号(推荐)</li><li>5.如果没有编写分号,一行只能编写一条语句</li><li>6.函数的左括号必须和函数名在同一行</li><li>7.导入包但没有使用包编译会报错</li><li>8.定义局部变量但没有使用变量编译也会报错</li><li>9.定义函数但没有使用函数不会报错</li><li>10.给方法、变量添加说明,尽量使用单行注释</li></ul><h2 id="关键字" tabindex="-1">关键字 <a class="header-anchor" href="#关键字" aria-hidden="true">#</a></h2><ul><li>Go 语言中的关键字和 C 语言中的关键字的含义样, 是指被 Go 语言赋予特殊含义的单词</li><li>Go 语言中关键字的特征和 C 语言也一样 <ul><li>全部都是小写</li><li>在开发工具中会显示特殊颜色</li></ul></li><li>Go 语言中关键字的注意点和 C 语言也一样 <ul><li>因为关键字在C语言中有特殊的含义, 所以不能用作变量名、函数名等</li></ul></li></ul><hr><h2 id="go-语言中除了关键字以外-还有-30-多个预定义标识符" tabindex="-1">Go 语言中除了关键字以外,还有 30 多个<code>预定义标识符</code> <a class="header-anchor" href="#go-语言中除了关键字以外-还有-30-多个预定义标识符" aria-hidden="true">#</a></h2><table><thead><tr><th style="text-align:center;">内建常量</th><th style="text-align:center;"></th><th style="text-align:center;"></th><th style="text-align:center;"></th></tr></thead><tbody><tr><td style="text-align:center;">true</td><td style="text-align:center;">false</td><td style="text-align:center;">iota</td><td style="text-align:center;">nil</td></tr></tbody></table><table><thead><tr><th style="text-align:center;">內建类型</th><th style="text-align:center;"></th><th style="text-align:center;"></th><th style="text-align:center;"></th></tr></thead><tbody><tr><td style="text-align:center;">int</td><td style="text-align:center;">int8</td><td style="text-align:center;">int16</td><td style="text-align:center;">int32</td></tr><tr><td style="text-align:center;">int64</td><td style="text-align:center;">uint</td><td style="text-align:center;">uint8</td><td style="text-align:center;">uint16</td></tr><tr><td style="text-align:center;">uint32</td><td style="text-align:center;">uint64</td><td style="text-align:center;">uintptr</td><td style="text-align:center;">float32</td></tr><tr><td style="text-align:center;">float64</td><td style="text-align:center;">complex64</td><td style="text-align:center;">complex128</td><td style="text-align:center;">bool</td></tr><tr><td style="text-align:center;">byte</td><td style="text-align:center;">rune</td><td style="text-align:center;">string</td><td style="text-align:center;">error</td></tr></tbody></table><table><thead><tr><th style="text-align:center;">內建函数</th><th style="text-align:center;"></th><th style="text-align:center;"></th><th style="text-align:center;"></th></tr></thead><tbody><tr><td style="text-align:center;">make</td><td style="text-align:center;">len</td><td style="text-align:center;">cap</td><td style="text-align:center;">new</td></tr><tr><td style="text-align:center;">append</td><td style="text-align:center;">copy</td><td style="text-align:center;">delete</td><td style="text-align:center;">real</td></tr><tr><td style="text-align:center;">imag</td><td style="text-align:center;">panic</td><td style="text-align:center;">recover</td><td style="text-align:center;">complex</td></tr></tbody></table><hr><h2 id="标识符" tabindex="-1">标识符 <a class="header-anchor" href="#标识符" aria-hidden="true">#</a></h2><ul><li>Go 语言中的标识符和 C 语言中的标识符的含义样, 是指程序员在程序中自己起的名字(变量名称、函数名称等)</li></ul><hr><ul><li><p>和 C 语言一样 Go 语言标识符也有一套<code>命名规则</code>, Go 语言标识符的命名规则几乎和 C 语言一模一样</p><ul><li>只能由字母(a~z、 A~Z)、数字、下划线组成</li><li>不能包含除下划线以外的其它特殊字符串</li><li>不能以数字开头</li><li>不能是 Go 语言中的关键字</li><li>标识符严格区分大小写, test 和 Test 是两个不同的标识符</li></ul></li><li><p>和 C 语言标识符命名规则不同的是</p></li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token comment">// 将常量10保存到名称叫做num的变量中</span>

	<span class="token keyword">var</span> num <span class="token builtin">int</span> <span class="token operator">=</span> <span class="token number">10</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;num = &quot;</span><span class="token punctuation">,</span> num<span class="token punctuation">)</span>

	<span class="token comment">// 忽略常量20,不会分配存储空间,也不会保存常量20</span>

	<span class="token comment">//var _ int = 20</span>

	<span class="token comment">//fmt.Println(&quot;_ = &quot;, _) // cannot use _ as value</span>

	<span class="token comment">// Go语言中如果定义了变量没有使用, 那么编译会报错(sub declared and not used)</span>

	<span class="token comment">// 所以如果我们只使用了sum,没有使用sub会报错</span>

	<span class="token comment">// 为了解决这个问题, 我们可以使用_忽略sub的值</span>

	<span class="token comment">//var sum, sub int = calculate(20, 10)</span>

	<span class="token keyword">var</span> sum<span class="token punctuation">,</span> <span class="token boolean">_</span> <span class="token builtin">int</span> <span class="token operator">=</span> <span class="token function">calculate</span><span class="token punctuation">(</span><span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;sum = &quot;</span><span class="token punctuation">,</span> sum<span class="token punctuation">)</span>

<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">calculate</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token keyword">var</span> sum <span class="token builtin">int</span> <span class="token operator">=</span> a <span class="token operator">+</span> b

	<span class="token keyword">var</span> sub <span class="token builtin">int</span> <span class="token operator">=</span> a <span class="token operator">-</span> b

	<span class="token keyword">return</span> sum<span class="token punctuation">,</span> sub

<span class="token punctuation">}</span>

</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><ul><li>Go 语言默认的编码方式就是 UTF-8, 所以 Go 语言支持中文, 所以可以用中文作为标识符(非常非常非常不推荐)</li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token comment">// 不会报错, 可以正常运行</span>

	<span class="token keyword">var</span> 年龄 <span class="token builtin">int</span> <span class="token operator">=</span> <span class="token number">33</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;年龄 = &quot;</span><span class="token punctuation">,</span> 年龄<span class="token punctuation">)</span> <span class="token comment">// 33</span>

	<span class="token comment">// 不会报错, 可以正常运行</span>

	<span class="token keyword">var</span> 结果 <span class="token builtin">int</span> <span class="token operator">=</span> 计算器<span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;结果 = &quot;</span><span class="token punctuation">,</span> 结果<span class="token punctuation">)</span> <span class="token comment">// 30</span>

<span class="token punctuation">}</span>

<span class="token keyword">func</span> 计算器<span class="token punctuation">(</span>第一个变量<span class="token punctuation">,</span> 第二个变量 <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{</span>

	<span class="token keyword">return</span> 第一个变量 <span class="token operator">+</span> 第二个变量

<span class="token punctuation">}</span>

</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><ul><li>Go语言中_单独作为标识符出现时, 代表<code>空标识符</code>, 它对应的值会被忽略</li></ul><hr><ul><li>和 C 语言一样,标识符除了有<code>命名规则</code>以外,还有标识符<code>命名规范</code><ul><li>驼峰命名: sendMessage / sayHello</li><li>_命名: send_message / say_hello</li><li>规则必须遵守, 规范不一定要遵守, 但是建议遵守</li><li>Go 语言的命名规范和 C 语言一样, 都是采用驼峰命名, 避免采用_命名</li></ul></li></ul><h2 id="go-语言数据类型" tabindex="-1">Go 语言数据类型 <a class="header-anchor" href="#go-语言数据类型" aria-hidden="true">#</a></h2><ul><li><p>Go 语言本质是用 C 语言编写的一套高级开发语言, 所以 Go 语言中的数据类型大部分都是由 C 语言演变而来的</p></li><li><p>C 语言数据类型</p></li><li><p>Go 语言数据类型</p></li></ul><hr><ul><li>C 语言各数据类型占用内存空间</li></ul><table><thead><tr><th style="text-align:center;">类型</th><th style="text-align:center;">32 位编译器</th><th style="text-align:center;">64 位编译器</th></tr></thead><tbody><tr><td style="text-align:center;">char</td><td style="text-align:center;">1</td><td style="text-align:center;">1</td></tr><tr><td style="text-align:center;">int</td><td style="text-align:center;">4</td><td style="text-align:center;">4</td></tr><tr><td style="text-align:center;">float</td><td style="text-align:center;">4</td><td style="text-align:center;">4</td></tr><tr><td style="text-align:center;">double</td><td style="text-align:center;">8</td><td style="text-align:center;">8</td></tr><tr><td style="text-align:center;">short</td><td style="text-align:center;">2</td><td style="text-align:center;">2</td></tr><tr><td style="text-align:center;">long</td><td style="text-align:center;">4</td><td style="text-align:center;">8</td></tr><tr><td style="text-align:center;">long long</td><td style="text-align:center;">8</td><td style="text-align:center;">8</td></tr><tr><td style="text-align:center;">void*</td><td style="text-align:center;">4</td><td style="text-align:center;">8</td></tr></tbody></table><ul><li>Go 语言各数据类型占用内存空间</li></ul><table><thead><tr><th style="text-align:center;">类型</th><th style="text-align:center;">32 位编译器</th><th style="text-align:center;">64 位编译器</th><th style="text-align:center;">本质</th></tr></thead><tbody><tr><td style="text-align:center;">int8/uint8</td><td style="text-align:center;">1</td><td style="text-align:center;">1</td><td style="text-align:center;">signed char/unsigned char</td></tr><tr><td style="text-align:center;">int16/uint16</td><td style="text-align:center;">2</td><td style="text-align:center;">2</td><td style="text-align:center;">signed short/unsigned short</td></tr><tr><td style="text-align:center;">int32/uint32</td><td style="text-align:center;">4</td><td style="text-align:center;">4</td><td style="text-align:center;">signed int/unsigned int</td></tr><tr><td style="text-align:center;">int64/uint64</td><td style="text-align:center;">8</td><td style="text-align:center;">8</td><td style="text-align:center;">signed long long int/unsigned long long int</td></tr><tr><td style="text-align:center;">byte</td><td style="text-align:center;">1</td><td style="text-align:center;">1</td><td style="text-align:center;">uint8/unsigned char</td></tr><tr><td style="text-align:center;">rune</td><td style="text-align:center;">4</td><td style="text-align:center;">4</td><td style="text-align:center;">int32/signed int</td></tr><tr><td style="text-align:center;">int</td><td style="text-align:center;">4</td><td style="text-align:center;">8</td><td style="text-align:center;">根据机器位数决定长度</td></tr><tr><td style="text-align:center;">uintptr</td><td style="text-align:center;">4</td><td style="text-align:center;">8</td><td style="text-align:center;">根据机器位数决定长度 uint32/uint64</td></tr><tr><td style="text-align:center;">float32</td><td style="text-align:center;">4</td><td style="text-align:center;">4</td><td style="text-align:center;">float</td></tr><tr><td style="text-align:center;">float64</td><td style="text-align:center;">8</td><td style="text-align:center;">8</td><td style="text-align:center;">double</td></tr><tr><td style="text-align:center;">true</td><td style="text-align:center;">1</td><td style="text-align:center;">1</td><td style="text-align:center;">char 类型的整型</td></tr><tr><td style="text-align:center;">false</td><td style="text-align:center;">1</td><td style="text-align:center;">1</td><td style="text-align:center;">char 类型的整型</td></tr></tbody></table><ul><li>和 C 语言一样,Go 语言也提供了 Sizeof 计算变量的内存空间 <ul><li>1.导入import &quot;unsafe&quot;包</li><li>2.通过 unsafe.Sizeof()计算变量内存空间</li></ul></li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;fmt&quot;</span>

	<span class="token string">&quot;unsafe&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;int size = &quot;</span><span class="token punctuation">,</span> unsafe<span class="token punctuation">.</span><span class="token function">Sizeof</span><span class="token punctuation">(</span><span class="token function">int</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;int8 size = &quot;</span><span class="token punctuation">,</span> unsafe<span class="token punctuation">.</span><span class="token function">Sizeof</span><span class="token punctuation">(</span><span class="token function">int8</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;int16 size = &quot;</span><span class="token punctuation">,</span> unsafe<span class="token punctuation">.</span><span class="token function">Sizeof</span><span class="token punctuation">(</span><span class="token function">int16</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;int32 size = &quot;</span><span class="token punctuation">,</span> unsafe<span class="token punctuation">.</span><span class="token function">Sizeof</span><span class="token punctuation">(</span><span class="token function">int32</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;int64 size = &quot;</span><span class="token punctuation">,</span> unsafe<span class="token punctuation">.</span><span class="token function">Sizeof</span><span class="token punctuation">(</span><span class="token function">int64</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;uint size = &quot;</span><span class="token punctuation">,</span> unsafe<span class="token punctuation">.</span><span class="token function">Sizeof</span><span class="token punctuation">(</span><span class="token function">uint</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;uint8 size = &quot;</span><span class="token punctuation">,</span> unsafe<span class="token punctuation">.</span><span class="token function">Sizeof</span><span class="token punctuation">(</span><span class="token function">uint8</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;uint16 size = &quot;</span><span class="token punctuation">,</span> unsafe<span class="token punctuation">.</span><span class="token function">Sizeof</span><span class="token punctuation">(</span><span class="token function">uint16</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;uint32 size = &quot;</span><span class="token punctuation">,</span> unsafe<span class="token punctuation">.</span><span class="token function">Sizeof</span><span class="token punctuation">(</span><span class="token function">uint32</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;uint64 size = &quot;</span><span class="token punctuation">,</span> unsafe<span class="token punctuation">.</span><span class="token function">Sizeof</span><span class="token punctuation">(</span><span class="token function">uint64</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;uintptr size = &quot;</span><span class="token punctuation">,</span> unsafe<span class="token punctuation">.</span><span class="token function">Sizeof</span><span class="token punctuation">(</span><span class="token function">uintptr</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;byte size = &quot;</span><span class="token punctuation">,</span> unsafe<span class="token punctuation">.</span><span class="token function">Sizeof</span><span class="token punctuation">(</span><span class="token function">byte</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;rune size = &quot;</span><span class="token punctuation">,</span> unsafe<span class="token punctuation">.</span><span class="token function">Sizeof</span><span class="token punctuation">(</span><span class="token function">rune</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;float32 size = &quot;</span><span class="token punctuation">,</span> unsafe<span class="token punctuation">.</span><span class="token function">Sizeof</span><span class="token punctuation">(</span><span class="token function">float32</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;float64 size = &quot;</span><span class="token punctuation">,</span> unsafe<span class="token punctuation">.</span><span class="token function">Sizeof</span><span class="token punctuation">(</span><span class="token function">float64</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;true size = &quot;</span><span class="token punctuation">,</span> unsafe<span class="token punctuation">.</span><span class="token function">Sizeof</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;false size = &quot;</span><span class="token punctuation">,</span> unsafe<span class="token punctuation">.</span><span class="token function">Sizeof</span><span class="token punctuation">(</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><hr><ul><li>Go 语言基本数据类型内部实现 <ul><li>越老版本的代码越纯粹,越适合新手学习</li><li>随着代码的更新迭代会逐步变得非常复杂, 所以此处建议下载1.4版本</li><li>golang官方网站下载go1.4版本源代码</li><li>解压后打开路径: <code>go\src\runtime\runtime.h</code></li><li>得到如下实现代码</li></ul></li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-c"><pre><code><span class="token comment">// 第8行到35行</span>

    <span class="token keyword">typedef</span> <span class="token keyword">signed</span> <span class="token keyword">char</span>  int8<span class="token punctuation">;</span>

    <span class="token keyword">typedef</span> <span class="token keyword">unsigned</span> <span class="token keyword">char</span>  uint8<span class="token punctuation">;</span>

    <span class="token keyword">typedef</span> <span class="token keyword">signed</span> <span class="token keyword">short</span>  int16<span class="token punctuation">;</span>

    <span class="token keyword">typedef</span> <span class="token keyword">unsigned</span> <span class="token keyword">short</span>  uint16<span class="token punctuation">;</span>

    <span class="token keyword">typedef</span> <span class="token keyword">signed</span> <span class="token keyword">int</span>  int32<span class="token punctuation">;</span>

    <span class="token keyword">typedef</span> <span class="token keyword">unsigned</span> <span class="token keyword">int</span>  uint32<span class="token punctuation">;</span>

    <span class="token keyword">typedef</span> <span class="token keyword">signed</span> <span class="token keyword">long</span> <span class="token keyword">long</span> <span class="token keyword">int</span> int64<span class="token punctuation">;</span>

    <span class="token keyword">typedef</span> <span class="token keyword">unsigned</span> <span class="token keyword">long</span> <span class="token keyword">long</span> <span class="token keyword">int</span> uint64<span class="token punctuation">;</span>

    <span class="token keyword">typedef</span> <span class="token keyword">float</span>   float32<span class="token punctuation">;</span>

    <span class="token keyword">typedef</span> <span class="token keyword">double</span>   float64<span class="token punctuation">;</span>

    <span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifdef</span> <span class="token expression">_64BIT</span></span>

    <span class="token keyword">typedef</span> uint64  uintptr<span class="token punctuation">;</span>

    <span class="token keyword">typedef</span> int64  intptr<span class="token punctuation">;</span>

    <span class="token keyword">typedef</span> int64  intgo<span class="token punctuation">;</span> <span class="token comment">// Go&#39;s int</span>

    <span class="token keyword">typedef</span> uint64  uintgo<span class="token punctuation">;</span> <span class="token comment">// Go&#39;s uint</span>

    <span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">else</span></span>

    <span class="token keyword">typedef</span> uint32  uintptr<span class="token punctuation">;</span>

    <span class="token keyword">typedef</span> int32  intptr<span class="token punctuation">;</span>

    <span class="token keyword">typedef</span> int32  intgo<span class="token punctuation">;</span> <span class="token comment">// Go&#39;s int</span>

    <span class="token keyword">typedef</span> uint32  uintgo<span class="token punctuation">;</span> <span class="token comment">// Go&#39;s uint</span>

    <span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span>

    <span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">ifdef</span> <span class="token expression">_64BITREG</span></span>

    <span class="token keyword">typedef</span> uint64  uintreg<span class="token punctuation">;</span>

    <span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">else</span></span>

    <span class="token keyword">typedef</span> uint32  uintreg<span class="token punctuation">;</span>

    <span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">endif</span></span>


    <span class="token comment">// 第153行到157行</span>

    <span class="token keyword">enum</span>

    <span class="token punctuation">{</span>

     true <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span>

     false <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span>

    <span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><blockquote><p>install B 时刻: Go 本质就是用 C 语言编写的一门高级编程语言 所以江哥前面教你 C 语言就是为了今天能让你看懂 Go 的实现代码,做到知其然知其所以然 注意点: 企业开发中一般使用 int, 因为 int 会根据你当前的操作系统自动转换为 int32 和 int64</p></blockquote><hr><h2 id="go-语言变量" tabindex="-1">Go 语言变量 <a class="header-anchor" href="#go-语言变量" aria-hidden="true">#</a></h2><ul><li>Go 语言中变量的概念和 C 语言中也一样, 所以我们直接来看下如何定义和使用变量即可</li><li>C 语言中定义变量的格式</li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-c"><pre><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span> argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token punctuation">{</span>
  <span class="token comment">// 数据类型 变量名称;</span>

  <span class="token comment">// 数据类型 变量名称1, 变量名称2;</span>

  <span class="token keyword">int</span> num1<span class="token punctuation">;</span> <span class="token comment">// 先定义</span>

  num1 <span class="token operator">=</span> <span class="token number">10</span><span class="token punctuation">;</span> <span class="token comment">// 后初始化</span>

  <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;num1 = %d\n&quot;</span><span class="token punctuation">,</span> num1<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">int</span> num2 <span class="token operator">=</span> <span class="token number">20</span><span class="token punctuation">;</span> <span class="token comment">// 定义的同时初始化</span>

  <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;num2 = %d\n&quot;</span><span class="token punctuation">,</span> num2<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token comment">// 注意: 同时定义多个变量,不支持定义时初始化, 只能先定义后初始化</span>

  <span class="token keyword">int</span> num3<span class="token punctuation">,</span> num4<span class="token punctuation">;</span> <span class="token comment">//同时定义多个变量</span>

  num3 <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">;</span>

  num4 <span class="token operator">=</span> <span class="token number">40</span><span class="token punctuation">;</span>

  <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;num3 = %d\n&quot;</span><span class="token punctuation">,</span> num3<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;num4 = %d\n&quot;</span><span class="token punctuation">,</span> num4<span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><ul><li>Go 语言中定义变量有三种格式</li></ul><div class="language-go"><pre><code><span class="token comment">// 标准格式</span>

<span class="token keyword">var</span> 变量名称 数据类型 <span class="token operator">=</span> 值<span class="token punctuation">;</span>

<span class="token comment">// 自动推到类型格式</span>

<span class="token keyword">var</span> 变量名称 <span class="token operator">=</span> 值<span class="token punctuation">;</span>

<span class="token comment">// 简短格式(golang官方推荐格式)</span>

变量名称 <span class="token operator">:=</span> 值<span class="token punctuation">;</span>
</code></pre></div><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div></div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token keyword">var</span> num1 <span class="token builtin">int</span> <span class="token comment">// 先定义</span>

	num1 <span class="token operator">=</span> <span class="token number">10</span> <span class="token comment">// 后赋值</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;num1 = &quot;</span><span class="token punctuation">,</span> num1<span class="token punctuation">)</span>

	<span class="token keyword">var</span> num2 <span class="token builtin">int</span> <span class="token operator">=</span> <span class="token number">20</span> <span class="token comment">// 定义的同时赋值</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;num2 = &quot;</span><span class="token punctuation">,</span> num2<span class="token punctuation">)</span>

	<span class="token keyword">var</span> num3 <span class="token operator">=</span> <span class="token number">30</span> <span class="token comment">// 定义的同时赋值, 并省略数据类型</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;num3 = &quot;</span><span class="token punctuation">,</span> num3<span class="token punctuation">)</span>

	num4 <span class="token operator">:=</span> <span class="token number">40</span> <span class="token comment">// 定义的同时赋值, 并省略关键字和数据类型</span>

	<span class="token comment">/*

	   num4  := 40 等价于

	   var num4 int

	   num4 = 40

	*/</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;num4 = &quot;</span><span class="token punctuation">,</span> num4<span class="token punctuation">)</span>

<span class="token punctuation">}</span>

</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><ul><li>和 <code>C</code> 语言一样,除了可以定义单个变量以外,还支持一次性定义多个变量（连续定义）</li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token keyword">var</span> num1<span class="token punctuation">,</span> num2 <span class="token builtin">int</span> <span class="token comment">// 先定义</span>

	num1 <span class="token operator">=</span> <span class="token number">10</span> <span class="token comment">// 后赋值</span>

	num2 <span class="token operator">=</span> <span class="token number">20</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;num1 = &quot;</span><span class="token punctuation">,</span> num1<span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;num2 = &quot;</span><span class="token punctuation">,</span> num2<span class="token punctuation">)</span>

	<span class="token keyword">var</span> num3<span class="token punctuation">,</span> num4 <span class="token builtin">int</span> <span class="token operator">=</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">40</span> <span class="token comment">// 定义的同时赋值</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;num3 = &quot;</span><span class="token punctuation">,</span> num3<span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;num4 = &quot;</span><span class="token punctuation">,</span> num4<span class="token punctuation">)</span>

	<span class="token keyword">var</span> num5<span class="token punctuation">,</span> num6 <span class="token operator">=</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">60</span> <span class="token comment">// 定义的同时赋值, 并省略数据类型</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;num5 = &quot;</span><span class="token punctuation">,</span> num5<span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;num6 = &quot;</span><span class="token punctuation">,</span> num6<span class="token punctuation">)</span>

	num7<span class="token punctuation">,</span> num8 <span class="token operator">:=</span> <span class="token number">70</span><span class="token punctuation">,</span> <span class="token number">80</span> <span class="token comment">// 定义的同时赋值, 并省略关键字和数据类型</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;num7 = &quot;</span><span class="token punctuation">,</span> num7<span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;num8 = &quot;</span><span class="token punctuation">,</span> num8<span class="token punctuation">)</span>

<span class="token punctuation">}</span>

</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><ul><li>变量组定义</li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token keyword">var</span> <span class="token punctuation">(</span> <span class="token comment">// 先定义</span>

		num1 <span class="token builtin">int</span>

		num2 <span class="token builtin">float32</span>
	<span class="token punctuation">)</span>

	num1 <span class="token operator">=</span> <span class="token number">10</span> <span class="token comment">// 后赋值</span>

	num2 <span class="token operator">=</span> <span class="token number">3.14</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;num1 = &quot;</span><span class="token punctuation">,</span> num1<span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;num2 = &quot;</span><span class="token punctuation">,</span> num2<span class="token punctuation">)</span>

	<span class="token keyword">var</span> <span class="token punctuation">(</span> <span class="token comment">// 定义的同时赋值</span>

		num3 <span class="token builtin">int</span> <span class="token operator">=</span> <span class="token number">30</span>

		num4 <span class="token builtin">float32</span> <span class="token operator">=</span> <span class="token number">6.66</span>
	<span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;num3 = &quot;</span><span class="token punctuation">,</span> num3<span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;num4 = &quot;</span><span class="token punctuation">,</span> num4<span class="token punctuation">)</span>

	<span class="token keyword">var</span> <span class="token punctuation">(</span> <span class="token comment">// 定义的同时赋值, 并省略数据类型</span>

		num5 <span class="token operator">=</span> <span class="token number">50</span>

		num6 <span class="token operator">=</span> <span class="token number">7.77</span>
	<span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;num5 = &quot;</span><span class="token punctuation">,</span> num5<span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;num6 = &quot;</span><span class="token punctuation">,</span> num6<span class="token punctuation">)</span>

	<span class="token keyword">var</span> <span class="token punctuation">(</span> <span class="token comment">// 一行定义多个</span>

		num7<span class="token punctuation">,</span> num8 <span class="token operator">=</span> <span class="token number">70</span><span class="token punctuation">,</span> <span class="token number">80</span>

		num9<span class="token punctuation">,</span> num10 <span class="token operator">=</span> <span class="token number">9.99</span><span class="token punctuation">,</span> <span class="token number">100</span>
	<span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;num7 = &quot;</span><span class="token punctuation">,</span> num7<span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;num8 = &quot;</span><span class="token punctuation">,</span> num8<span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;num9 = &quot;</span><span class="token punctuation">,</span> num9<span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;num10 = &quot;</span><span class="token punctuation">,</span> num10<span class="token punctuation">)</span>

<span class="token punctuation">}</span>

</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><hr><h2 id="go-语言变量定义注意点" tabindex="-1">Go 语言变量定义注意点 <a class="header-anchor" href="#go-语言变量定义注意点" aria-hidden="true">#</a></h2><ul><li>简短模式的含义是定义的同时初始化</li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	num <span class="token operator">:=</span> <span class="token number">10</span>

	num <span class="token operator">:=</span> <span class="token number">20</span> <span class="token comment">// 编译报错, 重复定义</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;num = &quot;</span><span class="token punctuation">,</span> num<span class="token punctuation">)</span>

<span class="token punctuation">}</span>

</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><ul><li>一定不要把:=当做赋值运算符来使用</li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">var</span> num <span class="token operator">=</span> <span class="token number">10</span> <span class="token comment">// 定义一个全局变量</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	num <span class="token operator">:=</span> <span class="token number">20</span> <span class="token comment">// 定义一个局部变量</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;num = &quot;</span><span class="token punctuation">,</span> num<span class="token punctuation">)</span>

	<span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;num = &quot;</span><span class="token punctuation">,</span> num<span class="token punctuation">)</span> <span class="token comment">// 还是输出10</span>

<span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><ul><li>:=只能用于定义局部变量,不能用于定义全局变量</li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

num <span class="token operator">:=</span> <span class="token number">10</span> <span class="token comment">// 编译报错</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;num = &quot;</span><span class="token punctuation">,</span> num<span class="token punctuation">)</span>

<span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><ul><li>使用:=定义变量时,不能指定 var 关键字和数据类型</li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token comment">//var num int := 10 // 编译报错</span>

	<span class="token comment">//var num := 10 // 编译报错</span>

	num <span class="token builtin">int</span> <span class="token operator">:=</span> <span class="token number">10</span> <span class="token comment">// 编译报错</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;num = &quot;</span><span class="token punctuation">,</span> num<span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;num = &quot;</span><span class="token punctuation">,</span> num<span class="token punctuation">)</span>

<span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><ul><li>变量组中不能够使用:=</li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token keyword">var</span><span class="token punctuation">(</span>

		num <span class="token operator">:=</span> <span class="token number">10</span> <span class="token comment">// 编译报错</span>

	<span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;num = &quot;</span><span class="token punctuation">,</span> num<span class="token punctuation">)</span>

<span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><ul><li>通过:=同时定义多个变量, 必须给所有变量初始化</li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token comment">//num1, num2 := 666, 888 // 正确</span>

	num1<span class="token punctuation">,</span> num2 <span class="token operator">:=</span> <span class="token number">666</span> <span class="token comment">// 报错</span>

	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%d, %d\n&quot;</span><span class="token punctuation">,</span> num1<span class="token punctuation">,</span> num2<span class="token punctuation">)</span>

<span class="token punctuation">}</span>

</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><ul><li>通过:=同时定义多个变量, 只要任意一个变量没有定义过,都会做退化赋值操作</li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token comment">// 定义一个变量num1</span>

	num1 <span class="token operator">:=</span> <span class="token number">10</span>

	<span class="token comment">// 同时定义两个变量num1和num2, 由于num2从来没有定义过,</span>

	<span class="token comment">// 所以对于num1来说:=退化为赋值运算符, 而对于num2来说:=仍然是定义+赋值</span>

	num1<span class="token punctuation">,</span> num2 <span class="token operator">:=</span> <span class="token number">20</span><span class="token punctuation">,</span> <span class="token number">30</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;num1 = &quot;</span><span class="token punctuation">,</span> num1<span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;num2 = &quot;</span><span class="token punctuation">,</span> num2<span class="token punctuation">)</span>

<span class="token punctuation">}</span>

<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	num1 <span class="token operator">:=</span> <span class="token number">10</span>

	num2 <span class="token operator">:=</span> <span class="token number">20</span>

	<span class="token comment">// 报错, 因为num1,和num2都已经被定义过</span>

	<span class="token comment">// 至少要有任意一个变量没有被定义过,才会退化赋值</span>

	num1<span class="token punctuation">,</span> num2 <span class="token operator">:=</span> <span class="token number">30</span><span class="token punctuation">,</span> <span class="token number">40</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;num1 = &quot;</span><span class="token punctuation">,</span> num1<span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;num2 = &quot;</span><span class="token punctuation">,</span> num2<span class="token punctuation">)</span>

<span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><div class="warning custom-block"><p class="custom-block-title">提示</p><p>定义的局部变量或者导入的包没有被使用, 那么编译器会报错,无法编译运行,但是定义的全局变量没有被使用,编译器不会报错, 可以编译运行</p></div><hr><h2 id="局部变量和全局变量" tabindex="-1">局部变量和全局变量 <a class="header-anchor" href="#局部变量和全局变量" aria-hidden="true">#</a></h2><ul><li><p>和 C 语言一样,按照变量的作用域,我们可以把变量划分为局部变量和全局变量</p></li><li><p>Go 语言中局部变量的概念以及全局变量的概念和 C 语言一模一样</p></li><li><p>局部变量：</p><ul><li>定义在函数内部的变量以及函数的形参称为局部变量</li><li>作用域：从定义哪一行开始直到与其所在的代码块结束</li><li>生命周期:从程序运行到定义哪一行开始分配存储空间到程序离开该变量所在的作用域</li></ul></li><li><p>全局变量：</p><ul><li>定义在函数外面的变量称为全局变量</li><li>作用域范围：从定义哪行开始直到文件结尾</li><li>生命周期:程序一启动就会分配存储空间,直到程序结束</li></ul></li><li><p>和 C 语言不同的是, C 语言中可以定义相同名称的全局变量, 而 Go 语言中无论全局变量还是局部变量, 只要作用域相同都不能出现同名的变量</p></li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token comment">//var num1 int</span>

<span class="token comment">//var num1 int // 报错, 重复定义</span>

<span class="token keyword">var</span> num3 <span class="token builtin">int</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token comment">//var num2</span>

	<span class="token comment">//var num2 // 报错, 重复定义</span>

	<span class="token keyword">var</span> num3 <span class="token builtin">int</span> <span class="token comment">// 不报错, 因为作用域不同</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;num3 = &quot;</span><span class="token punctuation">,</span> num3<span class="token punctuation">)</span>

<span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><hr><ul><li>C 语言中全局变量没有赋值,那么默认初始值为 0, 局部变量没有赋值,那么默认初始值是随机值</li><li>Go 语言中无论是全局变量还是局部变量,只要定义了一个变量都有默认的 0 值</li><li>int/int8/int16/int32/int64/uint/uint8/uint16/uint32/uint64/byte/rune/uintptr的默认值是0</li><li>float32/float64的默认值是0.0</li><li>bool的默认值是false</li><li>string的默认值是&quot;&quot;</li><li>pointer/function/interface/slice/channel/map/error的默认值是nil</li><li>其它复合类型array/struct默认值是内部数据类型的默认值</li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token keyword">var</span> intV <span class="token builtin">int</span> <span class="token comment">// 整型变量</span>

	<span class="token keyword">var</span> floatV <span class="token builtin">float32</span> <span class="token comment">// 实型变量</span>

	<span class="token keyword">var</span> boolV <span class="token builtin">bool</span> <span class="token comment">// 布尔型变量</span>

	<span class="token keyword">var</span> stringV <span class="token builtin">string</span> <span class="token comment">// 字符串变量</span>

	<span class="token keyword">var</span> pointerV <span class="token operator">*</span><span class="token builtin">int</span> <span class="token comment">// 指针变量</span>

	<span class="token keyword">var</span> funcV <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token comment">// function变量</span>

	<span class="token keyword">var</span> interfaceV <span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span> <span class="token comment">// 接口变量</span>

	<span class="token keyword">var</span> sliceV <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span> <span class="token comment">// 切片变量</span>

	<span class="token keyword">var</span> channelV <span class="token keyword">chan</span> <span class="token builtin">int</span> <span class="token comment">// channel变量</span>

	<span class="token keyword">var</span> mapV <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span> <span class="token comment">// map变量</span>

	<span class="token keyword">var</span> errorV <span class="token builtin">error</span> <span class="token comment">// error变量</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;int = &quot;</span><span class="token punctuation">,</span> intV<span class="token punctuation">)</span> <span class="token comment">// 0</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;float = &quot;</span><span class="token punctuation">,</span> floatV<span class="token punctuation">)</span> <span class="token comment">// 0</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;bool = &quot;</span><span class="token punctuation">,</span> boolV<span class="token punctuation">)</span> <span class="token comment">// false</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;string = &quot;</span><span class="token punctuation">,</span> stringV<span class="token punctuation">)</span> <span class="token comment">// &quot;&quot;</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;pointer = &quot;</span><span class="token punctuation">,</span> pointerV<span class="token punctuation">)</span> <span class="token comment">// nil</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;func = &quot;</span><span class="token punctuation">,</span> funcV<span class="token punctuation">)</span> <span class="token comment">// nil</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;interface = &quot;</span><span class="token punctuation">,</span> interfaceV<span class="token punctuation">)</span> <span class="token comment">// nil</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;slice = &quot;</span><span class="token punctuation">,</span> sliceV<span class="token punctuation">)</span> <span class="token comment">// []</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;slice = &quot;</span><span class="token punctuation">,</span> sliceV <span class="token operator">==</span> <span class="token boolean">nil</span><span class="token punctuation">)</span> <span class="token comment">// true</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;channel = &quot;</span><span class="token punctuation">,</span> channelV<span class="token punctuation">)</span> <span class="token comment">// nil</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;map = &quot;</span><span class="token punctuation">,</span> mapV<span class="token punctuation">)</span> <span class="token comment">// map[]</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;map = &quot;</span><span class="token punctuation">,</span> mapV <span class="token operator">==</span> <span class="token boolean">nil</span><span class="token punctuation">)</span> <span class="token comment">// true</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;error = &quot;</span><span class="token punctuation">,</span> errorV<span class="token punctuation">)</span> <span class="token comment">// nil</span>

	<span class="token keyword">var</span> arraryV <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token builtin">int</span> <span class="token comment">// 数组变量</span>

	<span class="token keyword">type</span> Person <span class="token keyword">struct</span> <span class="token punctuation">{</span>
		name <span class="token builtin">string</span>

		age <span class="token builtin">int</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">var</span> structV Person <span class="token comment">// 结构体变量</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;arrary = &quot;</span><span class="token punctuation">,</span> arraryV<span class="token punctuation">)</span> <span class="token comment">// [0, 0, 0]</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;struct = &quot;</span><span class="token punctuation">,</span> structV<span class="token punctuation">)</span> <span class="token comment">// {&quot;&quot; 0}</span>

<span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><hr><h2 id="数据类型转换" tabindex="-1">数据类型转换 <a class="header-anchor" href="#数据类型转换" aria-hidden="true">#</a></h2><ul><li><p>C 语言中数据可以隐式转换或显示转换, 但是 Go 语言中数据<code>只能显示转换</code></p><ul><li>C 语言隐式转换</li></ul></li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-c"><pre><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>
<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token comment">// 隐式转换:自动将实型10.6转换为整型后保存</span>
  <span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token number">10.6</span><span class="token punctuation">;</span>
  <span class="token comment">// 自动类型提升: 运算时会自动将小类型转换为大类型后运算</span>
  <span class="token keyword">double</span> b <span class="token operator">=</span> <span class="token number">1.0</span> <span class="token operator">/</span> <span class="token number">2</span><span class="token punctuation">;</span> <span class="token comment">// 等价于1.0 / 2.0</span>
<span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><pre><code>- C 语言显示转换(强制转换)
</code></pre><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-c"><pre><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
  <span class="token comment">// 显示转换:强制将实型10.6转换为整型后保存</span>

  <span class="token keyword">int</span> a <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">int</span><span class="token punctuation">)</span><span class="token number">10.5</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><ul><li>Go 语言数值类型之间转换</li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token keyword">var</span> num0 <span class="token builtin">int</span> <span class="token operator">=</span> <span class="token number">10</span>

	<span class="token keyword">var</span> num1 <span class="token builtin">int8</span> <span class="token operator">=</span> <span class="token number">20</span>

	<span class="token keyword">var</span> num2 <span class="token builtin">int16</span>

	<span class="token comment">//num2 = num0 // 编译报错, 不同长度的int之间也需要显示转换</span>

	<span class="token comment">//num2 = num1 // 编译报错, 不同长度的int之间也需要显示转换</span>

	num2 <span class="token operator">=</span> <span class="token function">int16</span><span class="token punctuation">(</span>num0<span class="token punctuation">)</span>

	num2 <span class="token operator">=</span> <span class="token function">int16</span><span class="token punctuation">(</span>num1<span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>num2<span class="token punctuation">)</span>

	<span class="token keyword">var</span> num3 <span class="token builtin">float32</span> <span class="token operator">=</span> <span class="token number">3.14</span>

	<span class="token keyword">var</span> num4 <span class="token builtin">float64</span>

	<span class="token comment">//num4 = num3 // 编译报错, 不同长度的float之间也需要显示转换</span>

	num4 <span class="token operator">=</span> <span class="token function">float64</span><span class="token punctuation">(</span>num3<span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>num4<span class="token punctuation">)</span>

	<span class="token keyword">var</span> num5 <span class="token builtin">byte</span> <span class="token operator">=</span> <span class="token number">11</span>

	<span class="token keyword">var</span> num6 <span class="token builtin">uint8</span> <span class="token comment">// 这里不是隐式转换, 不报错的原因是byte的本质就是uint8</span>

	num6 <span class="token operator">=</span> num5

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>num6<span class="token punctuation">)</span>

	<span class="token keyword">var</span> num7 <span class="token builtin">rune</span> <span class="token operator">=</span> <span class="token number">11</span>

	<span class="token keyword">var</span> num8 <span class="token builtin">int32</span>

	num8 <span class="token operator">=</span> num7 <span class="token comment">// 这里不是隐式转换, 不报错的原因是byte的本质就是int32</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>num8<span class="token punctuation">)</span>

<span class="token punctuation">}</span>

</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><div class="warning custom-block"><p class="custom-block-title">注意</p><ul><li>格式: <code>数据类型(需要转换的数据)</code></li><li>注意点: 和 C 语言一样数据可以从大类型转换为小类型, 也可以从小类型转换为大类型. 但是大类型转换为小类型可能会丢失精度</li></ul></div><hr><h2 id="数值类型和字符串类型之间转换" tabindex="-1">数值类型和字符串类型之间转换 <a class="header-anchor" href="#数值类型和字符串类型之间转换" aria-hidden="true">#</a></h2><ul><li>Go 语言中不能通过 数据类型(变量)的格式将数值类型转换为字符串, 也不能通过 数据类型(变量)的格式将字符串转换为数值类型</li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><ul><li><strong>数值类型转字符串类型<code>strconv..FormatXxx()</code></strong></li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;fmt&quot;</span>
	<span class="token string">&quot;strconv&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token keyword">var</span> num1 <span class="token builtin">int32</span> <span class="token operator">=</span> <span class="token number">10</span>

	<span class="token comment">// 第一个参数: 需要被转换的整型,必须是int64类型</span>

	<span class="token comment">// 第二个参数: 转换为几进制,  必须在2到36之间</span>

	<span class="token comment">// 将32位十进制整型变量10转换为字符串,并继续保留10进制格式</span>

	str1 <span class="token operator">:=</span> strconv<span class="token punctuation">.</span><span class="token function">FormatInt</span><span class="token punctuation">(</span><span class="token function">int64</span><span class="token punctuation">(</span>num1<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>str1<span class="token punctuation">)</span> <span class="token comment">// 10</span>

	<span class="token comment">// 将32位十进制整型变量10转换为字符串,并转换为2进制格式</span>

	str2 <span class="token operator">:=</span> strconv<span class="token punctuation">.</span><span class="token function">FormatInt</span><span class="token punctuation">(</span><span class="token function">int64</span><span class="token punctuation">(</span>num1<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>str2<span class="token punctuation">)</span> <span class="token comment">// 1010</span>

	<span class="token keyword">var</span> num5 <span class="token builtin">float64</span> <span class="token operator">=</span> <span class="token number">3.1234567890123456789</span>

	<span class="token comment">// 第一个参数: 需要转换的实型, 必须是float64类型</span>

	<span class="token comment">// 第二个参数: 转换为什么格式,f小数格式, e指数格式</span>

	<span class="token comment">// 第三个参数: 转换之后保留多少位小数, 传入-1按照指定类型有效位保留</span>

	<span class="token comment">// 第四个参数: 被转换数据的实际位数,float32就传32, float64就传64</span>

	<span class="token comment">// 将float64位实型,按照小数格式并保留默认有效位转换为字符串</span>

	str3 <span class="token operator">:=</span> strconv<span class="token punctuation">.</span><span class="token function">FormatFloat</span><span class="token punctuation">(</span>num5<span class="token punctuation">,</span> <span class="token char">&#39;f&#39;</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">64</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>str3<span class="token punctuation">)</span> <span class="token comment">// 3.1234567</span>

	str4 <span class="token operator">:=</span> strconv<span class="token punctuation">.</span><span class="token function">FormatFloat</span><span class="token punctuation">(</span>num5<span class="token punctuation">,</span> <span class="token char">&#39;f&#39;</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">64</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>str4<span class="token punctuation">)</span> <span class="token comment">// 3.1234567890123457</span>

	<span class="token comment">// 将float64位实型,按照小数格式并保留2位有效位转换为字符串</span>

	str5 <span class="token operator">:=</span> strconv<span class="token punctuation">.</span><span class="token function">FormatFloat</span><span class="token punctuation">(</span>num5<span class="token punctuation">,</span> <span class="token char">&#39;f&#39;</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">64</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>str5<span class="token punctuation">)</span> <span class="token comment">// 3.12</span>

	<span class="token comment">// 将float64位实型,按照指数格式并保留2位有效位转换为字符串</span>

	str6 <span class="token operator">:=</span> strconv<span class="token punctuation">.</span><span class="token function">FormatFloat</span><span class="token punctuation">(</span>num5<span class="token punctuation">,</span> <span class="token char">&#39;e&#39;</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">64</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>str6<span class="token punctuation">)</span> <span class="token comment">// 3.12</span>

	<span class="token keyword">var</span> num6 <span class="token builtin">bool</span> <span class="token operator">=</span> <span class="token boolean">true</span>

	str7 <span class="token operator">:=</span> strconv<span class="token punctuation">.</span><span class="token function">FormatBool</span><span class="token punctuation">(</span>num6<span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>str7<span class="token punctuation">)</span> <span class="token comment">// true</span>

<span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token keyword">var</span> num1 <span class="token builtin">int32</span> <span class="token operator">=</span> <span class="token number">65</span>

	<span class="token comment">// 可以将整型强制转换, 但是会按照ASCII码表来转换</span>

	<span class="token comment">// 但是不推荐这样使用</span>

	<span class="token keyword">var</span> str1 <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token function">string</span><span class="token punctuation">(</span>num1<span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>str1<span class="token punctuation">)</span>

	<span class="token keyword">var</span> num2 <span class="token builtin">float32</span> <span class="token operator">=</span> <span class="token number">3.14</span>

	<span class="token comment">// 不能将其它基本类型强制转换为字符串类型</span>

	<span class="token keyword">var</span> str2 <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token function">string</span><span class="token punctuation">(</span>num2<span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>str2<span class="token punctuation">)</span>

	<span class="token keyword">var</span> str3 <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">&quot;97&quot;</span>

	<span class="token comment">// 不能强制转换, cannot convert str2 (type string) to type int</span>

	<span class="token keyword">var</span> num3 <span class="token builtin">int</span> <span class="token operator">=</span> <span class="token function">int</span><span class="token punctuation">(</span>str3<span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>num3<span class="token punctuation">)</span>

<span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><ul><li><strong>字符串类型转数值类型<code>strconv.ParseXxx()</code></strong></li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;fmt&quot;</span>
	<span class="token string">&quot;strconv&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token keyword">var</span> str1 <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">&quot;125&quot;</span>

	<span class="token comment">// 第一个参数: 需要转换的数据</span>

	<span class="token comment">// 第二个参数: 转换为几进制</span>

	<span class="token comment">// 第三个参数: 转换为多少位整型</span>

	<span class="token comment">// 注意点: ParseInt函数会返回两个值, 一个是转换后的结果, 一个是错误</span>

	<span class="token comment">// 如果被转换的数据转换之后没有超出指定的范围或者不能被转换时,</span>

	<span class="token comment">// 那么错误为nil, 否则错误不为nil</span>

	<span class="token comment">// 将字符串&quot;125&quot;转换为10进制的int8</span>

	num1<span class="token punctuation">,</span> err <span class="token operator">:=</span> strconv<span class="token punctuation">.</span><span class="token function">ParseInt</span><span class="token punctuation">(</span>str1<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span>

	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>

	<span class="token punctuation">}</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>num1<span class="token punctuation">)</span>

	<span class="token keyword">var</span> str2 <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">&quot;150&quot;</span>

	<span class="token comment">// 将字符串&quot;150&quot;转换为10进制的int8</span>

	<span class="token comment">// 由于int8的取值范围是-128~127, 所以转换之后超出了指定的范围, error不为nil</span>

	num2<span class="token punctuation">,</span> err <span class="token operator">:=</span> strconv<span class="token punctuation">.</span><span class="token function">ParseInt</span><span class="token punctuation">(</span>str2<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">8</span><span class="token punctuation">)</span>

	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>

	<span class="token punctuation">}</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>num2<span class="token punctuation">)</span>

	<span class="token keyword">var</span> str3 <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">&quot;3.1234567890123456789&quot;</span>

	<span class="token comment">// 第一个参数: 需要转换的数据</span>

	<span class="token comment">// 第二个参数: 转换为多少位小数, 32 or 64</span>

	<span class="token comment">// ParseFloat同样有两个返回值, 如果能够正常转换则错误为nil, 否则不为nil</span>

	num3<span class="token punctuation">,</span> err <span class="token operator">:=</span> strconv<span class="token punctuation">.</span><span class="token function">ParseFloat</span><span class="token punctuation">(</span>str3<span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">)</span>

	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>

		<span class="token comment">// 例如: 把字符串&quot;3.14abc&quot;转换为小数就会报错, 因为&quot;3.14abc&quot;不是一个小数</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>

	<span class="token punctuation">}</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>num3<span class="token punctuation">)</span>

	<span class="token keyword">var</span> str4 <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">&quot;true&quot;</span>

	<span class="token comment">// 第一个参数: 需要转换的数据</span>

	<span class="token comment">// ParseBool同样有两个返回值, 如果能够正常转换则错误为nil, 否则不为nil</span>

	num4<span class="token punctuation">,</span> <span class="token boolean">_</span> <span class="token operator">:=</span> strconv<span class="token punctuation">.</span><span class="token function">ParseBool</span><span class="token punctuation">(</span>str4<span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>num4<span class="token punctuation">)</span>

<span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><ul><li>字符串类型转换为数值类型时,如果不能转换除了返回 error 以外,还会返回对应类型的默认值</li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;fmt&quot;</span>
	<span class="token string">&quot;strconv&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token keyword">var</span> str1 <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">&quot;abc&quot;</span>

	num1<span class="token punctuation">,</span> <span class="token boolean">_</span> <span class="token operator">:=</span> strconv<span class="token punctuation">.</span><span class="token function">ParseInt</span><span class="token punctuation">(</span>str1<span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>num1<span class="token punctuation">)</span> <span class="token comment">// 0</span>

	num2<span class="token punctuation">,</span> <span class="token boolean">_</span> <span class="token operator">:=</span> strconv<span class="token punctuation">.</span><span class="token function">ParseFloat</span><span class="token punctuation">(</span>str1<span class="token punctuation">,</span> <span class="token number">32</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>num2<span class="token punctuation">)</span> <span class="token comment">// 0</span>

	num3<span class="token punctuation">,</span> <span class="token boolean">_</span> <span class="token operator">:=</span> strconv<span class="token punctuation">.</span><span class="token function">ParseBool</span><span class="token punctuation">(</span>str1<span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>num3<span class="token punctuation">)</span> <span class="token comment">// false</span>

<span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><ul><li>字符串类型和整型快速转换</li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;fmt&quot;</span>
	<span class="token string">&quot;strconv&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token keyword">var</span> num1 <span class="token builtin">int32</span> <span class="token operator">=</span> <span class="token number">110</span>

	<span class="token comment">// 快速将整型转换为字符串类型</span>

	<span class="token comment">// 注意:Itoa方法只能接受int类型</span>

	<span class="token keyword">var</span> str1 <span class="token builtin">string</span> <span class="token operator">=</span> strconv<span class="token punctuation">.</span><span class="token function">Itoa</span><span class="token punctuation">(</span><span class="token function">int</span><span class="token punctuation">(</span>num1<span class="token punctuation">)</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>str1<span class="token punctuation">)</span>

	<span class="token keyword">var</span> str2 <span class="token builtin">string</span> <span class="token operator">=</span> <span class="token string">&quot;666&quot;</span>

	<span class="token comment">// 快速将字符串类型转换为整型</span>

	<span class="token comment">// 注意: Atoi方法返回两个值, 一个值是int,一个值是error</span>

	<span class="token comment">// 如果字符串能被转换为int,那么error为nil, 否则不为nil</span>

	num2<span class="token punctuation">,</span> err <span class="token operator">:=</span> strconv<span class="token punctuation">.</span><span class="token function">Atoi</span><span class="token punctuation">(</span>str2<span class="token punctuation">)</span>

	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>

	<span class="token punctuation">}</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>num2<span class="token punctuation">)</span>

<span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><ul><li><strong>数值类型转字符串类型其它方式</strong></li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token keyword">var</span> num1 <span class="token builtin">int32</span> <span class="token operator">=</span> <span class="token number">110</span>

	<span class="token comment">// Sprintf函数和Printf函数很像, 只不过不是输出而将格式化的字符串返回给我们</span>

	<span class="token keyword">var</span> str1 <span class="token builtin">string</span> <span class="token operator">=</span> fmt<span class="token punctuation">.</span><span class="token function">Sprintf</span><span class="token punctuation">(</span><span class="token string">&quot;%d&quot;</span><span class="token punctuation">,</span> num1<span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>str1<span class="token punctuation">)</span>

	<span class="token keyword">var</span> num2 <span class="token builtin">float32</span> <span class="token operator">=</span> <span class="token number">3.14</span>

	<span class="token keyword">var</span> str2 <span class="token builtin">string</span> <span class="token operator">=</span> fmt<span class="token punctuation">.</span><span class="token function">Sprintf</span><span class="token punctuation">(</span><span class="token string">&quot;%f&quot;</span><span class="token punctuation">,</span> num2<span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>str2<span class="token punctuation">)</span>

	<span class="token keyword">var</span> num3 <span class="token builtin">bool</span> <span class="token operator">=</span> <span class="token boolean">true</span>

	<span class="token keyword">var</span> str3 <span class="token builtin">string</span> <span class="token operator">=</span> fmt<span class="token punctuation">.</span><span class="token function">Sprintf</span><span class="token punctuation">(</span><span class="token string">&quot;%t&quot;</span><span class="token punctuation">,</span> num3<span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>str3<span class="token punctuation">)</span>

<span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><hr><h2 id="go-语言常量" tabindex="-1">Go 语言常量 <a class="header-anchor" href="#go-语言常量" aria-hidden="true">#</a></h2><ul><li><p>和 C 语言一样 Go 语言中的常量也分为<code>整型常量</code>、<code>实型常量</code>、<code>字符常量</code>、<code>字符串常量</code>、<code>自定义常量</code></p><ul><li>自定义常量 (c 语言)</li></ul></li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-c"><pre><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>

nt <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span> argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token punctuation">{</span>

  <span class="token keyword">const</span> <span class="token keyword">float</span> PI <span class="token operator">=</span> <span class="token number">998</span><span class="token punctuation">;</span>

  PI <span class="token operator">=</span> <span class="token number">110</span><span class="token punctuation">;</span> <span class="token comment">// 报错</span>

  <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;PI = %d\n&quot;</span><span class="token punctuation">,</span> PI <span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><ul><li>自定义常量（go 语言）</li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token comment">//const PI float32 = 3.14</span>

	<span class="token comment">//PI = 110 // 报错</span>

	<span class="token comment">//fmt.Println(&quot;PI = &quot;, PI )</span>



	<span class="token keyword">const</span> PI <span class="token operator">=</span> <span class="token number">3.14</span>

	PI <span class="token operator">=</span> <span class="token number">110</span> <span class="token comment">// 报错</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;PI = &quot;</span><span class="token punctuation">,</span> PI <span class="token punctuation">)</span>

<span class="token punctuation">}</span>



<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token comment">// 多重赋值方式</span>

	<span class="token keyword">const</span> num1<span class="token punctuation">,</span> num2 <span class="token builtin">int</span>  <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">200</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;num1 = &quot;</span><span class="token punctuation">,</span> num1<span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;num2 = &quot;</span><span class="token punctuation">,</span> num2<span class="token punctuation">)</span>



	<span class="token comment">// 常量组方式</span>

	<span class="token keyword">const</span> <span class="token punctuation">(</span>

		num3 <span class="token operator">=</span> <span class="token number">100</span>

		num4 <span class="token operator">=</span> <span class="token number">200</span>

	<span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;num3 = &quot;</span><span class="token punctuation">,</span> num3<span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;num4 = &quot;</span><span class="token punctuation">,</span> num4<span class="token punctuation">)</span>



	<span class="token comment">// 常量组+多重赋值</span>

	<span class="token keyword">const</span> <span class="token punctuation">(</span>

		num5<span class="token punctuation">,</span> num6 <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">200</span>

		num7 <span class="token operator">=</span> <span class="token number">300</span>

	<span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;num5 = &quot;</span><span class="token punctuation">,</span> num5<span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;num6 = &quot;</span><span class="token punctuation">,</span> num6<span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;num7 = &quot;</span><span class="token punctuation">,</span> num7<span class="token punctuation">)</span>

<span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><div class="warning custom-block"><p class="custom-block-title">注意</p><ul><li>除此之外 Go 语言还支持<code>一次性定义多个常量</code></li><li>Go 语言自定义常量: <code>const 常量名称 数据类型 = 值</code>or  <code>const 常量名称 = 值</code></li><li>C 语言自定义常量: <code>const 数据类型 常量名称 = 值;</code></li></ul></div><hr><ul><li>Go 语言自定义常量注意点</li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token comment">// 可以编译运行</span>

	<span class="token keyword">const</span> PI <span class="token builtin">float32</span> <span class="token operator">=</span> <span class="token number">3.14</span>

<span class="token punctuation">}</span>



<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token keyword">const</span> <span class="token punctuation">(</span>

		num1 <span class="token operator">=</span> <span class="token number">998</span>

		num2 <span class="token comment">// 和上一行的值一样</span>

		num3 <span class="token operator">=</span> <span class="token number">666</span>

		num4 <span class="token comment">// 和上一行的值一样</span>

		num5 <span class="token comment">// 和上一行的值一样</span>

	<span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;num1 = &quot;</span><span class="token punctuation">,</span> num1<span class="token punctuation">)</span> <span class="token comment">// 998</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;num2 = &quot;</span><span class="token punctuation">,</span> num2<span class="token punctuation">)</span> <span class="token comment">// 998</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;num3 = &quot;</span><span class="token punctuation">,</span> num3<span class="token punctuation">)</span> <span class="token comment">// 666</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;num4 = &quot;</span><span class="token punctuation">,</span> num4<span class="token punctuation">)</span> <span class="token comment">// 666</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;num5 = &quot;</span><span class="token punctuation">,</span> num5<span class="token punctuation">)</span> <span class="token comment">// 666</span>



	<span class="token keyword">const</span> <span class="token punctuation">(</span>

		num1<span class="token punctuation">,</span> num2 <span class="token operator">=</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">200</span>

		num3<span class="token punctuation">,</span> num4  <span class="token comment">// 和上一行的值一样, 注意变量个数必须也和上一行一样</span>

	<span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;num1 = &quot;</span><span class="token punctuation">,</span> num1<span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;num2 = &quot;</span><span class="token punctuation">,</span> num2<span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;num3 = &quot;</span><span class="token punctuation">,</span> num3<span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;num4 = &quot;</span><span class="token punctuation">,</span> num4<span class="token punctuation">)</span>

<span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><div class="warning custom-block"><p class="custom-block-title">注意</p><ul><li>在常量组中, 如果上一行常量有初始值,但是下一行没有初始值, 那么下一行的值就是上一行的值</li><li>定义的局部变量或者导入的包没有被使用, 那么编译器会报错,无法编译运行</li><li>但是定义的常量没有被使用,编译器不会报错, 可以编译运行</li></ul></div><hr><ul><li>枚举常量 <ul><li>C语言中枚举类型的本质就是整型常量</li><li>Go 语言中没有 C 语言中明确意义上的 enum 定义, 但是可以借助 iota 标识符来实现枚举类型</li></ul></li><li>C 语言枚举格式:</li></ul><div class="language-c"><pre><code><span class="token keyword">enum</span> 枚举名 <span class="token punctuation">{</span>

  枚举元素<span class="token number">1</span><span class="token punctuation">,</span>
  枚举元素<span class="token number">2</span><span class="token punctuation">,</span>
  … …
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre></div><ul><li>C 语言枚举中,如果没有指定初始值,那么从 0 开始递增</li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-c"><pre><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span> argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token punctuation">{</span>

  <span class="token keyword">enum</span> <span class="token class-name">Gender</span><span class="token punctuation">{</span>

    male <span class="token operator">=</span> <span class="token number">5</span><span class="token punctuation">,</span>

    female<span class="token punctuation">,</span>

    yao<span class="token punctuation">,</span>

  <span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token comment">//  enum Gender g = male;</span>

  <span class="token comment">//  printf(&quot;%d\n&quot;, g); // 5</span>

  <span class="token comment">//  enum Gender g = female;</span>

  <span class="token comment">//  printf(&quot;%d\n&quot;, g); // 6</span>

  <span class="token keyword">enum</span> <span class="token class-name">Gender</span> g <span class="token operator">=</span> yao<span class="token punctuation">;</span>

  <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%d\n&quot;</span><span class="token punctuation">,</span> g<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 7</span>

  <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><div class="warning custom-block"><p class="custom-block-title">注意</p><p>C 语言枚举中, 如果指定了初始值,那么从指定的数开始递增</p></div><hr><ul><li>Go 语言实现枚举格式</li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">const</span><span class="token punctuation">(</span>

  枚举元素<span class="token number">1</span> <span class="token operator">=</span> <span class="token boolean">iota</span>

  枚举元素<span class="token number">2</span> <span class="token operator">=</span> <span class="token boolean">iota</span>

  <span class="token operator">...</span> <span class="token operator">...</span>

<span class="token punctuation">)</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><ul><li>利用 iota 标识符标识符实现从 0 开始递增的枚举</li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token keyword">const</span> <span class="token punctuation">(</span>
		male <span class="token operator">=</span> <span class="token boolean">iota</span>

		female <span class="token operator">=</span> <span class="token boolean">iota</span>

		yao <span class="token operator">=</span> <span class="token boolean">iota</span>
	<span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;male = &quot;</span><span class="token punctuation">,</span> male<span class="token punctuation">)</span> <span class="token comment">// 0</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;male = &quot;</span><span class="token punctuation">,</span> female<span class="token punctuation">)</span> <span class="token comment">// 1</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;male = &quot;</span><span class="token punctuation">,</span> yao<span class="token punctuation">)</span> <span class="token comment">// 2</span>

<span class="token punctuation">}</span>

</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><ul><li>iota 注意点:</li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token keyword">const</span> <span class="token punctuation">(</span>

		male <span class="token operator">=</span> <span class="token boolean">iota</span> <span class="token comment">// 这里出现了iota</span>

		female <span class="token comment">// 这里会自动递增</span>

		yao

	<span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;male = &quot;</span><span class="token punctuation">,</span> male<span class="token punctuation">)</span> <span class="token comment">// 0</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;male = &quot;</span><span class="token punctuation">,</span> female<span class="token punctuation">)</span> <span class="token comment">// 1</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;male = &quot;</span><span class="token punctuation">,</span> yao<span class="token punctuation">)</span> <span class="token comment">// 2</span>

<span class="token punctuation">}</span>



<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token keyword">const</span> <span class="token punctuation">(</span>

		male <span class="token operator">=</span> <span class="token boolean">iota</span>

		female <span class="token operator">=</span> <span class="token number">666</span> <span class="token comment">// 这里被中断, 如果没有显示恢复, 那么下面没有赋值的常量都和上一行一样</span>

		yao

	<span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;male = &quot;</span><span class="token punctuation">,</span> male<span class="token punctuation">)</span> <span class="token comment">// 0</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;male = &quot;</span><span class="token punctuation">,</span> female<span class="token punctuation">)</span> <span class="token comment">// 666</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;male = &quot;</span><span class="token punctuation">,</span> yao<span class="token punctuation">)</span> <span class="token comment">// 666</span>

<span class="token punctuation">}</span>



<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token keyword">const</span> <span class="token punctuation">(</span>

		male <span class="token operator">=</span> <span class="token boolean">iota</span>

		female <span class="token operator">=</span> <span class="token number">666</span> <span class="token comment">// 这里被中断</span>

		yao <span class="token operator">=</span> <span class="token boolean">iota</span> <span class="token comment">// 这里显示恢复, 会从当前常量组第一次出现iota的地方开始,每一行递增1, 当前是第3行,所以值就是2</span>

	<span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;male = &quot;</span><span class="token punctuation">,</span> male<span class="token punctuation">)</span> <span class="token comment">// 0</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;male = &quot;</span><span class="token punctuation">,</span> female<span class="token punctuation">)</span> <span class="token comment">// 666</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;male = &quot;</span><span class="token punctuation">,</span> yao<span class="token punctuation">)</span> <span class="token comment">// 2</span>

<span class="token punctuation">}</span>



<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token keyword">const</span> <span class="token punctuation">(</span>

		a<span class="token punctuation">,</span> b <span class="token operator">=</span> <span class="token boolean">iota</span><span class="token punctuation">,</span> <span class="token boolean">iota</span>

		c<span class="token punctuation">,</span> d <span class="token operator">=</span> <span class="token boolean">iota</span><span class="token punctuation">,</span> <span class="token boolean">iota</span>

	<span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;a = &quot;</span><span class="token punctuation">,</span> a<span class="token punctuation">)</span> <span class="token comment">// 0</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;b = &quot;</span><span class="token punctuation">,</span> b<span class="token punctuation">)</span> <span class="token comment">// 0</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;c = &quot;</span><span class="token punctuation">,</span> c<span class="token punctuation">)</span> <span class="token comment">// 1</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;d = &quot;</span><span class="token punctuation">,</span> d<span class="token punctuation">)</span> <span class="token comment">// 1</span>

<span class="token punctuation">}</span>



<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token keyword">const</span> <span class="token punctuation">(</span>

		male <span class="token builtin">float32</span> <span class="token operator">=</span> <span class="token boolean">iota</span> <span class="token comment">// 显示指定类型,后续自增都会按照指定类型自增</span>

		female

		yao

	<span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%f\n&quot;</span><span class="token punctuation">,</span> male<span class="token punctuation">)</span> <span class="token comment">// 0.0</span>

	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%f\n&quot;</span><span class="token punctuation">,</span> female<span class="token punctuation">)</span> <span class="token comment">// 1.0</span>

	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%f\n&quot;</span><span class="token punctuation">,</span> yao<span class="token punctuation">)</span> <span class="token comment">// 2.0</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;male = &quot;</span><span class="token punctuation">,</span> reflect<span class="token punctuation">.</span><span class="token function">TypeOf</span><span class="token punctuation">(</span>female<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// float32</span>

<span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><div class="warning custom-block"><p class="custom-block-title">注意</p><ul><li>iota 自增默认数据类型为 int 类型, 也可以显示指定类型</li><li>iota 也支持常量组+多重赋值, 在同一行的 iota 值相同</li><li>在同一个常量组中,如果 iota 被中断, 那么必须显示恢复</li><li>在同一个常量组中,iota 从 0 开始递增, <code>每一行递增1</code></li><li>在同一个常量组中,只要上一行出现了 iota,那么后续行就会自动递增</li></ul></div><blockquote><p><code>Go</code> 语言 <code>fmt</code> 包实现了类似 <code>C</code> 语言 <code>printf</code> 和 <code>scanf</code> 的格式化 <code>I/O</code> , 格式化动作源自 <code>C</code> 语言但更简单 ##输出函数</p></blockquote><ul><li>func Printf(format string, a ...interface{}) (n int, err error)</li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	name <span class="token operator">:=</span> <span class="token string">&quot;微信搜索：代码情缘&quot;</span>

	age <span class="token operator">:=</span> <span class="token number">33</span>

	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;name = %s, age = %d\n&quot;</span><span class="token punctuation">,</span> name<span class="token punctuation">,</span> age<span class="token punctuation">)</span> <span class="token comment">// name = lnj, age = 33</span>

<span class="token punctuation">}</span>



<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	num <span class="token operator">:=</span> <span class="token number">15</span>

	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;十进制 = %d\n&quot;</span><span class="token punctuation">,</span> num<span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;八进制 = %o\n&quot;</span><span class="token punctuation">,</span> num<span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;十六进制 = %x\n&quot;</span><span class="token punctuation">,</span> num<span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;二进制 = %b\n&quot;</span><span class="token punctuation">,</span> num<span class="token punctuation">)</span>

<span class="token punctuation">}</span>



<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token keyword">type</span> Person <span class="token keyword">struct</span> <span class="token punctuation">{</span>

		name <span class="token builtin">string</span>

		age <span class="token builtin">int</span>

	<span class="token punctuation">}</span>

	num1 <span class="token operator">:=</span> <span class="token number">10</span>

	num2 <span class="token operator">:=</span> <span class="token number">3.14</span>

	per <span class="token operator">:=</span> Person<span class="token punctuation">{</span><span class="token string">&quot;lnj&quot;</span><span class="token punctuation">,</span> <span class="token number">33</span><span class="token punctuation">}</span>

	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;num1 = %T\n&quot;</span><span class="token punctuation">,</span> num1<span class="token punctuation">)</span> <span class="token comment">// int</span>

	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;num2 = %T\n&quot;</span><span class="token punctuation">,</span> num2<span class="token punctuation">)</span> <span class="token comment">// float64</span>

	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;per = %T\n&quot;</span><span class="token punctuation">,</span> per<span class="token punctuation">)</span> <span class="token comment">// main.Person</span>

<span class="token punctuation">}</span>



<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token keyword">type</span> Person <span class="token keyword">struct</span> <span class="token punctuation">{</span>

		name <span class="token builtin">string</span>

		age <span class="token builtin">int</span>

	<span class="token punctuation">}</span>

	num1 <span class="token operator">:=</span> <span class="token number">10</span>

	num2 <span class="token operator">:=</span> <span class="token number">3.14</span>

	per <span class="token operator">:=</span> Person<span class="token punctuation">{</span><span class="token string">&quot;lnj&quot;</span><span class="token punctuation">,</span> <span class="token number">33</span><span class="token punctuation">}</span>

	<span class="token comment">// 此时相当于把%v当做%d</span>

	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;num1 = %v\n&quot;</span><span class="token punctuation">,</span> num1<span class="token punctuation">)</span> <span class="token comment">// 10</span>

	<span class="token comment">// 此时相当于把%v当做%f</span>

	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;num2 = %v\n&quot;</span><span class="token punctuation">,</span> num2<span class="token punctuation">)</span> <span class="token comment">// 3.14</span>

<span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><div class="warning custom-block"><p class="custom-block-title">注意</p><ul><li>Go 语言 Printf 函数其它特性,如宽度、标志、精度、长度、转移符号等,和 C 语言一样.</li><li>Go 语言中输出某一个值,很少使用%d%f 等, 一般都使用%v 即可</li><li>输出复合类型时会自动生成对应格式后再输出</li><li>除此之外,Go 语言还增加了%v 控制符,用于打印所有类型数据</li><li>除此之外,Go 语言还增加了%T 控制符, 用于输出值的类型</li><li>值得注意的是,输出十进制只能通过%d,不能像 C 语言一样通过%i</li><li>除了和 C 语言一样,可以通过%o、%x 输出八进制和十六进制外,<code>还可以</code>直接通过%b 输出二进制</li><li>和 C 语言用法几乎一模一样, 只不过新增了一些格式化符号</li></ul></div><hr><ul><li>func Println(a ...interface{}) (n int, err error)</li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	num1 <span class="token operator">:=</span> <span class="token number">10</span>

	num2 <span class="token operator">:=</span> <span class="token number">3.14</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>num1<span class="token punctuation">,</span> num2<span class="token punctuation">)</span> <span class="token comment">// 10 3.14</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;num1 =&quot;</span><span class="token punctuation">,</span> num1<span class="token punctuation">,</span> <span class="token string">&quot;num2 =&quot;</span><span class="token punctuation">,</span> num2<span class="token punctuation">)</span> <span class="token comment">// num1 = 10 num2 = 3.14</span>

	<span class="token keyword">type</span> Person <span class="token keyword">struct</span> <span class="token punctuation">{</span>
		name <span class="token builtin">string</span>

		age <span class="token builtin">int</span>
	<span class="token punctuation">}</span>

	per <span class="token operator">:=</span> Person<span class="token punctuation">{</span><span class="token string">&quot;lnj&quot;</span><span class="token punctuation">,</span> <span class="token number">33</span><span class="token punctuation">}</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>per<span class="token punctuation">)</span> <span class="token comment">// {lnj 33}</span>

<span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><div class="warning custom-block"><p class="custom-block-title">注意</p><ul><li>输出之后<code>会</code>在结尾处添加换行</li><li>传入多个参数时, 会自动在相邻参数之间添加空格</li><li>传入符合类型数据时, 会自动生成对应格式后再输出</li><li>采用默认格式将其参数格式化并写入标准输出,</li></ul></div><hr><ul><li>func Print(a ...interface{}) (n int, err error)</li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	num1 <span class="token operator">:=</span> <span class="token number">10</span>

	num2 <span class="token operator">:=</span> <span class="token number">3.14</span>

	fmt<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span>num1<span class="token punctuation">,</span> num2<span class="token punctuation">)</span> <span class="token comment">// 10 3.14</span>

	fmt<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token string">&quot;num1 =&quot;</span><span class="token punctuation">,</span> num1<span class="token punctuation">,</span> <span class="token string">&quot;num2 =&quot;</span><span class="token punctuation">,</span> num2<span class="token punctuation">)</span> <span class="token comment">// num1 =10 num2 =3.14</span>

	<span class="token keyword">type</span> Person <span class="token keyword">struct</span> <span class="token punctuation">{</span>
		name <span class="token builtin">string</span>

		age <span class="token builtin">int</span>
	<span class="token punctuation">}</span>

	per <span class="token operator">:=</span> Person<span class="token punctuation">{</span><span class="token string">&quot;lnj&quot;</span><span class="token punctuation">,</span> <span class="token number">33</span><span class="token punctuation">}</span>

	fmt<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span>per<span class="token punctuation">)</span> <span class="token comment">// {lnj 33}</span>

<span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><div class="warning custom-block"><p class="custom-block-title">注意</p><ul><li>输出之后<code>不会</code>在结尾处添加换行</li><li>传入多个参数时, 只有两个相邻的参数<code>都不是</code>字符串,才会在相邻参数之间添加空格</li><li>传入符合类型数据时, 会自动生成对应格式后再输出</li><li>和 Println 几乎一样</li></ul></div><hr><ul><li>以下三个函数和 Printf/Println/Print 函数一样, 只不过上面三个函数是输出到标准输出, 而下面三个函数可以通过 w 指定输出到什么地方 <ul><li><code>func Fprintf(w io.Writer, format string, a ...interface{}) (n int, err error)</code></li><li><code>func Fprintln(w io.Writer, a ...interface{}) (n int, err error)</code></li><li><code>func Fprint(w io.Writer, a ...interface{}) (n int, err error)</code></li></ul></li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;fmt&quot;</span>

	<span class="token string">&quot;net/http&quot;</span>

	<span class="token string">&quot;os&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token comment">// os.Stdout 写入到标准输出</span>

	name <span class="token operator">:=</span> <span class="token string">&quot;lnj&quot;</span>

	age <span class="token operator">:=</span> <span class="token number">33</span>

	<span class="token comment">// 第一个参数: 指定输出到什么地方</span>

	<span class="token comment">// 第二个参数: 指定格式控制字符串</span>

	<span class="token comment">// 第三个参数: 指定要输出的数据</span>

	fmt<span class="token punctuation">.</span><span class="token function">Fprintf</span><span class="token punctuation">(</span>os<span class="token punctuation">.</span>Stdout<span class="token punctuation">,</span> <span class="token string">&quot;name = %s, age = %d\n&quot;</span><span class="token punctuation">,</span> name<span class="token punctuation">,</span> age<span class="token punctuation">)</span>

	<span class="token comment">// http.ResponseWriter 写入到网络响应</span>

	http<span class="token punctuation">.</span><span class="token function">HandleFunc</span><span class="token punctuation">(</span><span class="token string">&quot;/&quot;</span><span class="token punctuation">,</span> <span class="token keyword">func</span><span class="token punctuation">(</span>writer http<span class="token punctuation">.</span>ResponseWriter<span class="token punctuation">,</span> request <span class="token operator">*</span>http<span class="token punctuation">.</span>Request<span class="token punctuation">)</span> <span class="token punctuation">{</span>

		fmt<span class="token punctuation">.</span><span class="token function">Fprintf</span><span class="token punctuation">(</span>writer<span class="token punctuation">,</span> <span class="token string">&quot;name = %s, age = %d\n&quot;</span><span class="token punctuation">,</span> name<span class="token punctuation">,</span> age<span class="token punctuation">)</span>

	<span class="token punctuation">}</span><span class="token punctuation">)</span>

	http<span class="token punctuation">.</span><span class="token function">ListenAndServe</span><span class="token punctuation">(</span><span class="token string">&quot;:8888&quot;</span><span class="token punctuation">,</span> <span class="token boolean">nil</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><hr><ul><li>以下三个函数和 Printf/Println/Print 函数一样, 只不过上面三个函数是输出到标准输出, 而下面三个函数不会输出,而是将字符串返回给我们 <ul><li><code>func Sprintf(format string, a ...interface{}) string</code></li><li><code>func Sprint(a ...interface{}) string</code></li><li><code>func Sprintln(a ...interface{}) string</code></li></ul></li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;fmt&quot;</span>

	<span class="token string">&quot;net/http&quot;</span>

	<span class="token string">&quot;os&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	name <span class="token operator">:=</span> <span class="token string">&quot;lnj&quot;</span>

	age <span class="token operator">:=</span> <span class="token number">33</span>

	<span class="token comment">// 按照指定的格式生成字符串</span>

	str <span class="token operator">:=</span> fmt<span class="token punctuation">.</span><span class="token function">Sprintf</span><span class="token punctuation">(</span><span class="token string">&quot;name = %s, age = %d\n&quot;</span><span class="token punctuation">,</span> name<span class="token punctuation">,</span> age<span class="token punctuation">)</span>

	<span class="token comment">// 输出生成的字符串</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span>

<span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><hr><h2 id="输入函数" tabindex="-1">输入函数 <a class="header-anchor" href="#输入函数" aria-hidden="true">#</a></h2><ul><li>func Scanf(format string, a ...interface{}) (n int, err error)</li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token keyword">var</span> num1 <span class="token builtin">int</span>

	<span class="token keyword">var</span> num2 <span class="token builtin">int</span>

	fmt<span class="token punctuation">.</span><span class="token function">Scanf</span><span class="token punctuation">(</span><span class="token string">&quot;%d%d&quot;</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>num1<span class="token punctuation">,</span> <span class="token operator">&amp;</span>num2<span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>num1<span class="token punctuation">,</span> num2<span class="token punctuation">)</span>

<span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><blockquote><p>和 C 语言用法几乎一模一样, 但是只能输入一行数据</p></blockquote><ul><li>func Scan(a ...interface{}) (n int, err error)</li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token keyword">var</span> num1 <span class="token builtin">int</span>

	<span class="token keyword">var</span> num2 <span class="token builtin">int</span>

	fmt<span class="token punctuation">.</span><span class="token function">Scan</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>num1<span class="token punctuation">,</span> <span class="token operator">&amp;</span>num2<span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>num1<span class="token punctuation">,</span> num2<span class="token punctuation">)</span>

	<span class="token keyword">var</span> num3 <span class="token builtin">float32</span>

	<span class="token keyword">var</span> num4 <span class="token builtin">float32</span>

	fmt<span class="token punctuation">.</span><span class="token function">Scan</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>num3<span class="token punctuation">,</span> <span class="token operator">&amp;</span>num4<span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>num3<span class="token punctuation">,</span> num4<span class="token punctuation">)</span>

<span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><blockquote><p>和 C 语言 scanf 函数几乎一样, 只不过不用指定格式化字符串, 并且只能输入一行数据</p></blockquote><ul><li>func Scanln(a ...interface{}) (n int, err error)</li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token keyword">var</span> num1 <span class="token builtin">int</span>

	<span class="token keyword">var</span> num2 <span class="token builtin">int</span>

	fmt<span class="token punctuation">.</span><span class="token function">Scanln</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>num1<span class="token punctuation">,</span> <span class="token operator">&amp;</span>num2<span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>num1<span class="token punctuation">,</span> num2<span class="token punctuation">)</span>

<span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><hr><ul><li>以下三个函数和 Scan/Scanln/Scanf 函数一样, 只不过上面三个函数是从标准输入读取数据, 而下面三个函数可以通过 r 指定从哪读取数据 <ul><li><code>func Fscanf(r io.Reader, format string, a ...interface{}) (n int, err error)</code></li><li><code>func Fscanln(r io.Reader, a ...interface{}) (n int, err error)</code></li><li><code>func Fscan(r io.Reader, a ...interface{}) (n int, err error)</code></li></ul></li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;fmt&quot;</span>
	<span class="token string">&quot;os&quot;</span>
	<span class="token string">&quot;strings&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token keyword">var</span> num1 <span class="token builtin">int</span>

	<span class="token keyword">var</span> num2 <span class="token builtin">int</span>

	<span class="token comment">// 第一个参数: 指定从哪读取数据</span>

	<span class="token comment">// 第二个参数: 指定格式控制字符串</span>

	<span class="token comment">// 第三个参数: 指定要输出的数据</span>

	fmt<span class="token punctuation">.</span><span class="token function">Fscanf</span><span class="token punctuation">(</span>os<span class="token punctuation">.</span>Stdin<span class="token punctuation">,</span> <span class="token string">&quot;%d%d&quot;</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>num1<span class="token punctuation">,</span> <span class="token operator">&amp;</span>num2<span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>num1<span class="token punctuation">,</span> num2<span class="token punctuation">)</span>

	s <span class="token operator">:=</span> strings<span class="token punctuation">.</span><span class="token function">NewReader</span><span class="token punctuation">(</span><span class="token string">&quot;lnj 33&quot;</span><span class="token punctuation">)</span>

	<span class="token keyword">var</span> name <span class="token builtin">string</span>

	<span class="token keyword">var</span> age <span class="token builtin">int</span>

	<span class="token comment">// 从指定字符串中扫描出想要的数据</span>

	<span class="token comment">// 注意:</span>

	fmt<span class="token punctuation">.</span><span class="token function">Fscanf</span><span class="token punctuation">(</span>s<span class="token punctuation">,</span> <span class="token string">&quot;%s%d&quot;</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>name<span class="token punctuation">,</span> <span class="token operator">&amp;</span>age<span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;name =&quot;</span><span class="token punctuation">,</span> name<span class="token punctuation">,</span> <span class="token string">&quot;age =&quot;</span><span class="token punctuation">,</span> age<span class="token punctuation">)</span>

<span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><ul><li>以下三个函数和 Scan/Scanln/Scanf 函数一样, 只不过上面三个函数是从标准输入读取数据, 而下面三个函数是从字符串中读取数据 <ul><li><code>func Sscan(str string, a ...interface{}) (n int, err error)</code></li><li><code>func Sscanf(str string, format string, a ...interface{}) (n int, err error)</code></li><li><code>func Sscanln(str string, a ...interface{}) (n int, err error)</code></li></ul></li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	str <span class="token operator">:=</span> <span class="token string">&quot;lnj 33&quot;</span>

	<span class="token keyword">var</span> name <span class="token builtin">string</span>

	<span class="token keyword">var</span> age <span class="token builtin">int</span>

	<span class="token comment">//fmt.Sscanf(str, &quot;%s %d&quot;,&amp;name, &amp;age)</span>

	<span class="token comment">//fmt.Sscanln(str,&amp;name, &amp;age)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Sscan</span><span class="token punctuation">(</span>str<span class="token punctuation">,</span> <span class="token operator">&amp;</span>name<span class="token punctuation">,</span> <span class="token operator">&amp;</span>age<span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;name =&quot;</span><span class="token punctuation">,</span> name<span class="token punctuation">,</span> <span class="token string">&quot;age =&quot;</span><span class="token punctuation">,</span> age<span class="token punctuation">)</span>

<span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><h2 id="go-命令行操作指令" tabindex="-1">go 命令行操作指令 <a class="header-anchor" href="#go-命令行操作指令" aria-hidden="true">#</a></h2><ul><li>标准 go 语言项目文件目录格式 <ul><li>main文件夹是专门用于存储package main包相关源码文件的</li><li>其它文件夹是专门用于存储除 package main 包以外源码文件的</li><li>项目文件夹就是 GOPATH 指向的文件夹</li><li>src 文件夹是专门用于存放源码文件的</li><li>bin 文件夹是专门用于存储编译之后的可执行程序的</li><li>pag 文件夹是专门用于存储编译之后的.a 文件的</li></ul></li></ul><blockquote><p>|---项目文件夹 -----------|--------src 文件夹 -----------------------------|--------main 文件夹 -----------------------------|--------其它文件夹 -----------|--------bin 文件夹 -----------|--------pkg 文件夹</p></blockquote><hr><ul><li><code>go version</code> 查看当前安装的 go 版本</li><li><code>go env</code> 查看当前 go 的环境变量</li><li><code>go fmt</code> 格式化代码 <ul><li>会将指定文件中凌乱的代码按照 go 语言规范格式化</li></ul></li><li><code>go run 命令文件</code> 编译并运行 go 程序 <ul><li>package main 包中包含 main 函数的文件, 我们称之为命令文件</li><li>其它包中的文件, 我们称之为源码文件</li></ul></li><li><code>go build</code> 编译检查 <ul><li>对于非命令文件只会执行编译检查, 不会产生任何文件</li><li>对于命令文件除了编译检查外,还会在当前目录下生成一个可执行文件</li><li>对应只想编译某个文件, 可以在命令后面指定文件名称<code>go build 文件名称</code></li></ul></li><li><code>go install</code> 安装程序 <ul><li>对于非命令文件会执行编译检查, 并生成.a 结尾的包, 放到 $GOPATH/pkg 目录中</li><li>对于命令文件会执行编译检查, 并生成可执行程序, 放到$GOPATH/bin 目录中</li></ul></li></ul><hr><h2 id="通过-os-包获取命令行参数" tabindex="-1">通过 os 包获取命令行参数 <a class="header-anchor" href="#通过-os-包获取命令行参数" aria-hidden="true">#</a></h2><ul><li>C 语言中的命令行参数 <ul><li>argc: argv 中保存数据的个数</li><li>argv: 默认情况下系统只会传入一个值, 这个值就是 main 函数执行文件的路径</li><li>我们可以通过配置开发工具,或者命令行运行时以<code>空格+参数</code>形式传递其它参数</li><li>注意点: 无论外界传入的是什么类型, 我们拿到的都是<code>字符串类型</code></li></ul></li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-c"><pre><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token keyword">int</span> argc<span class="token punctuation">,</span> <span class="token keyword">const</span> <span class="token keyword">char</span> <span class="token operator">*</span> argv<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token punctuation">{</span>

  <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">int</span> i <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> argc<span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;argv[%d] = %s\n&quot;</span><span class="token punctuation">,</span> i<span class="token punctuation">,</span> argv<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token punctuation">}</span>

  <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><ul><li>Go 语言中的命令行参数</li><li>Go 语言中 main 函数没有形参, 所以不能直接通过 main 函数获取命令行参数</li><li>想要获取命令行参数必须导入 os 包, 通过 os 包的 Args 获取</li><li>注意点: 无论外界传入的是什么类型, 我们拿到的都是<code>字符串类型</code></li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;fmt&quot;</span>

	<span class="token string">&quot;os&quot;</span> <span class="token comment">// 用于获取命令行参数的包</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token comment">// 1.获取传入参数个数</span>

	num <span class="token operator">:=</span> <span class="token function">len</span><span class="token punctuation">(</span>os<span class="token punctuation">.</span>Args<span class="token punctuation">)</span>

	<span class="token comment">// 2.打印所有获取到的参数</span>

	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> num<span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>os<span class="token punctuation">.</span>Args<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>

	<span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><hr><h2 id="通过-flag-包获取命令行参数" tabindex="-1">通过 flag 包获取命令行参数 <a class="header-anchor" href="#通过-flag-包获取命令行参数" aria-hidden="true">#</a></h2><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>Go 语言中除了可以通过 os 包获取命令行参数以外,还可以通过 flag 包获取命令行参数</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;flag&quot;</span>

	<span class="token string">&quot;fmt&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token comment">/*

	      flag.Xxxx(name, value, usage)

	   第一个参数: 命令行参数名称

	   第二个参数: 命令行参数对应的默认值

	   第三个参数: 命令行参数对应的说明

	*/</span>

	<span class="token comment">// 1.设置命令行参数</span>

	name <span class="token operator">:=</span> flag<span class="token punctuation">.</span><span class="token function">String</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;lnj&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;请输入人的姓名&quot;</span><span class="token punctuation">)</span>

	age <span class="token operator">:=</span> flag<span class="token punctuation">.</span><span class="token function">Int</span><span class="token punctuation">(</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">,</span> <span class="token number">33</span><span class="token punctuation">,</span> <span class="token string">&quot;请输入人的年龄&quot;</span><span class="token punctuation">)</span>

	<span class="token comment">// 2.将命令行参数解析到注册的参数</span>

	flag<span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	<span class="token comment">// 3.使用命令行参数</span>

	<span class="token comment">// 注意flag对应方法返回的都是指针类型, 所以使用时必须通过指针访问</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;name = &quot;</span><span class="token punctuation">,</span> <span class="token operator">*</span>name<span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;age = &quot;</span><span class="token punctuation">,</span> <span class="token operator">*</span>age<span class="token punctuation">)</span>

<span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>flag 获取命令行参数第二种写法</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>

	<span class="token string">&quot;flag&quot;</span>

	<span class="token string">&quot;fmt&quot;</span>

<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token comment">/*

	   flag.Xxxx(*type, name, value, usage)

	   第一个参数:保存命令行参数变量地址

	   第二个参数: 命令行参数名称

	   第三个参数: 命令行参数对应的默认值

	   第四个参数: 命令行参数对应的说明

	*/</span>

	<span class="token comment">// 1.定义变量,保存命令行参数的值</span>

	<span class="token keyword">var</span> name <span class="token builtin">string</span>

	<span class="token keyword">var</span> age <span class="token builtin">int</span>

	<span class="token comment">// 2.设置命令行参数</span>

	flag<span class="token punctuation">.</span><span class="token function">StringVar</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>name<span class="token punctuation">,</span> <span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;lnj&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;请输入人的姓名&quot;</span><span class="token punctuation">)</span>

	flag<span class="token punctuation">.</span><span class="token function">IntVar</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>age<span class="token punctuation">,</span> <span class="token string">&quot;age&quot;</span><span class="token punctuation">,</span> <span class="token number">33</span><span class="token punctuation">,</span><span class="token string">&quot;请输入人的姓名&quot;</span><span class="token punctuation">)</span>

	<span class="token comment">// 3.注册解析命令行参数</span>

	flag<span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	<span class="token comment">// 4.使用命令行参数</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;name = &quot;</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;age = &quot;</span><span class="token punctuation">,</span> age<span class="token punctuation">)</span>

<span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><hr><h2 id="os-包和-flag-包获取命令行参数对比" tabindex="-1">os 包和 flag 包获取命令行参数对比 <a class="header-anchor" href="#os-包和-flag-包获取命令行参数对比" aria-hidden="true">#</a></h2><ul><li>通过 os 包获取命令行参数 <ul><li>如果用户没有传递参数<code>会</code>报错</li><li><code>需要</code>严格按照代码中的顺序传递参数, 否则<code>会</code>造成数据混乱</li><li><code>不能</code>指定参数的名称</li><li>获取到的数据都是<code>字符串</code>类型</li></ul></li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-c"><pre><code>package main

<span class="token function">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;os&quot;</span>

	<span class="token string">&quot;fmt&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	name <span class="token operator">:</span><span class="token operator">=</span> os<span class="token punctuation">.</span>Args<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>

	age <span class="token operator">:</span><span class="token operator">=</span> os<span class="token punctuation">.</span>Args<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;name = &quot;</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;age = &quot;</span><span class="token punctuation">,</span> age<span class="token punctuation">)</span>

<span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><ul><li><p>通过 flag 包获取命令行参数</p><ul><li>如果用户没有传递参数<code>不会</code>报错</li><li><code>不需要</code>严格按照代码中的顺序传递参数, <code>不会</code>造成数据混乱</li><li><code>可以</code>指定参数的名称</li><li>获取到的数据是我们自己指定的类型</li></ul></li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-c"><pre><code>package main

<span class="token function">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;flag&quot;</span>

	<span class="token string">&quot;fmt&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	name <span class="token operator">:</span><span class="token operator">=</span> flag<span class="token punctuation">.</span><span class="token function">String</span><span class="token punctuation">(</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;lnj&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;请输入人的姓名&quot;</span><span class="token punctuation">)</span>

	age <span class="token operator">:</span><span class="token operator">=</span> flag<span class="token punctuation">.</span><span class="token function">Int</span><span class="token punctuation">(</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">,</span> <span class="token number">33</span><span class="token punctuation">,</span> <span class="token string">&quot;请输入人的年龄&quot;</span><span class="token punctuation">)</span>

	<span class="token comment">// 2.注册解析命令行参数</span>

	flag<span class="token punctuation">.</span><span class="token function">Parse</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	<span class="token comment">// 3.使用命令行参数</span>

	<span class="token comment">// 注意flag对应方法返回的都是指针类型, 所以使用时必须通过指针访问</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;name = &quot;</span><span class="token punctuation">,</span> <span class="token operator">*</span>name<span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;age = &quot;</span><span class="token punctuation">,</span> <span class="token operator">*</span>age<span class="token punctuation">)</span>

<span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><h2 id="算数运算符" tabindex="-1">算数运算符 <a class="header-anchor" href="#算数运算符" aria-hidden="true">#</a></h2><ul><li>算数运算符和 C 语言几乎一样</li></ul><table><thead><tr><th style="text-align:center;">运算符</th><th style="text-align:center;">描述</th><th style="text-align:center;">实例</th></tr></thead><tbody><tr><td style="text-align:center;">+</td><td style="text-align:center;">相加</td><td style="text-align:center;">A + B</td></tr><tr><td style="text-align:center;">-</td><td style="text-align:center;">相减</td><td style="text-align:center;">A - B</td></tr><tr><td style="text-align:center;">*</td><td style="text-align:center;">相乘</td><td style="text-align:center;">A * B</td></tr><tr><td style="text-align:center;">/</td><td style="text-align:center;">相除</td><td style="text-align:center;">B / A</td></tr><tr><td style="text-align:center;">%</td><td style="text-align:center;">求余</td><td style="text-align:center;">B % A</td></tr><tr><td style="text-align:center;">++</td><td style="text-align:center;">自增</td><td style="text-align:center;">A++</td></tr><tr><td style="text-align:center;">--</td><td style="text-align:center;">自减</td><td style="text-align:center;">A--</td></tr></tbody></table><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>只有相同类型的数据才能进行运算</p></div><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-c"><pre><code>package main

import <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	var num1 int32 <span class="token operator">=</span> <span class="token number">10</span>

	<span class="token comment">//var num2 int64 = num1 // 类型不同不能进行赋值运算</span>

	var num2 int64 <span class="token operator">=</span> <span class="token function">int64</span><span class="token punctuation">(</span>num1<span class="token punctuation">)</span> <span class="token comment">// 类型不同不能进行赋值运算</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>num2<span class="token punctuation">)</span>

	var num3 int32 <span class="token operator">=</span> <span class="token number">10</span>

	var num4 int64 <span class="token operator">=</span> <span class="token number">20</span>

	<span class="token comment">//var res int64 = num3 + num4 // 类型不同不能进行算数运算</span>

	var res1 int64 <span class="token operator">=</span> <span class="token function">int64</span><span class="token punctuation">(</span>num3<span class="token punctuation">)</span> <span class="token operator">+</span> num4 <span class="token comment">// 类型不同不能进行算数运算</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>res1<span class="token punctuation">)</span>

	var num5 int32 <span class="token operator">=</span> <span class="token number">10</span>

	var num6 int64 <span class="token operator">=</span> <span class="token number">20</span>

	<span class="token comment">//var res2 bool = (num5 == num6) // 类型不同不能进行关系运算</span>

	var res2 bool <span class="token operator">=</span> <span class="token punctuation">(</span>num5 <span class="token operator">==</span> <span class="token function">int32</span><span class="token punctuation">(</span>num6<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 类型不同不能进行关系运算</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>res2<span class="token punctuation">)</span>

	<span class="token comment">// ... ... 其它以此类推</span>

<span class="token punctuation">}</span>

</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><ul><li>Go 语言中++、--运算符不支持前置 <ul><li>错误写法: ++i; --i;</li></ul></li><li>Go 语言中++、--是语句,不是表达式,所以必须独占一行 <ul><li>错误写法: a = i++;  return i++;</li></ul></li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	num1 <span class="token operator">:=</span> <span class="token number">0</span>

	num1<span class="token operator">++</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>num1<span class="token punctuation">)</span>

	<span class="token comment">//++num1 // 编译报错, Go语言中++只能后置,不能前置</span>

	<span class="token comment">//fmt.Println(num1)</span>

	<span class="token comment">//var num2 int = num1++ // 编译报错, num1++是语句不是表达式, 所以必须独占一行</span>

	<span class="token comment">//fmt.Println(num2)</span>

<span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>Go 语言中字符串支持利用+号进行拼接</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	str <span class="token operator">:=</span> <span class="token string">&quot;abc&quot;</span> <span class="token operator">+</span> <span class="token string">&quot;def&quot;</span>

	<span class="token comment">//fmt.Println(str)</span>

<span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><hr><h2 id="关系算符" tabindex="-1">关系算符 <a class="header-anchor" href="#关系算符" aria-hidden="true">#</a></h2><ul><li>关系算符和 C 语言一样</li></ul><table><thead><tr><th style="text-align:center;">运算符</th><th style="text-align:center;">描述</th><th style="text-align:center;">实例</th></tr></thead><tbody><tr><td style="text-align:center;">==</td><td style="text-align:center;">检查两个值是否相等，如果相等返回 True 否则返回 False。</td><td style="text-align:center;">A == B</td></tr><tr><td style="text-align:center;">!=</td><td style="text-align:center;">检查两个值是否不相等，如果不相等返回 True 否则返回 False。</td><td style="text-align:center;">A != B</td></tr><tr><td style="text-align:center;">&gt;</td><td style="text-align:center;">检查左边值是否大于右边值，如果是返回 True 否则返回 False。</td><td style="text-align:center;">A &gt; B</td></tr><tr><td style="text-align:center;"><code>&lt;</code></td><td style="text-align:center;">检查左边值是否小于右边值，如果是返回 True 否则返回 False。</td><td style="text-align:center;"><code>A &lt; B</code></td></tr><tr><td style="text-align:center;">&gt;=</td><td style="text-align:center;">检查左边值是否大于等于右边值，如果是返回 True 否则返回 False。</td><td style="text-align:center;">A &gt;= B</td></tr><tr><td style="text-align:center;"><code>&lt;=</code></td><td style="text-align:center;">检查左边值是否小于等于右边值，如果是返回 True 否则返回 False。</td><td style="text-align:center;"><code>A &lt;= B</code></td></tr></tbody></table><ul><li>注意点: <ul><li>和 C 语言不通的是, Go 语言中关系运算符只能返回 true 和 false</li></ul></li></ul><hr><h2 id="逻辑运算符" tabindex="-1">逻辑运算符 <a class="header-anchor" href="#逻辑运算符" aria-hidden="true">#</a></h2><ul><li>逻辑运算符和 C 语言一样</li></ul><table><thead><tr><th style="text-align:center;">运算符</th><th style="text-align:center;">描述</th><th style="text-align:center;">实例</th></tr></thead><tbody><tr><td style="text-align:center;">&amp;&amp;</td><td style="text-align:center;">如果两边的操作数都是 True，则条件 True，否则为 False。</td><td style="text-align:center;">A &amp;&amp; B</td></tr><tr><td style="text-align:center;"><code>||</code></td><td style="text-align:center;">如果两边的操作数有一个 True，则条件 True，否则为 False。</td><td style="text-align:center;"><code> A || B</code></td></tr><tr><td style="text-align:center;">!</td><td style="text-align:center;">如果条件为 True，则逻辑 NOT 条件 False，否则为 True。</td><td style="text-align:center;">!A</td></tr></tbody></table><hr><h2 id="位运算符" tabindex="-1">位运算符 <a class="header-anchor" href="#位运算符" aria-hidden="true">#</a></h2><ul><li>位运算符和 C 语言几乎一样</li></ul><table><thead><tr><th style="text-align:center;">运算符</th><th style="text-align:center;">描述</th><th style="text-align:center;">实例</th></tr></thead><tbody><tr><td style="text-align:center;">&amp;</td><td style="text-align:center;">参与运算的两数各对应的二进位相与, 对应位只要都是 1 结果就为 1</td><td style="text-align:center;">A &amp; B</td></tr><tr><td style="text-align:center;">|</td><td style="text-align:center;">参与运算的两数各对应的二进位相或,对应位只要其中一个是 1 结果就为 1</td><td style="text-align:center;"><code>A | B</code></td></tr><tr><td style="text-align:center;">^</td><td style="text-align:center;">参与运算的两数各对应的二进位相异或,对应位只要不同结果就是 1</td><td style="text-align:center;">A ^ B</td></tr><tr><td style="text-align:center;"><code>&lt;&lt;</code></td><td style="text-align:center;">左移运算符,左移 n 位就是乘以 2 的 n 次方</td><td style="text-align:center;"><code>A &lt;&lt; 2</code></td></tr><tr><td style="text-align:center;">&gt;&gt;</td><td style="text-align:center;">右移运算符,右移 n 位就是除以 2 的 n 次方</td><td style="text-align:center;">B &gt;&gt; 2</td></tr><tr><td style="text-align:center;">&amp;^</td><td style="text-align:center;">逻辑清零运算符, B 对应位是 1,A 对应位清零,B 对应位是 0, A 对应位保留原样</td><td style="text-align:center;">A &amp;^ B</td></tr></tbody></table><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>新增一个&amp;^运算符</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-c"><pre><code><span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

     <span class="token comment">/*

       0110      a

     &amp;^1011      b 如果b位位1,那么结果为0, 否则结果为a位对应的值

     ----------

       0100

     */</span>

     a1 <span class="token operator">:</span><span class="token operator">=</span> <span class="token number">6</span>

     b1 <span class="token operator">:</span><span class="token operator">=</span> <span class="token number">11</span>

     res1 <span class="token operator">:</span><span class="token operator">=</span> a1 <span class="token operator">&amp;</span><span class="token operator">^</span> b1

     fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;res1 = &quot;</span><span class="token punctuation">,</span> res1<span class="token punctuation">)</span> <span class="token comment">// 4</span>



     <span class="token comment">/*

       1011      a

     &amp;^1101      b 如果b位位1,那么结果为0, 否则结果为a位对应的值

     ----------

       0010

     */</span>

     a2 <span class="token operator">:</span><span class="token operator">=</span> <span class="token number">11</span>

     b2 <span class="token operator">:</span><span class="token operator">=</span> <span class="token number">13</span>

     res2 <span class="token operator">:</span><span class="token operator">=</span> a2 <span class="token operator">&amp;</span><span class="token operator">^</span> b2

     fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;res2 = &quot;</span><span class="token punctuation">,</span> res2<span class="token punctuation">)</span> <span class="token comment">// 2</span>

    <span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><hr><h2 id="赋值运算符" tabindex="-1">赋值运算符 <a class="header-anchor" href="#赋值运算符" aria-hidden="true">#</a></h2><ul><li>赋值运算符和 C 语言几乎一样 <ul><li>新增一个&amp;^=运算符</li></ul></li></ul><table><thead><tr><th style="text-align:center;">运算符</th><th style="text-align:center;">描述</th><th style="text-align:center;">实例</th></tr></thead><tbody><tr><td style="text-align:center;">=</td><td style="text-align:center;">将右边赋值给左边</td><td style="text-align:center;">C = A + B 将 A + B 表达式结果赋值给 C</td></tr><tr><td style="text-align:center;">+=</td><td style="text-align:center;">相加后再赋值</td><td style="text-align:center;">C += A 等于 C = C + A</td></tr><tr><td style="text-align:center;">-=</td><td style="text-align:center;">相减后再赋值</td><td style="text-align:center;">C -= A 等于 C = C - A</td></tr><tr><td style="text-align:center;">*=</td><td style="text-align:center;">相乘后再赋值</td><td style="text-align:center;">C _= A 等于 C = C _ A</td></tr><tr><td style="text-align:center;">/=</td><td style="text-align:center;">相除后再赋值</td><td style="text-align:center;">C /= A 等于 C = C / A</td></tr><tr><td style="text-align:center;">%=</td><td style="text-align:center;">求余后再赋值</td><td style="text-align:center;">C %= A 等于 C = C % A</td></tr><tr><td style="text-align:center;"><code>&lt;&lt;=</code></td><td style="text-align:center;">左移赋值</td><td style="text-align:center;"><code>C &lt;&lt;= 2 等于 C = C &lt;&lt; 2</code></td></tr><tr><td style="text-align:center;">&gt;&gt;=</td><td style="text-align:center;">右移赋值</td><td style="text-align:center;">C &gt;&gt;= 2 等于 C = C &gt;&gt; 2</td></tr><tr><td style="text-align:center;">&amp;=</td><td style="text-align:center;">位逻辑与赋值</td><td style="text-align:center;">C &amp;= 2 等于 C = C &amp; 2</td></tr><tr><td style="text-align:center;">^=</td><td style="text-align:center;">位逻辑或赋值</td><td style="text-align:center;">C ^= 2 等于 C = C ^ 2</td></tr><tr><td style="text-align:center;"><code>|=</code></td><td style="text-align:center;">位逻辑异或赋值</td><td style="text-align:center;"><code>C | = 2 等于 C = C | 2</code></td></tr><tr><td style="text-align:center;">&amp;^=</td><td style="text-align:center;">位逻辑清零赋值</td><td style="text-align:center;">C &amp;^= 2 等于 C = C &amp;^ 2</td></tr></tbody></table><hr><h2 id="其它运算符" tabindex="-1">其它运算符 <a class="header-anchor" href="#其它运算符" aria-hidden="true">#</a></h2><table><thead><tr><th style="text-align:center;">运算符</th><th style="text-align:center;">描述</th><th style="text-align:center;">实例</th></tr></thead><tbody><tr><td style="text-align:center;">&amp;</td><td style="text-align:center;">返回变量存储地址</td><td style="text-align:center;">&amp;a; 将给出变量的实际地址</td></tr><tr><td style="text-align:center;">*</td><td style="text-align:center;">访问指针指向内存</td><td style="text-align:center;">*p; 访问指针 p 指向内存</td></tr></tbody></table><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-c"><pre><code>package main

import <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

  var num <span class="token keyword">int</span> <span class="token operator">=</span> <span class="token number">666</span>

  var p <span class="token operator">*</span><span class="token keyword">int</span> <span class="token operator">=</span> <span class="token operator">&amp;</span>num

  fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span>

  fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token operator">*</span>p<span class="token punctuation">)</span>

  num <span class="token operator">=</span> <span class="token number">777</span>

  fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span>

  <span class="token operator">*</span>p <span class="token operator">=</span> <span class="token number">999</span>

  fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span>

  <span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><ul><li>注意点 <ul><li>指针类型只支持相等运算, 不能做加减运算</li></ul></li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>C 语言示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-c"><pre><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token punctuation">{</span>

  <span class="token keyword">int</span> ages<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">19</span><span class="token punctuation">,</span> <span class="token number">23</span><span class="token punctuation">,</span> <span class="token number">22</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">int</span> <span class="token operator">*</span>arrayP <span class="token operator">=</span> <span class="token operator">&amp;</span>ages<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

  <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;ages[0] = %i\n&quot;</span><span class="token punctuation">,</span> <span class="token operator">*</span><span class="token punctuation">(</span>arrayP <span class="token operator">+</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// *(arrayP + 0) == *arrayP</span>

  <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;ages[1] = %i\n&quot;</span><span class="token punctuation">,</span> <span class="token operator">*</span><span class="token punctuation">(</span>arrayP <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;ages[2] = %i\n&quot;</span><span class="token punctuation">,</span> <span class="token operator">*</span><span class="token punctuation">(</span>arrayP <span class="token operator">+</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

  <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>go 语言示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token keyword">var</span> ages <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token builtin">int</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">19</span><span class="token punctuation">,</span> <span class="token number">23</span><span class="token punctuation">,</span> <span class="token number">22</span><span class="token punctuation">}</span>

	<span class="token keyword">var</span> p <span class="token operator">*</span><span class="token builtin">int</span> <span class="token operator">=</span> <span class="token operator">&amp;</span>ages<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>

	<span class="token comment">//fmt.Println(&amp;ages[0])</span>

	<span class="token comment">//fmt.Println(*p) // 19</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token operator">*</span><span class="token punctuation">(</span>p <span class="token operator">+</span> <span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 编译报错</span>

<span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><h2 id="运算符优先级" tabindex="-1">运算符优先级 <a class="header-anchor" href="#运算符优先级" aria-hidden="true">#</a></h2><ul><li>和 C 语言一样, 只需记住()优先级最高即可</li></ul><h2 id="go-语言流程控制基本概念" tabindex="-1">Go 语言流程控制基本概念 <a class="header-anchor" href="#go-语言流程控制基本概念" aria-hidden="true">#</a></h2><ul><li>Go 语言流程控制和 C 语言一样, 也有三大流程控制结构 <ul><li>顺序结构(默认结构)</li><li>选择结构(if / switch)</li><li>循环结构(for)</li></ul></li></ul><hr><h2 id="选择结构-if" tabindex="-1">选择结构 if <a class="header-anchor" href="#选择结构-if" aria-hidden="true">#</a></h2><ul><li>和 C 语言不同的的是 <ul><li>条件表达式的值必须是布尔类型(Go 语言中没有非零即真的概念)</li><li>条件表达式前面可以添加初始化语句</li><li>不需要编写圆括号</li><li>左大括号必须和条件语句在同一行</li></ul></li><li>第一种格式: <ul><li>条件表达式结果为 true,那么执行 if 后面{}中代码</li></ul></li></ul><div class="language-go"><pre><code><span class="token keyword">if</span> 初始化语句<span class="token punctuation">;</span> 条件表达式<span class="token punctuation">{</span>
  语句块<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div></div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token comment">// 如果后续需要用到age变量, 可以将变量放到if外面</span>

	age <span class="token operator">:=</span> <span class="token number">18</span>

	<span class="token keyword">if</span> age <span class="token operator">&gt;=</span> <span class="token number">18</span><span class="token punctuation">{</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;成年人&quot;</span><span class="token punctuation">)</span>

	<span class="token punctuation">}</span>

<span class="token punctuation">}</span>



<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token comment">// 如果后续不需要用到age变量, 可以将变量放到条件表达式前面</span>

	<span class="token keyword">if</span> age <span class="token operator">:=</span> <span class="token number">18</span><span class="token punctuation">;</span> age <span class="token operator">&gt;=</span> <span class="token number">18</span><span class="token punctuation">{</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;成年人&quot;</span><span class="token punctuation">)</span>

	<span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><ul><li>第二种格式: <ul><li>条件表达式结果为 true,那么执行 if 后面{}中代码</li><li>否则执行 else 后面{}中代码</li></ul></li></ul><div class="language-go"><pre><code><span class="token keyword">if</span> 初始化语句<span class="token punctuation">;</span> 条件表达式<span class="token punctuation">{</span>
  语句块<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
  语句块<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token keyword">if</span> age <span class="token operator">:=</span> <span class="token number">18</span><span class="token punctuation">;</span> age <span class="token operator">&gt;=</span> <span class="token number">18</span> <span class="token punctuation">{</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;成年人&quot;</span><span class="token punctuation">)</span>

	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;未成年人&quot;</span><span class="token punctuation">)</span>

	<span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><ul><li>第三种格式: <ul><li>if 后面条件表达式结果为 true,那么执行 if 后面{}中代码</li><li>否则判断 else if 条件表达式是否为 true,为 true 执行 else if 后面{}中代码</li><li>否则依次判断后续 else if 条件表达式是否为 true,哪个为 true 就执行哪个 else if 后面{}中代码</li><li>都不满足则执行 else 后面{}中代码</li></ul></li></ul><div class="language-go"><pre><code><span class="token keyword">if</span> 初始化语句<span class="token punctuation">;</span> 条件表达式<span class="token punctuation">{</span>
  语句块<span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token keyword">if</span> 条件表达式<span class="token punctuation">{</span>
  语句块<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token operator">...</span> <span class="token operator">...</span>
<span class="token keyword">else</span><span class="token punctuation">{</span>
  语句块<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token keyword">if</span> age <span class="token operator">:=</span> <span class="token number">18</span><span class="token punctuation">;</span> age <span class="token operator">&gt;</span> <span class="token number">55</span> <span class="token punctuation">{</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;老年人&quot;</span><span class="token punctuation">)</span>

	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> age <span class="token operator">&gt;=</span> <span class="token number">40</span> <span class="token punctuation">{</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;中年人&quot;</span><span class="token punctuation">)</span>

	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> age <span class="token operator">&gt;=</span> <span class="token number">18</span> <span class="token punctuation">{</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;成年人&quot;</span><span class="token punctuation">)</span>

	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;未成年人&quot;</span><span class="token punctuation">)</span>

	<span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><ul><li>值得一提的是 Go 语言中没有 C 语言中的三目运算符, 所以 C 语言中三目能干的在 Go 语言中都只能通过 if else 的形式来完成</li></ul><hr><h2 id="选择结构-switch" tabindex="-1">选择结构 switch <a class="header-anchor" href="#选择结构-switch" aria-hidden="true">#</a></h2><ul><li>和 C 语言不同的的是 <ul><li>和 if 一样,表达式前面可以添加初始化语句</li><li>和 if 一样,不需要编写圆括号</li><li>和 if 一样,左大括号必须和表达式在同一行</li><li>case 表达式的值不一定要是常量, 甚至可以不用传递</li><li>一个 case 后面可以有多个表达式, 满足其中一个就算匹配</li><li>case 后面不需要添加 break</li><li>可以在 case 语句块最后添加 fallthrough,实现 case 穿透</li><li>case 后面定义变量不需要添加{}明确范围</li></ul></li><li>格式</li></ul><div class="language-go"><pre><code><span class="token keyword">switch</span> 初始化语句<span class="token punctuation">;</span> 表达式<span class="token punctuation">{</span>
  <span class="token keyword">case</span> 表达式<span class="token number">1</span><span class="token punctuation">,</span> 表达式<span class="token number">2</span><span class="token punctuation">:</span>
    语句块<span class="token punctuation">;</span>
  <span class="token keyword">case</span> 表达式<span class="token number">1</span><span class="token punctuation">,</span> 表达式<span class="token number">2</span><span class="token punctuation">:</span>
    语句块<span class="token punctuation">;</span>
  <span class="token keyword">default</span><span class="token punctuation">:</span>
    语句块<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token keyword">switch</span> num <span class="token operator">:=</span> <span class="token number">3</span><span class="token punctuation">;</span>num <span class="token punctuation">{</span>

	<span class="token keyword">case</span> <span class="token number">1</span><span class="token punctuation">:</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;星期一&quot;</span><span class="token punctuation">)</span>

	<span class="token keyword">case</span> <span class="token number">2</span><span class="token punctuation">:</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;星期二&quot;</span><span class="token punctuation">)</span>

	<span class="token keyword">case</span> <span class="token number">3</span><span class="token punctuation">:</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;星期三&quot;</span><span class="token punctuation">)</span>

	<span class="token keyword">case</span> <span class="token number">4</span><span class="token punctuation">:</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;星期四&quot;</span><span class="token punctuation">)</span>

	<span class="token keyword">case</span> <span class="token number">5</span><span class="token punctuation">:</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;星期五&quot;</span><span class="token punctuation">)</span>

	<span class="token keyword">case</span> <span class="token number">6</span><span class="token punctuation">:</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;星期六&quot;</span><span class="token punctuation">)</span>

	<span class="token keyword">case</span> <span class="token number">7</span><span class="token punctuation">:</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;星期日&quot;</span><span class="token punctuation">)</span>

	<span class="token keyword">default</span><span class="token punctuation">:</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Other...&quot;</span><span class="token punctuation">)</span>

	<span class="token punctuation">}</span>

<span class="token punctuation">}</span>



<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token keyword">switch</span> num <span class="token operator">:=</span> <span class="token number">3</span><span class="token punctuation">;</span>num <span class="token punctuation">{</span>

	<span class="token keyword">case</span> <span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">:</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;工作日&quot;</span><span class="token punctuation">)</span>

	<span class="token keyword">case</span> <span class="token number">6</span><span class="token punctuation">,</span><span class="token number">7</span><span class="token punctuation">:</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;非工作日&quot;</span><span class="token punctuation">)</span>

	<span class="token keyword">default</span><span class="token punctuation">:</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Other...&quot;</span><span class="token punctuation">)</span>

	<span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><div class="warning custom-block"><p class="custom-block-title">注意</p><ul><li>case 后面不用编写 break, 不会出现 case 穿透问题</li><li>如果想让 case 穿透,必须在 case 语句块最后添加 fallthrough 关键</li></ul></div><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token keyword">switch</span> num <span class="token operator">:=</span> <span class="token number">3</span><span class="token punctuation">;</span> num <span class="token punctuation">{</span>

	<span class="token keyword">case</span> <span class="token number">1</span><span class="token punctuation">:</span>

		<span class="token keyword">fallthrough</span>

	<span class="token keyword">case</span> <span class="token number">2</span><span class="token punctuation">:</span>

		<span class="token keyword">fallthrough</span>

	<span class="token keyword">case</span> <span class="token number">3</span><span class="token punctuation">:</span>

		<span class="token keyword">fallthrough</span>

	<span class="token keyword">case</span> <span class="token number">4</span><span class="token punctuation">:</span>

		<span class="token keyword">fallthrough</span>

	<span class="token keyword">case</span> <span class="token number">5</span><span class="token punctuation">:</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;工作日&quot;</span><span class="token punctuation">)</span>

	<span class="token keyword">case</span> <span class="token number">6</span><span class="token punctuation">:</span>

		<span class="token keyword">fallthrough</span>

	<span class="token keyword">case</span> <span class="token number">7</span><span class="token punctuation">:</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;非工作日&quot;</span><span class="token punctuation">)</span>

	<span class="token keyword">default</span><span class="token punctuation">:</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Other...&quot;</span><span class="token punctuation">)</span>

	<span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>case 后面不仅仅可以放常量,还可以放变量和表达式</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	value <span class="token operator">:=</span> <span class="token number">2</span>

	<span class="token keyword">switch</span> num<span class="token operator">:=</span><span class="token number">1</span><span class="token punctuation">;</span> num <span class="token punctuation">{</span>

	<span class="token keyword">case</span> value<span class="token punctuation">:</span> <span class="token comment">// 变量</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;num等于value&quot;</span><span class="token punctuation">)</span>

	<span class="token keyword">default</span><span class="token punctuation">:</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;num不等于value&quot;</span><span class="token punctuation">)</span>

	<span class="token punctuation">}</span>

<span class="token punctuation">}</span>



<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	value <span class="token operator">:=</span> <span class="token number">2</span>

	<span class="token keyword">switch</span> num<span class="token operator">:=</span><span class="token number">1</span><span class="token punctuation">;</span> num <span class="token punctuation">{</span>

	<span class="token keyword">case</span> <span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span> <span class="token comment">// 函数</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;num等于value&quot;</span><span class="token punctuation">)</span>

	<span class="token keyword">default</span><span class="token punctuation">:</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;num不等于value&quot;</span><span class="token punctuation">)</span>

	<span class="token punctuation">}</span>

<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">getValue</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{</span>

	<span class="token keyword">return</span> <span class="token number">1</span>

<span class="token punctuation">}</span>



<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token keyword">switch</span> num<span class="token operator">:=</span><span class="token number">18</span><span class="token punctuation">;</span> <span class="token punctuation">{</span>

	<span class="token keyword">case</span> num <span class="token operator">&gt;=</span><span class="token number">0</span> <span class="token operator">&amp;&amp;</span> num <span class="token operator">&lt;=</span><span class="token number">10</span><span class="token punctuation">:</span> <span class="token comment">// 表达式</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;num是一个0~10之间的数&quot;</span><span class="token punctuation">)</span>

	<span class="token keyword">case</span> num <span class="token operator">&gt;</span><span class="token number">10</span> <span class="token operator">&amp;&amp;</span> num <span class="token operator">&lt;=</span><span class="token number">20</span><span class="token punctuation">:</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;num是一个11~20之间的数&quot;</span><span class="token punctuation">)</span>

	<span class="token keyword">default</span><span class="token punctuation">:</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;num是一个大于20的数&quot;</span><span class="token punctuation">)</span>

	<span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div><code>case</code> 后面定义变量不用添加 <code>{}</code> 明确作用于范围</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token keyword">switch</span> num <span class="token operator">:=</span> <span class="token number">1</span><span class="token punctuation">;</span> num <span class="token punctuation">{</span>

	<span class="token keyword">case</span> <span class="token number">1</span><span class="token punctuation">:</span>

		value <span class="token operator">:=</span> <span class="token number">10</span> <span class="token comment">// 不会报错</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>

	<span class="token keyword">default</span><span class="token punctuation">:</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Other...&quot;</span><span class="token punctuation">)</span>

	<span class="token punctuation">}</span>

<span class="token punctuation">}</span>

</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><ul><li>其它特性和 C 语言一样</li></ul><hr><h2 id="循环结构-for" tabindex="-1">循环结构 for <a class="header-anchor" href="#循环结构-for" aria-hidden="true">#</a></h2><ul><li>和 C 语言不同的的是 <ul><li>和 if 一样,条件表达式的值必须是布尔类型</li><li>和 if 一样,不需要编写圆括号</li><li>和 if 一样,左大括号必须和表达式在同一行</li></ul></li><li>格式:</li></ul><div class="language-go"><pre><code><span class="token keyword">for</span> 初始化表达式；循环条件表达式；循环后的操作表达式 <span class="token punctuation">{</span>
  循环体语句<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>

	<span class="token punctuation">}</span>

<span class="token punctuation">}</span>

</code></pre></div><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>Go 语言中没有 while/dowhile 循环, 所以可以通过如下格式实现 C 语言中 while 循环用法</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	i <span class="token operator">:=</span> <span class="token number">0</span>

	<span class="token keyword">for</span> i <span class="token operator">&lt;</span> <span class="token number">10</span> <span class="token punctuation">{</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>

		i<span class="token operator">++</span>

	<span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>最简单死循环</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token keyword">for</span> <span class="token punctuation">{</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;根本停不下来&quot;</span><span class="token punctuation">)</span>

	<span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><ul><li>除了实现基本的循环结构以外,Go 语言还实现了一种高级 for 循环<code>for...range循环</code><ul><li><code>for...range循环</code>可以快速完成对字符串、数组、slice、map、channel 遍历</li></ul></li><li>格式</li></ul><div class="language-go"><pre><code><span class="token keyword">for</span> 索引<span class="token punctuation">,</span> 值 <span class="token operator">:=</span> <span class="token keyword">range</span> 被遍历数据<span class="token punctuation">{</span>

<span class="token punctuation">}</span>
</code></pre></div><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token comment">// 1.定义一个数组</span>

	arr <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">}</span>

	<span class="token comment">// 2.快速遍历数组</span>

	<span class="token comment">// i用于保存当前遍历到数组的索引</span>

	<span class="token comment">// v用于保存当前遍历到数组的值</span>

	<span class="token keyword">for</span> i<span class="token punctuation">,</span> v <span class="token operator">:=</span> <span class="token keyword">range</span> arr <span class="token punctuation">{</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> v<span class="token punctuation">)</span>

	<span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><hr><h2 id="四大跳转" tabindex="-1">四大跳转 <a class="header-anchor" href="#四大跳转" aria-hidden="true">#</a></h2><ul><li>和 C 语言一样,Go 语言中也有四大跳转语句, 分别是 return、break、continue、goto</li><li>break 语句 <ul><li>Go 语言中的 break 语句可以用于,立即跳出 switch、for 和 select</li><li>但不同的是 Go 语言中的 break 语句可以指定标签</li></ul></li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>

		<span class="token keyword">if</span> i <span class="token operator">==</span> <span class="token number">5</span> <span class="token punctuation">{</span>

			<span class="token keyword">break</span> <span class="token comment">// 跳出所在循环</span>

		<span class="token punctuation">}</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>

	<span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><ul><li>利用 break 跳转到指定标签 <ul><li>标签必须在使用之前定义</li><li>标签后面只能跟 switch 和循环语句, 不能插入其它语句</li><li>跳转到标签之后 switch 和循环不会再次被执行</li></ul></li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

outer<span class="token punctuation">:</span>

	<span class="token keyword">switch</span> num<span class="token operator">:=</span><span class="token number">2</span><span class="token punctuation">;</span> num <span class="token punctuation">{</span>

	<span class="token keyword">case</span> <span class="token number">1</span><span class="token punctuation">:</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>

	<span class="token keyword">case</span> <span class="token number">2</span><span class="token punctuation">:</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>

		<span class="token keyword">break</span> outer

	<span class="token keyword">default</span><span class="token punctuation">:</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;other&quot;</span><span class="token punctuation">)</span>

	<span class="token punctuation">}</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;come here&quot;</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>



<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

outer<span class="token punctuation">:</span>

	<span class="token keyword">for</span> i<span class="token operator">:=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span><span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">{</span>

		<span class="token keyword">for</span> j<span class="token operator">:=</span><span class="token number">0</span><span class="token punctuation">;</span> j<span class="token operator">&lt;</span><span class="token number">10</span><span class="token punctuation">;</span> j<span class="token operator">++</span> <span class="token punctuation">{</span>

			<span class="token keyword">if</span> <span class="token punctuation">(</span>j <span class="token operator">==</span> <span class="token number">5</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

				<span class="token keyword">break</span> outer<span class="token comment">// 跳出到指定标签</span>

			<span class="token punctuation">}</span>

			fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>j<span class="token punctuation">)</span>

		<span class="token punctuation">}</span>

	<span class="token punctuation">}</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;come here&quot;</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><ul><li>continue 语句 <ul><li>Go 语言中的 continue 语句可以用于,立即进入下一次循环</li><li>但不同的是 Go 语言中的 continue 语句可以指定标签</li></ul></li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>

		<span class="token keyword">if</span> i <span class="token operator">==</span> <span class="token number">2</span> <span class="token punctuation">{</span>

			<span class="token keyword">continue</span>

		<span class="token punctuation">}</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>

	<span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><ul><li>利用 continue 跳转到指定标签 <ul><li>标签必须在使用之前定义</li><li>标签后面只能跟循环语句, 不能插入其它语句</li><li>对于单层循环和直接编写 continue 一样</li><li>对于多层循环,相当于跳到最外层循环继续判断条件执行</li></ul></li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

outer<span class="token punctuation">:</span>

	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">5</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;i =&quot;</span><span class="token punctuation">,</span> i<span class="token punctuation">)</span> <span class="token comment">// 0 1 2 3 4</span>

		<span class="token keyword">for</span> j <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> j <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> j<span class="token operator">++</span> <span class="token punctuation">{</span>

			<span class="token keyword">if</span> j <span class="token operator">==</span> <span class="token number">5</span> <span class="token punctuation">{</span>

				<span class="token keyword">continue</span> outer <span class="token comment">// 跳出到指定标签</span>

			<span class="token punctuation">}</span>

		<span class="token punctuation">}</span>

	<span class="token punctuation">}</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;come here&quot;</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><ul><li>goto 语句 <ul><li>Go 语言中的 goto 和 C 语言中用法一样, 用于在同一个函数中瞎跳</li></ul></li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	num <span class="token operator">:=</span> <span class="token number">1</span>

outer<span class="token punctuation">:</span>

	<span class="token keyword">if</span><span class="token punctuation">(</span>num <span class="token operator">&lt;=</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span>

		num<span class="token operator">++</span>

		<span class="token keyword">goto</span> outer <span class="token comment">// 死循环</span>

	<span class="token punctuation">}</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;come here&quot;</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>



<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	num <span class="token operator">:=</span> <span class="token number">1</span>

	<span class="token keyword">if</span><span class="token punctuation">(</span>num <span class="token operator">&lt;=</span> <span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span>

		num<span class="token operator">++</span>

		<span class="token keyword">goto</span> outer <span class="token comment">// 死循环</span>

	<span class="token punctuation">}</span>

outer<span class="token punctuation">:</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;come here&quot;</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><ul><li>Go 语言中的 return 语句和 C 语言一模一样,都是用于结束函数,将结果返回给调用者</li></ul><h2 id="函数" tabindex="-1">函数 <a class="header-anchor" href="#函数" aria-hidden="true">#</a></h2><ul><li>Go 语言和 C 语言一样也有函数的概念, Go 语言中函数除了定义格式和不用声明以外,其它方面几乎和 C 语言一模一样</li><li>格式:</li></ul><div class="language-go"><pre><code><span class="token keyword">func</span> 函数名称<span class="token punctuation">(</span>形参列表<span class="token punctuation">)</span><span class="token punctuation">(</span>返回值列表<span class="token punctuation">)</span><span class="token punctuation">{</span>
  函数体<span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token comment">//无参数无返回值函数</span>

<span class="token keyword">func</span> <span class="token function">sayNotParams</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Hello World!!!&quot;</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>

<span class="token comment">//有参数无返回值函数</span>

<span class="token keyword">func</span> <span class="token function">sayHasParams</span><span class="token punctuation">(</span>name <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Hello &quot;</span><span class="token punctuation">,</span> name<span class="token punctuation">)</span>

<span class="token punctuation">}</span>

<span class="token comment">//无参数有返回值函数</span>

<span class="token keyword">func</span> <span class="token function">sumReturn</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{</span> <span class="token comment">// 只有一个返回值时,返回值列表的()可以省略</span>

	<span class="token keyword">return</span> <span class="token number">1</span> <span class="token operator">+</span> <span class="token number">1</span>

<span class="token punctuation">}</span>

<span class="token comment">// 有参数有返回值函数</span>

<span class="token keyword">func</span> <span class="token function">sumParamsAndReturn</span><span class="token punctuation">(</span>a <span class="token builtin">int</span><span class="token punctuation">,</span> b <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{</span>

	<span class="token keyword">return</span> a <span class="token operator">+</span> b

<span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><hr><h2 id="和-c-语言函数差异" tabindex="-1">和 C 语言函数差异 <a class="header-anchor" href="#和-c-语言函数差异" aria-hidden="true">#</a></h2><ul><li>和 C 语言不同的是,Go 语言中可以给函数的返回值指定名称</li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-c"><pre><code><span class="token comment">// 给返回值指定了一个名称叫做res, return时会自动将函数体内部res作为返回值</span>
<span class="token comment">// 其实本质就是提前定义了一个局部变量res, 在函数体中使用的res就是这个局部变量,返回的也是这个局部变量</span>
func <span class="token function">sum</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>res <span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

  res <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">+</span> <span class="token number">1</span>

  <span class="token keyword">return</span>

<span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><ul><li>和 C 语言不同的是,Go 语言中的函数允许有多个返回值函数</li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-c"><pre><code>func <span class="token function">calculate</span><span class="token punctuation">(</span>a <span class="token keyword">int</span><span class="token punctuation">,</span> b <span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>sum <span class="token keyword">int</span><span class="token punctuation">,</span> sub <span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

  sum <span class="token operator">=</span> a <span class="token operator">+</span> b

  sub <span class="token operator">=</span> a <span class="token operator">-</span> b

  <span class="token keyword">return</span>

<span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><ul><li>相邻同类型形参 OR 返回值类型可以合并, 可以将数据类型写到最后一个同类型形参 OR 返回值后面</li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-c"><pre><code><span class="token comment">// a, b都是int类型, 所以只需要在b后面添加int即可</span>

func <span class="token function">calculate</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b <span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>sum<span class="token punctuation">,</span> sub <span class="token keyword">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

  sum <span class="token operator">=</span> a <span class="token operator">+</span> b

  sub <span class="token operator">=</span> a <span class="token operator">-</span> b

  <span class="token keyword">return</span>

<span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><ul><li>和 C 语言不同的是 Go 语言中的函数不需要先声明在使用</li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 在后面定义也可以在前面使用</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Hello World!!!&quot;</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>

</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><hr><h2 id="值传递和引用传递" tabindex="-1">值传递和引用传递 <a class="header-anchor" href="#值传递和引用传递" aria-hidden="true">#</a></h2><ul><li>Go 语言中<code>值类型</code>有: int 系列、float 系列、bool、string、数组、结构体 <ul><li>值类型通常在栈中分配存储空间</li><li>值类型作为函数参数传递, 是拷贝传递</li><li>在函数体内修改值类型参数, 不会影响到函数外的值</li></ul></li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	num <span class="token operator">:=</span> <span class="token number">10</span>

	<span class="token function">change</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span> <span class="token comment">// 10</span>

<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">change</span><span class="token punctuation">(</span>num <span class="token builtin">int</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>

	num <span class="token operator">=</span> <span class="token number">998</span>

<span class="token punctuation">}</span>



<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	arr <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">}</span>

	<span class="token function">change</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span> <span class="token comment">// 1, 3, 5</span>

<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">change</span><span class="token punctuation">(</span>arr <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>

	arr<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">8</span>

<span class="token punctuation">}</span>



<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">type</span> Person <span class="token keyword">struct</span> <span class="token punctuation">{</span>

	name <span class="token builtin">string</span>

	age <span class="token builtin">int</span>

<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	p <span class="token operator">:=</span> Person<span class="token punctuation">{</span><span class="token string">&quot;lnj&quot;</span><span class="token punctuation">,</span> <span class="token number">33</span><span class="token punctuation">}</span>

	<span class="token function">change</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token comment">// lnj</span>

<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">change</span><span class="token punctuation">(</span>p Person<span class="token punctuation">)</span>  <span class="token punctuation">{</span>

	p<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;zs&quot;</span>

<span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><ul><li>Go 语言中<code>引用类型</code>有: 指针、slice、map、channel <ul><li>引用类型通常在堆中分配存储空间</li><li>引用类型作为函数参数传递,是引用传递</li><li>在函数体内修改引用类型参数,会影响到函数外的值</li></ul></li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	num <span class="token operator">:=</span> <span class="token number">10</span>

	<span class="token function">change</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>num<span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span> <span class="token comment">// 998</span>

<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">change</span><span class="token punctuation">(</span>num <span class="token operator">*</span><span class="token builtin">int</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>

	<span class="token operator">*</span>num <span class="token operator">=</span> <span class="token number">998</span>

<span class="token punctuation">}</span>



<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	arr <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">}</span>

	<span class="token function">change</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span> <span class="token comment">// 1, 8, 5</span>

<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">change</span><span class="token punctuation">(</span>arr <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>

	arr<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">8</span>

<span class="token punctuation">}</span>



<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	mp <span class="token operator">:=</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">:</span><span class="token string">&quot;lnj&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;age&quot;</span><span class="token punctuation">:</span><span class="token string">&quot;33&quot;</span><span class="token punctuation">}</span>

	<span class="token function">change</span><span class="token punctuation">(</span>mp<span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>mp<span class="token punctuation">[</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// zs</span>

<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">change</span><span class="token punctuation">(</span>mp <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>

	mp<span class="token punctuation">[</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;zs&quot;</span>

<span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><hr><h2 id="匿名函数" tabindex="-1">匿名函数 <a class="header-anchor" href="#匿名函数" aria-hidden="true">#</a></h2><ul><li>匿名函数也是函数的一种, 它的格式和普通函数一模一样,只不过没有名字而已 <ul><li>普通函数的函数名称是固定的, 匿名函数的函数名称是系统随机的</li></ul></li><li>匿名函数可以定义在函数外(全局匿名函数),也可以定义在函数内(局部匿名函数), Go 语言中的普通函数不能嵌套定义, 但是可以通过匿名函数来实现函数的嵌套定义</li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token comment">// 方式一</span>

<span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;hello world1&quot;</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>

<span class="token comment">// 方式二</span>

<span class="token keyword">var</span> <span class="token punctuation">(</span>
	b <span class="token operator">=</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;hello world2&quot;</span><span class="token punctuation">)</span>

	<span class="token punctuation">}</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token function">a</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	<span class="token function">b</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>

</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><ul><li>全局匿名函数</li><li>一般情况下我们很少使用全局匿名函数, 大多数情况都是使用局部匿名函数, 匿名函数可以直接调用、保存到变量、作为参数或者返回值</li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token comment">// 直接调用</span>

<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

  <span class="token keyword">func</span><span class="token punctuation">(</span>s <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

  fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span>

  <span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token string">&quot;hello lnj&quot;</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>



<span class="token comment">// 保存到变量</span>

<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

  a <span class="token operator">:=</span> <span class="token keyword">func</span><span class="token punctuation">(</span>s <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span>

  <span class="token punctuation">}</span>

  <span class="token function">a</span><span class="token punctuation">(</span><span class="token string">&quot;hello lnj&quot;</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>



<span class="token comment">// 作为参数</span>

<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

  <span class="token function">test</span><span class="token punctuation">(</span><span class="token keyword">func</span><span class="token punctuation">(</span>s <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span>

  <span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">test</span><span class="token punctuation">(</span>f <span class="token keyword">func</span><span class="token punctuation">(</span>s <span class="token builtin">string</span><span class="token punctuation">)</span><span class="token punctuation">)</span>  <span class="token punctuation">{</span>

<span class="token function">f</span><span class="token punctuation">(</span><span class="token string">&quot;hello lnj&quot;</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>



<span class="token comment">// 作为返回值</span>

<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

  res <span class="token operator">:=</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  <span class="token function">res</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">20</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

  <span class="token keyword">return</span> <span class="token keyword">func</span><span class="token punctuation">(</span>a <span class="token builtin">int</span><span class="token punctuation">,</span> b <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>a <span class="token operator">+</span> b<span class="token punctuation">)</span>

  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><ul><li>匿名函数应用场景 <ul><li>当某个函数只需要被调用一次时, 可以使用匿名函数</li><li>需要执行一些不确定的操作时,可以使用匿名函数</li></ul></li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token comment">// 项目经理的一天</span>

	<span class="token function">work</span><span class="token punctuation">(</span><span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;组织部门开会&quot;</span><span class="token punctuation">)</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;给部门员工分配今天工作任务&quot;</span><span class="token punctuation">)</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;检查部门员工昨天提交的代码&quot;</span><span class="token punctuation">)</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;... ...&quot;</span><span class="token punctuation">)</span>

	<span class="token punctuation">}</span><span class="token punctuation">)</span>

	<span class="token comment">// 程序员的一天</span>

	<span class="token function">work</span><span class="token punctuation">(</span><span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;参加部门会议&quot;</span><span class="token punctuation">)</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;修改测试提交的BUG&quot;</span><span class="token punctuation">)</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;完成老大今天安排的任务&quot;</span><span class="token punctuation">)</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;... ...&quot;</span><span class="token punctuation">)</span>

	<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>

<span class="token comment">// 假设我们需要编写一个函数,用于描述一个人每天上班都需要干嘛</span>

<span class="token comment">// 职场中的人每天上班前,上班后要做的事几乎都是相同的, 但是每天上班过程中要做的事确实不确定的</span>

<span class="token comment">// 所以此时我们可以使用匿名函数来解决, 让上班的人自己觉得自己每天上班需要干什么</span>

<span class="token keyword">func</span> <span class="token function">work</span><span class="token punctuation">(</span>custom <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token comment">// 上班前</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;起床&quot;</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;刷牙&quot;</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;洗脸&quot;</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;出门&quot;</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;上班打卡&quot;</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;开电脑&quot;</span><span class="token punctuation">)</span>

	<span class="token comment">// 上班中</span>

	<span class="token function">custom</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	<span class="token comment">// 上班后</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;关电脑&quot;</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;下班打卡&quot;</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;出门&quot;</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;到家&quot;</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;吃饭&quot;</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;睡觉&quot;</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><ul><li>为了提升代码的可读性,我们还可以将这个大函数拆解为独立的匿名函数</li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">work</span><span class="token punctuation">(</span>custom <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token comment">// 这种写法的好处是代码层次清晰,并且如果有一些变量</span>

	<span class="token comment">// 只需要在上班前或上班后使用,还可以将这些变量隔离,不对外界造成污染</span>

	<span class="token comment">// 上班前</span>

	<span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;起床&quot;</span><span class="token punctuation">)</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;刷牙&quot;</span><span class="token punctuation">)</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;洗脸&quot;</span><span class="token punctuation">)</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;出门&quot;</span><span class="token punctuation">)</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;上班打卡&quot;</span><span class="token punctuation">)</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;开电脑&quot;</span><span class="token punctuation">)</span>

	<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	<span class="token comment">// 上班中</span>

	<span class="token function">custom</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	<span class="token comment">// 上班后</span>

	<span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;关电脑&quot;</span><span class="token punctuation">)</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;下班打卡&quot;</span><span class="token punctuation">)</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;出门&quot;</span><span class="token punctuation">)</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;到家&quot;</span><span class="token punctuation">)</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;吃饭&quot;</span><span class="token punctuation">)</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;睡觉&quot;</span><span class="token punctuation">)</span>

	<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">work</span><span class="token punctuation">(</span>custom <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token comment">// 前提条件是这个函数只在work函数中使用, 两者有较强的关联性, 否则建议定义为普通函数</span>

	pre <span class="token operator">:=</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;起床&quot;</span><span class="token punctuation">)</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;刷牙&quot;</span><span class="token punctuation">)</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;洗脸&quot;</span><span class="token punctuation">)</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;出门&quot;</span><span class="token punctuation">)</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;上班打卡&quot;</span><span class="token punctuation">)</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;开电脑&quot;</span><span class="token punctuation">)</span>

	<span class="token punctuation">}</span>

	latter <span class="token operator">:=</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;关电脑&quot;</span><span class="token punctuation">)</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;下班打卡&quot;</span><span class="token punctuation">)</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;出门&quot;</span><span class="token punctuation">)</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;到家&quot;</span><span class="token punctuation">)</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;吃饭&quot;</span><span class="token punctuation">)</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;睡觉&quot;</span><span class="token punctuation">)</span>

	<span class="token punctuation">}</span>

	<span class="token comment">// 上班前</span>

	<span class="token function">pre</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	<span class="token comment">// 上班中</span>

	<span class="token function">custom</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	<span class="token comment">// 上班后</span>

	<span class="token function">latter</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><hr><h2 id="闭包" tabindex="-1">闭包 <a class="header-anchor" href="#闭包" aria-hidden="true">#</a></h2><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>闭包是一个特殊的匿名函数, 它是匿名函数和相关引用环境组成的一个整体</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	num <span class="token operator">:=</span> <span class="token number">10</span>

	a <span class="token operator">:=</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

		num<span class="token operator">++</span> <span class="token comment">// 在闭包中用到了main函数中的num, 所以这个匿名函数就是一个闭包</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span> <span class="token comment">// 11</span>

	<span class="token punctuation">}</span>

	<span class="token function">a</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>



<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	num <span class="token operator">:=</span> <span class="token number">10</span>

	a <span class="token operator">:=</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

		num <span class="token operator">=</span> <span class="token number">6</span> <span class="token comment">// 在闭包中用到了main函数中的num, 所以这个匿名函数就是一个闭包</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span> <span class="token comment">// 6</span>

	<span class="token punctuation">}</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;执行闭包前&quot;</span><span class="token punctuation">,</span> num<span class="token punctuation">)</span> <span class="token comment">// 10</span>

	<span class="token function">a</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;执行闭包后&quot;</span><span class="token punctuation">,</span> num<span class="token punctuation">)</span> <span class="token comment">// 6</span>

<span class="token punctuation">}</span>



<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	res <span class="token operator">:=</span> <span class="token function">addUpper</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 执行addUpper函数,得到一个闭包</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">res</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 2</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">res</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 3</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">res</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 4</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">res</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 5</span>

<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">addUpper</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{</span>

	x <span class="token operator">:=</span> <span class="token number">1</span>

	<span class="token keyword">return</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{</span>

		x<span class="token operator">++</span> <span class="token comment">// 匿名函数中用到了addUpper中的x,所以这是一个闭包</span>

		<span class="token keyword">return</span> x

	<span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><div class="warning custom-block"><p class="custom-block-title">注意</p><ul><li>只要闭包还在使用外界的变量, 那么外界的变量就会一直存在</li><li>闭包中使用的变量和外界的变量是同一个变量, 所以可以闭包中可以修改外界变量</li><li>也就是说只要匿名函数中用到了外界的变量, 那么这个匿名函数就是一个闭包</li></ul></div><hr><h2 id="延迟调用" tabindex="-1">延迟调用 <a class="header-anchor" href="#延迟调用" aria-hidden="true">#</a></h2><ul><li>Go 语言中没有提供其它面向对象语言的析构函数, 但是 Go 语言提供了 defer 语句用于实现其它面向对象语言析构函数的功能</li><li>defer 语句常用于<code>释放资源</code>、<code>解除锁定</code>以及<code>错误处理</code>等 <ul><li>例如 C 语言中我们申请了一块内存空间,那么不使用时我们就必须释放这块存储空间</li><li>例如 C 语言中我们打开了一个文件,那么我们不使用时就要关闭这个文件</li><li>例如 C 语言中我们打开了一个数据库, 那么我们不使用时就要关闭这个数据库</li><li>这一类的操作在 Go 语言中都可以通过 defer 语句来完成</li></ul></li><li>无论你在什么地方注册 defer 语句,它都会在所属函数执行完毕之后才会执行, 并且如果注册了多个 defer 语句,那么它们会按照<code>后进先出</code>的原则执行 <ul><li>正是因为 defer 语句的这种特性, 所以在 Go 语言中关闭资源不用像 C 语言那样用完了再关闭, 我们完全可以打开的同时就关闭, 因为无论如何 defer 语句都会在所属函数执行完毕之后才会执行</li></ul></li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token keyword">defer</span> fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;我是第一个被注册的&quot;</span><span class="token punctuation">)</span> <span class="token comment">// 3</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;main函数中调用的Println&quot;</span><span class="token punctuation">)</span> <span class="token comment">// 1</span>

	<span class="token keyword">defer</span> fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;我是第二个被注册的&quot;</span><span class="token punctuation">)</span> <span class="token comment">// 2</span>

<span class="token punctuation">}</span>

</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><hr><h2 id="init-函数" tabindex="-1">init 函数 <a class="header-anchor" href="#init-函数" aria-hidden="true">#</a></h2><ul><li>golang 里面有两个保留的函数： <ul><li>init 函数（能够应用于所有的 package）</li><li>main 函数（只能应用于 package main）</li><li>这两个函数在定义时不能有任何的参数和返回值</li></ul></li><li>go 程序会自动调用 init()和 main()，所以你<code>不能</code>在任何地方调用这两个函数</li><li>package main 必须包含一个 main 函数, 但是每个 package 中的 init 函数都是可选的</li><li>一个 package 里面可以写任意多个 init 函数，但这无论是对于可读性还是以后的可维护性来说，我们都强烈建议用户在一个 package 中每个文件只写一个 init 函数</li><li>单个包中代码执行顺序如下</li><li><em><strong><code>main包--&gt;常量--&gt;全局变量--&gt;init函数--&gt;main函数--&gt;Exit</code></strong></em></li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">const</span> constValue <span class="token operator">=</span> <span class="token number">998</span> <span class="token comment">// 1</span>

<span class="token keyword">var</span> gloalVarValue <span class="token builtin">int</span> <span class="token operator">=</span> <span class="token function">abc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 2</span>

<span class="token keyword">func</span> <span class="token function">init</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 3</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;执行main包中main.go中init函数&quot;</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 4</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;执行main包中main.go中main函数&quot;</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">abc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">int</span> <span class="token punctuation">{</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;执行main包中全局变量初始化&quot;</span><span class="token punctuation">)</span>

	<span class="token keyword">return</span> <span class="token number">998</span>

<span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><div class="warning custom-block"><p class="custom-block-title">多个包之间代码执行顺序如下</p><ul><li>init 函数的作用</li><li>init 函数用于处理当前文件的初始化操作, 在使用某个文件时的一些准备工作应该放到这里</li></ul></div><h2 id="数组" tabindex="-1">数组 <a class="header-anchor" href="#数组" aria-hidden="true">#</a></h2><ul><li>和 C 语言一样,Go 语言中也有数组的概念, Go 语言中的数组也是用于保存一组<code>相同类型</code>的数据</li><li>和 C 语言一样,Go 语言中的数组也分为<code>一维数组</code>和<code>多维数组</code></li></ul><hr><h2 id="一维数组" tabindex="-1">一维数组 <a class="header-anchor" href="#一维数组" aria-hidden="true">#</a></h2><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>格式:<code>var arr [元素个数]数据类型</code></div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token comment">// 1.定义一个数组</span>

	<span class="token keyword">var</span> arr <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token builtin">int</span>

	<span class="token comment">// 2.打印数组</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span> <span class="token comment">//[0 0 0]</span>



	<span class="token comment">// 1.定义一个数组</span>

	<span class="token keyword">var</span> arr <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token builtin">bool</span>

	<span class="token comment">// 2.打印数组</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span> <span class="token comment">//[false false  false]</span>

<span class="token punctuation">}</span>



<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token comment">// 1.定义的同时完全初始化</span>

	<span class="token keyword">var</span> arr1 <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token builtin">int</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">}</span>

	<span class="token comment">// 2.打印数组</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>arr1<span class="token punctuation">)</span> <span class="token comment">// [1 3 5]</span>



	<span class="token comment">// 1.定义的同时部分初始化</span>

	<span class="token keyword">var</span> arr4 <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token builtin">int</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">}</span>

	<span class="token comment">// 2.打印数组</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>arr4<span class="token punctuation">)</span> <span class="token comment">// [8 9 0]</span>



	<span class="token comment">// 1.定义的同时指定元素初始化</span>

	<span class="token keyword">var</span> arr5 <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token builtin">int</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">:</span><span class="token number">8</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">:</span><span class="token number">9</span><span class="token punctuation">}</span>

	<span class="token comment">// 2.打印数组</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>arr5<span class="token punctuation">)</span> <span class="token comment">// [8 0 9]</span>



	<span class="token comment">// 1.先定义再逐个初始化</span>

	<span class="token keyword">var</span> arr3 <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token builtin">int</span>

	arr3<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">1</span>

	arr3<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">2</span>

	arr3<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">3</span>

	<span class="token comment">// 2.打印数组</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>arr3<span class="token punctuation">)</span> <span class="token comment">// [1 2 3]</span>

<span class="token punctuation">}</span>



<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token comment">// 1.先定义再一次性初始化</span>

	<span class="token keyword">var</span> arr2 <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token builtin">int</span>

	arr2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">}</span>

	<span class="token comment">// 2.打印数组</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>arr2<span class="token punctuation">)</span> <span class="token comment">// [2 4 6]</span>

<span class="token punctuation">}</span>



<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token comment">// 1.定义的同时完全初始化</span>

	<span class="token keyword">var</span> arr1  <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">}</span>

	<span class="token comment">// 2.打印数组</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>arr1<span class="token punctuation">)</span> <span class="token comment">// [1 3 5]</span>



	<span class="token comment">// 1.定义的同时指定元素初始化</span>

	<span class="token keyword">var</span> arr2  <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">6</span><span class="token punctuation">:</span><span class="token number">5</span><span class="token punctuation">}</span>

	<span class="token comment">// 2.打印数组</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>arr2<span class="token punctuation">)</span> <span class="token comment">// [0 0 0 0 0 0 5]</span>

<span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><ul><li>...会根据初始化元素个数自动确定数组长度</li><li>和 C 语言一样,Go 语言中如果定义数组的同时初始化,那么元素个数可以省略,但是必须使用<code>...</code>来替代</li><li>和 C 语言中的数组不同,Go 语言中数组除了可以定义的同时初始化以外,还<code>可以先定义再一次性初始化</code></li><li>和 C 语言一样,Go 语言中的数组也提供了好几种初始化方式</li><li>和 C 语言中数组不同, Go 语言中数组定义之后就<code>有默认的初始值</code></li><li>默认初始值就是保存数据类型的默认值(零值)</li><li>Go 语言中数组的访问和使用方式和 C 语言一样都是通过<code>数组名称[索引]</code>的方式</li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	arr <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">}</span>

	<span class="token comment">// 使用数组, 往数组中存放数据</span>

	arr<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">666</span>

	<span class="token comment">// 访问数组, 从数组中获取数据</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><blockquote><p>Go 语言中提供了两种遍历数组的方式, 一种是通过传统 for 循环遍历, 一种是通过 for...range 循环遍历</p></blockquote><ul><li>遍历数组</li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	arr <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">}</span>

	<span class="token comment">// 传统for循环遍历</span>

	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token function">len</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>

	<span class="token punctuation">}</span>

	<span class="token comment">// for...range循环遍历</span>

	<span class="token keyword">for</span> i<span class="token punctuation">,</span> v <span class="token operator">:=</span> <span class="token keyword">range</span> arr <span class="token punctuation">{</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>i<span class="token punctuation">,</span> v<span class="token punctuation">)</span>

	<span class="token punctuation">}</span>

<span class="token punctuation">}</span>

</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><ul><li>数组注意点</li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token keyword">var</span> arr1 <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token builtin">int</span>

	<span class="token keyword">var</span> arr2 <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token builtin">int</span>

	<span class="token comment">//var arr3 [2]int</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>arr1 <span class="token operator">==</span> arr2<span class="token punctuation">)</span> <span class="token comment">// true</span>

	<span class="token comment">//fmt.Println(arr1 == arr3) // 编译报错, 不是相同类型不能比较</span>

<span class="token punctuation">}</span>



<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token keyword">var</span> arr1 <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token builtin">int</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">}</span>

	<span class="token keyword">var</span> arr2 <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token builtin">int</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">}</span>

	<span class="token keyword">var</span> arr3 <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token builtin">int</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">}</span>

	<span class="token comment">// 首先会判断`数据类型`是否相同,如果相同会依次取出数组中`对应索引的元素`进行比较,</span>

	<span class="token comment">// 如果所有元素都相同返回true,否则返回false</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>arr1 <span class="token operator">==</span> arr2<span class="token punctuation">)</span> <span class="token comment">// true</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>arr1 <span class="token operator">==</span> arr3<span class="token punctuation">)</span> <span class="token comment">// false</span>

<span class="token punctuation">}</span>



<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token keyword">var</span> arr1 <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token builtin">int</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">}</span>

	<span class="token keyword">var</span> arr2 <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token builtin">int</span> <span class="token operator">=</span> arr1

	arr2<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">666</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>arr1<span class="token punctuation">)</span> <span class="token comment">// [1 3 5]</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>arr2<span class="token punctuation">)</span> <span class="token comment">// [666 3 5]</span>

<span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><div class="warning custom-block"><p class="custom-block-title">注意</p><ul><li>Go 语言中的数组是值类型, 赋值和传参时会复制整个数组</li><li>如果元素类型支持==、!=操作时,那么数组也支持此操作</li><li>Go 语言中<code>数组长度</code>也是<code>数据类型的一部分</code></li></ul></div><h2 id="二维数组" tabindex="-1">二维数组 <a class="header-anchor" href="#二维数组" aria-hidden="true">#</a></h2><ul><li>用法和 C 语言数组一样, 只是创建的格式不同 <ul><li>格式: <code>[行数][列数]类型</code></li></ul></li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token comment">// 创建一个两行三列数组</span>

	arr <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span>

		<span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">,</span>

		<span class="token punctuation">{</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token comment">//注意: 数组换行需要以逗号结尾</span>

	<span class="token punctuation">}</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span> <span class="token comment">// [[1 2 3] [4 5 6]]</span>

<span class="token punctuation">}</span>

</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><ul><li>创建多维数组时只允许第一维度使用... <ul><li>格式: <code>[...][列数]类型</code></li></ul></li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token comment">// 创建一个两行三列数组</span>

	arr <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token operator">...</span><span class="token punctuation">]</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span>

		<span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">}</span><span class="token punctuation">,</span>

		<span class="token punctuation">{</span><span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
	<span class="token punctuation">}</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span> <span class="token comment">// [[1 2 3] [4 5 6]]</span>

<span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><h2 id="切片" tabindex="-1">切片 <a class="header-anchor" href="#切片" aria-hidden="true">#</a></h2><ul><li><p>无论是 C 语言中的数组还是 Go 语言中的数组,数组的长度一旦确定就不能改变, 但在实际开发中我们可能事先不能确定数组的长度, 为了解决这类问题 Go 语言中推出了一种新的数据类型<code>切片</code></p></li><li><p>切片可以简单的理解为长度可以变化的数组, 但是 Go 语言中的切片本质上是一个结构体</p></li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">type</span> slice <span class="token keyword">struct</span><span class="token punctuation">{</span>

  array unsafe<span class="token punctuation">.</span>Pointer <span class="token comment">// 指向底层数组指针</span>

  <span class="token builtin">len</span> <span class="token builtin">int</span> <span class="token comment">// 切片长度(保存了多少个元素)</span>

  <span class="token builtin">cap</span> <span class="token builtin">int</span> <span class="token comment">// 切片容量(可以保存多少个元素)</span>

<span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><ul><li>切片源码</li></ul><hr><ul><li><p><em><strong>切片创建的三种方式</strong></em></p><ul><li>方式一: 通过数组创建切片<code>array[startIndex:endIndex]</code></li></ul></li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">}</span>

	<span class="token comment">// 从数组0下标开始取,一直取到2下标前面一个索引</span>

	<span class="token keyword">var</span> sce <span class="token operator">=</span> arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">]</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>sce<span class="token punctuation">)</span> <span class="token comment">// [1 3]</span>

	<span class="token comment">// 切片len = 结束位置 - 开始位置</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">len</span><span class="token punctuation">(</span>sce<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 2 - 0 = 2</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">cap</span><span class="token punctuation">(</span>sce<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 5 - 0 = 5</span>

	<span class="token comment">// 数组地址就是数组首元素的地址</span>

	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%p\n&quot;</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>arr<span class="token punctuation">)</span> <span class="token comment">// 0xc04200a330</span>

	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%p\n&quot;</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// 0xc04200a330</span>

	<span class="token comment">// 切片地址就是数组中指定的开始元素的地址</span>

	<span class="token comment">//  arr[0:2]开始地址为0, 所以就是arr[0]的地址</span>

	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%p\n&quot;</span><span class="token punctuation">,</span> sce<span class="token punctuation">)</span> <span class="token comment">// 0xc04200a330</span>

<span class="token punctuation">}</span>

</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><p>image.png</p><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">}</span>

	<span class="token comment">// 根据数组的索引片段创建切片</span>

	<span class="token keyword">var</span> sce <span class="token operator">=</span> arr<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">:</span><span class="token number">4</span><span class="token punctuation">]</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>sce<span class="token punctuation">)</span> <span class="token comment">// [5 7]</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">len</span><span class="token punctuation">(</span>sce<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 4 - 2 = 2</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">cap</span><span class="token punctuation">(</span>sce<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 5 - 2 = 3</span>

	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%p\n&quot;</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>arr<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// 0xc042076070</span>

	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%p\n&quot;</span><span class="token punctuation">,</span> sce<span class="token punctuation">)</span> <span class="token comment">// 0xc042076070</span>

<span class="token punctuation">}</span>

</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><ul><li>指定起始位置时有三种方式可以指定 <ul><li>开始位置和结束位置都指定</li><li>只指定开始位置或结束位置</li><li>开始位置和结束位置都不指定</li></ul></li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">}</span>

	<span class="token comment">// 同时指定开始位置和结束位置</span>

	<span class="token keyword">var</span> sce1 <span class="token operator">=</span> arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">]</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>sce1<span class="token punctuation">)</span> <span class="token comment">// [1 3]</span>

	<span class="token comment">// 只指定结束位置</span>

	<span class="token keyword">var</span> sce3 <span class="token operator">=</span> arr<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">]</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>sce3<span class="token punctuation">)</span> <span class="token comment">// [1 3]</span>

	<span class="token comment">// 只指定开始位置</span>

	<span class="token keyword">var</span> sce2 <span class="token operator">=</span> arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">:</span><span class="token punctuation">]</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>sce2<span class="token punctuation">)</span> <span class="token comment">// [1 3 5 7 9]</span>

	<span class="token comment">// 都不指定</span>

	<span class="token keyword">var</span> sce4 <span class="token operator">=</span> arr<span class="token punctuation">[</span><span class="token punctuation">:</span><span class="token punctuation">]</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>sce4<span class="token punctuation">)</span> <span class="token comment">// [1 3 5 7 9]</span>

<span class="token punctuation">}</span>

</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><ul><li>方式二: 通过 make 函数创建<code>make(类型, 长度, 容量)</code><ul><li>内部会先创建一个数组, 然后让切片指向数组</li><li>如果没有指定容量,那么容量和长度一样</li></ul></li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token comment">// 第一个参数: 指定切片数据类型</span>

	<span class="token comment">// 第二个参数: 指定切片的长度</span>

	<span class="token comment">// 第三个参数: 指定切片的容量</span>

	<span class="token keyword">var</span> sce <span class="token operator">=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>sce<span class="token punctuation">)</span> <span class="token comment">// [0 0 0]</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">len</span><span class="token punctuation">(</span>sce<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 3</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">cap</span><span class="token punctuation">(</span>sce<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 5</span>

	<span class="token comment">/*

	   内部实现原理

	   var arr = [5]int{0, 0, 0}

	   var sce = arr[0:3]

	*/</span>

<span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><ul><li>方式三:通过 Go 提供的语法糖快速创建 <ul><li>和创建数组一模一样, 但是<code>不能指定长度</code></li><li>通过该方式创建时, 切片的<code>长度和容量相等</code></li></ul></li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token keyword">var</span> sce <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">}</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>sce<span class="token punctuation">)</span> <span class="token comment">// [1 3 5]</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">len</span><span class="token punctuation">(</span>sce<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 3</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">cap</span><span class="token punctuation">(</span>sce<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 3</span>

<span class="token punctuation">}</span>

</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><hr><ul><li><em><strong>切片的使用</strong></em></li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token keyword">var</span> sce <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">}</span>

	<span class="token comment">// 使用切片, 往切片中存放数据</span>

	sce<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">666</span>

	<span class="token comment">// 访问切片, 从切片中获取数据</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>sce<span class="token punctuation">)</span> <span class="token comment">// [1 666 5]</span>

<span class="token punctuation">}</span>



<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token keyword">var</span> sce <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">}</span>

	<span class="token comment">// 编译报错, 越界</span>

	sce<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">666</span>

<span class="token punctuation">}</span>



<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token keyword">var</span> sce <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">}</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;追加数据前:&quot;</span><span class="token punctuation">,</span> sce<span class="token punctuation">)</span> <span class="token comment">// [1 3 5]</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;追加数据前:&quot;</span><span class="token punctuation">,</span> <span class="token function">len</span><span class="token punctuation">(</span>sce<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 3</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;追加数据前:&quot;</span><span class="token punctuation">,</span> <span class="token function">cap</span><span class="token punctuation">(</span>sce<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 3</span>

	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;追加数据前: %p\n&quot;</span><span class="token punctuation">,</span> sce<span class="token punctuation">)</span> <span class="token comment">// 0xc0420600a0</span>

	<span class="token comment">// 第一个参数: 需要把数据追加到哪个切片中</span>

	<span class="token comment">// 第二个参数: 需要追加的数据, 可以是一个或多个</span>

	sce <span class="token operator">=</span> <span class="token function">append</span><span class="token punctuation">(</span>sce<span class="token punctuation">,</span> <span class="token number">666</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;追加数据后:&quot;</span><span class="token punctuation">,</span> sce<span class="token punctuation">)</span> <span class="token comment">// [1 3 5 666]</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;追加数据后:&quot;</span><span class="token punctuation">,</span> <span class="token function">len</span><span class="token punctuation">(</span>sce<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 4</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;追加数据后:&quot;</span><span class="token punctuation">,</span> <span class="token function">cap</span><span class="token punctuation">(</span>sce<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 6</span>

	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;追加数据前: %p\n&quot;</span><span class="token punctuation">,</span> sce<span class="token punctuation">)</span> <span class="token comment">// 0xc042076b60</span>

<span class="token punctuation">}</span>



<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token keyword">var</span> sce1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">}</span>

	<span class="token keyword">var</span> sce2 <span class="token operator">=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;赋值前:%p\n&quot;</span><span class="token punctuation">,</span> sce1<span class="token punctuation">)</span> <span class="token comment">// 0xc0420600a0</span>

	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;赋值前:%p\n&quot;</span><span class="token punctuation">,</span> sce2<span class="token punctuation">)</span> <span class="token comment">// 0xc042076060</span>

	<span class="token comment">// 将sce2的指向修改为sce1, 此时sce1和sce2底层指向同一个数组</span>

	sce2 <span class="token operator">=</span> sce1

	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;赋值后:%p\n&quot;</span><span class="token punctuation">,</span> sce1<span class="token punctuation">)</span> <span class="token comment">// 0xc0420600a0</span>

	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;赋值后:%p\n&quot;</span><span class="token punctuation">,</span> sce2<span class="token punctuation">)</span> <span class="token comment">// 0xc0420600a0</span>

	<span class="token comment">//copy(sce2, sce1)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>sce1<span class="token punctuation">)</span> <span class="token comment">// [1 3 5]</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>sce2<span class="token punctuation">)</span> <span class="token comment">// [1 3 5]</span>

	sce2<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">666</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>sce1<span class="token punctuation">)</span> <span class="token comment">// [1 666 5]</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>sce2<span class="token punctuation">)</span> <span class="token comment">// [1 666 5]</span>

<span class="token punctuation">}</span>



<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token keyword">var</span> sce1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">}</span>

	<span class="token keyword">var</span> sce2 <span class="token operator">=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;赋值前:%p\n&quot;</span><span class="token punctuation">,</span> sce1<span class="token punctuation">)</span> <span class="token comment">// 0xc0420600a0</span>

	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;赋值前:%p\n&quot;</span><span class="token punctuation">,</span> sce2<span class="token punctuation">)</span> <span class="token comment">// 0xc042076060</span>

	<span class="token comment">// 将sce1中的数据拷贝到sce2中,, 此时sce1和sce2底层指向不同数组</span>

	<span class="token function">copy</span><span class="token punctuation">(</span>sce2<span class="token punctuation">,</span> sce1<span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;赋值后:%p\n&quot;</span><span class="token punctuation">,</span> sce1<span class="token punctuation">)</span> <span class="token comment">// 0xc0420600a0</span>

	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;赋值后:%p\n&quot;</span><span class="token punctuation">,</span> sce2<span class="token punctuation">)</span> <span class="token comment">// 0xc042076060</span>

	<span class="token comment">//copy(sce2, sce1)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>sce1<span class="token punctuation">)</span> <span class="token comment">// [1 3 5]</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>sce2<span class="token punctuation">)</span> <span class="token comment">// [1 3 5 0 0]</span>

	sce2<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">666</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>sce1<span class="token punctuation">)</span> <span class="token comment">// [1 3 5]</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>sce2<span class="token punctuation">)</span> <span class="token comment">// [1 666 5 0 0]</span>

<span class="token punctuation">}</span>



<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token comment">// 容量为3</span>

	<span class="token keyword">var</span> sce1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">}</span>

	<span class="token comment">// 容量为5</span>

	<span class="token keyword">var</span> sce2 <span class="token operator">=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;拷贝前:&quot;</span><span class="token punctuation">,</span> sce2<span class="token punctuation">)</span> <span class="token comment">// [0 0 0 0 0]</span>

	<span class="token comment">// sce2容量足够, 会将sce1所有内容拷贝到sce2</span>

	<span class="token function">copy</span><span class="token punctuation">(</span>sce2<span class="token punctuation">,</span> sce1<span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;拷贝后:&quot;</span><span class="token punctuation">,</span> sce2<span class="token punctuation">)</span> <span class="token comment">// [1 3 5 0 0]</span>

<span class="token punctuation">}</span>



<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token comment">// 容量为3</span>

	<span class="token keyword">var</span> sce1 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">}</span>

	<span class="token comment">// 容量为2</span>

	<span class="token keyword">var</span> sce2 <span class="token operator">=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;拷贝前:&quot;</span><span class="token punctuation">,</span> sce2<span class="token punctuation">)</span> <span class="token comment">// [0 0]</span>

	<span class="token comment">// sce2容量不够, 会将sce1前2个元素拷贝到sce2中</span>

	<span class="token function">copy</span><span class="token punctuation">(</span>sce2<span class="token punctuation">,</span> sce1<span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;拷贝后:&quot;</span><span class="token punctuation">,</span> sce2<span class="token punctuation">)</span> <span class="token comment">// [1 3]</span>

<span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><div class="warning custom-block"><p class="custom-block-title">注意</p><ul><li>copy 函数在拷贝数据时永远以小容量为准</li><li>格式: <code>copy(目标切片, 源切片)</code>, 会将源切片中数据拷贝到目标切片中</li><li>除了 append 函数外,Go 语言还提供了一个 copy 函数, 用于两个切片之间数据的快速拷贝</li><li>append 函数会在切片<code>末尾</code>添加一个元素, 并返回一个追加数据之后的切片</li><li>利用 append 函数追加数据时,如果追加之后没有超出切片的容量,那么返回原来的切片, 如果追加之后超出了切片的容量,那么返回一个新的切片</li><li>append 函数每次给切片扩容都会按照原有切片容量*2 的方式扩容</li><li>如果希望切片自动扩容,那么添加数据时必须使用 append 方法</li><li>和数组一样, 如果通过<code>切片名称[索引]</code>方式操作切片, 不能越界 * 切片的基本使用方式和数组一样, 可以通过<code>切片名称[索引]</code>方式操作切片</li></ul></div><hr><ul><li><em><strong>切片的注意点</strong></em></li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	arr <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">7</span><span class="token punctuation">,</span> <span class="token number">9</span><span class="token punctuation">}</span>

	sce1 <span class="token operator">:=</span> arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">:</span><span class="token number">4</span><span class="token punctuation">]</span>

	sce2 <span class="token operator">:=</span> sce1<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">:</span><span class="token number">3</span><span class="token punctuation">]</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>sce1<span class="token punctuation">)</span> <span class="token comment">// [1 3 5 7]</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>sce2<span class="token punctuation">)</span> <span class="token comment">// [1 3 5]</span>

	<span class="token comment">// 由于底层指向同一数组, 所以修改sce2会影响sce1</span>

	sce2<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">666</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>sce1<span class="token punctuation">)</span> <span class="token comment">// [1 666 5 7]</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>sce2<span class="token punctuation">)</span> <span class="token comment">// [1 666 5]</span>

<span class="token punctuation">}</span>

<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token keyword">var</span> arr1 <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token builtin">int</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">}</span>

	<span class="token keyword">var</span> arr2 <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token builtin">int</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">}</span>

	<span class="token keyword">var</span> arr3 <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token builtin">int</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">}</span>

	<span class="token comment">// 首先会判断`数据类型`是否相同,如果相同会依次取出数组中`对应索引的元素`进行比较,</span>

	<span class="token comment">// 如果所有元素都相同返回true,否则返回false</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>arr1 <span class="token operator">==</span> arr2<span class="token punctuation">)</span> <span class="token comment">// true</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>arr1 <span class="token operator">==</span> arr3<span class="token punctuation">)</span> <span class="token comment">// false</span>



	sce1 <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">}</span>

	sce2 <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">}</span>

	<span class="token comment">//fmt.Println(sce1 == sce2) // 编译报错</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>sce1 <span class="token operator">!=</span> <span class="token boolean">nil</span><span class="token punctuation">)</span> <span class="token comment">// true</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>sce2 <span class="token operator">==</span> <span class="token boolean">nil</span><span class="token punctuation">)</span> <span class="token comment">// false</span>

<span class="token punctuation">}</span>

<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token comment">// 数组声明后就可以直接使用, 声明时就会开辟存储空间</span>

	<span class="token keyword">var</span> arr <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token builtin">int</span>

	arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">2</span>

	arr<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">4</span>

	arr<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">6</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span> <span class="token comment">// [2 4 6]</span>

	<span class="token comment">// 切片声明后不能直接使用, 只有通过 make 或语法糖创建之后才会开辟空间,才能使用</span>

	<span class="token keyword">var</span> sce <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span>

	sce<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">2</span> <span class="token comment">// 编译报错</span>

	sce<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">4</span>

	sce<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">6</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>sce<span class="token punctuation">)</span>

<span class="token punctuation">}</span>

<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	str <span class="token operator">:=</span> <span class="token string">&quot;abcdefg&quot;</span>

	<span class="token comment">// 通过字符串生成切片</span>

	sce1 <span class="token operator">:=</span> str<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">:</span><span class="token punctuation">]</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>sce1<span class="token punctuation">)</span> <span class="token comment">// defg</span>

	sce2 <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>

	<span class="token comment">// 第二个参数只能是 slice 或者是数组</span>

	<span class="token comment">// 将字符串拷贝到切片中</span>

	<span class="token function">copy</span><span class="token punctuation">(</span>sce2<span class="token punctuation">,</span> str<span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>sce2<span class="token punctuation">)</span> <span class="token comment">//[97 98 99 100 101 102 103 0 0 0]</span>

<span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><div class="warning custom-block"><p class="custom-block-title">注意</p><ul><li>字符串的底层是[]byte 数组, 所以字符也支持切片相关操作</li><li>只声明当没有被创建的切片是不能使用的</li><li>和数组不同, 切片只支持判断是否为 nil, 不支持==、!=判断</li><li>可以通过切片再次生成新的切片, 两个切片底层指向同一数组</li></ul></div><h2 id="map-字典、映射" tabindex="-1">map(字典、映射) <a class="header-anchor" href="#map-字典、映射" aria-hidden="true">#</a></h2><ul><li>map 翻译过来就是字典或者映射, 可以把 map 看做是切片的升级版 <ul><li>只要是可以做==、!=判断的数据类型都可以作为 key(数值类型、字符串、数组、指针、结构体、接口)</li><li>map 的 key 的数据类型不能是:slice、map、function</li><li>map 和切片一样容量都不是固定的, 当容量不足时底层会自动扩容</li><li>切片是用来存储一组相同类型的数据的, map 也是用来存储一组相同类型的数据的</li><li>在切片中我们可以通过索引获取对应的元素, 在 map 中我们可以通过 key 获取对应的元素</li><li>切片的索引是系统自动生成的,从 0 开始递增. map 中的 key 需要我们自己指定</li></ul></li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>map 格式:<code>var dic map[key数据类型]value数据类型</code></div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token keyword">var</span> dic <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token builtin">int</span> <span class="token operator">=</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">int</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">0</span><span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">:</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">:</span><span class="token number">5</span><span class="token punctuation">}</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>dic<span class="token punctuation">)</span> <span class="token comment">// map[0:1 1:3 2:5]</span>

	<span class="token comment">// 获取 map 中某个 key 对应的值</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>dic<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// 1</span>

	<span class="token comment">// 修改 map 中某个 key 对应的值</span>

	dic<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">666</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>dic<span class="token punctuation">)</span> <span class="token comment">// map[0:1 1:666 2:5]</span>

<span class="token punctuation">}</span>

<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token keyword">var</span> dict <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span> <span class="token operator">=</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">:</span><span class="token string">&quot;lnj&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;age&quot;</span><span class="token punctuation">:</span><span class="token string">&quot;33&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;gender&quot;</span><span class="token punctuation">:</span><span class="token string">&quot;male&quot;</span><span class="token punctuation">}</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>dict<span class="token punctuation">)</span><span class="token comment">// map[name:lnj age:33 gender:male]</span>

<span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><ul><li><em><strong>创建 map 的三种方式</strong></em></li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>方式一: 通过 Go 提供的语法糖快速创建</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	dict <span class="token operator">:=</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;lnj&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;age&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;33&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;gender&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;male&quot;</span><span class="token punctuation">}</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>dict<span class="token punctuation">)</span> <span class="token comment">// map[name:lnj age:33 gender:male]</span>

<span class="token punctuation">}</span>

</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>方式二:通过 make 函数创建<code>make(类型, 容量)</code></div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token keyword">var</span> dict <span class="token operator">=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>

	dict<span class="token punctuation">[</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;lnj&quot;</span>

	dict<span class="token punctuation">[</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;33&quot;</span>

	dict<span class="token punctuation">[</span><span class="token string">&quot;gender&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;male&quot;</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>dict<span class="token punctuation">)</span> <span class="token comment">// map[age:33 gender:male name:lnj]</span>

<span class="token punctuation">}</span>

</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>方式二:通过 make 函数创建<code>make(类型)</code></div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token keyword">var</span> dict <span class="token operator">=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">)</span>

	dict<span class="token punctuation">[</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;lnj&quot;</span>

	dict<span class="token punctuation">[</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;33&quot;</span>

	dict<span class="token punctuation">[</span><span class="token string">&quot;gender&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;male&quot;</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>dict<span class="token punctuation">)</span> <span class="token comment">// map[age:33 gender:male name:lnj]</span>

<span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>和切片一样,没有被创建的 map 是不能使用的</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token comment">// map 声明后不能直接使用, 只有通过 make 或语法糖创建之后才会开辟空间,才能使用</span>

	<span class="token keyword">var</span> dict <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span>

	dict<span class="token punctuation">[</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;lnj&quot;</span> <span class="token comment">// 编译报错</span>

	dict<span class="token punctuation">[</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;33&quot;</span>

	dict<span class="token punctuation">[</span><span class="token string">&quot;gender&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;male&quot;</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>dict<span class="token punctuation">)</span>

<span class="token punctuation">}</span>

</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><hr><ul><li><em><strong>map 的增删改查</strong></em></li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>增加: 当 map 中没有指定的 key 时就会自动增加</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token keyword">var</span> dict <span class="token operator">=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;增加前:&quot;</span><span class="token punctuation">,</span> dict<span class="token punctuation">)</span> <span class="token comment">// map[]</span>

	dict<span class="token punctuation">[</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;lnj&quot;</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;增加后:&quot;</span><span class="token punctuation">,</span> dict<span class="token punctuation">)</span> <span class="token comment">// map[name:lnj]</span>

<span class="token punctuation">}</span>

</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>修改: 当 map 中有指定的 key 时就会自动修改</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token keyword">var</span> dict <span class="token operator">=</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;lnj&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;age&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;33&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;gender&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;male&quot;</span><span class="token punctuation">}</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;修改前:&quot;</span><span class="token punctuation">,</span> dict<span class="token punctuation">)</span> <span class="token comment">// map[name:lnj age:33 gender:male]</span>

	dict<span class="token punctuation">[</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;zs&quot;</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;修改后:&quot;</span><span class="token punctuation">,</span> dict<span class="token punctuation">)</span> <span class="token comment">// map[age:33 gender:male name:zs]</span>

<span class="token punctuation">}</span>

</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>删除: 可以通过 Go 语言内置 delete 函数删除指定元素</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token keyword">var</span> dict <span class="token operator">=</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;lnj&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;age&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;33&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;gender&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;male&quot;</span><span class="token punctuation">}</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;删除前:&quot;</span><span class="token punctuation">,</span> dict<span class="token punctuation">)</span> <span class="token comment">// map[name:lnj age:33 gender:male]</span>

	<span class="token comment">// 第一个参数: 被操作的字典</span>

	<span class="token comment">// 第二个参数: 需要删除元素对应的 key</span>

	<span class="token function">delete</span><span class="token punctuation">(</span>dict<span class="token punctuation">,</span> <span class="token string">&quot;name&quot;</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;删除后:&quot;</span><span class="token punctuation">,</span> dict<span class="token punctuation">)</span> <span class="token comment">// map[age:33 gender:male]</span>

<span class="token punctuation">}</span>

</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>查询: 通过 ok-idiom 模式判断指定键值对是否存储</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token keyword">var</span> dict <span class="token operator">=</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;lnj&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;age&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;33&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;gender&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;male&quot;</span><span class="token punctuation">}</span>

	<span class="token comment">//value, ok := dict[&quot;age&quot;]</span>

	<span class="token comment">//if(ok){</span>

	<span class="token comment">// fmt.Println(&quot;有 age 这个 key,值为&quot;, value)</span>

	<span class="token comment">//}else{</span>

	<span class="token comment">// fmt.Println(&quot;没有 age 这个 key,值为&quot;, value)</span>

	<span class="token comment">//}</span>

	<span class="token keyword">if</span> value<span class="token punctuation">,</span> ok <span class="token operator">:=</span> dict<span class="token punctuation">[</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">]</span><span class="token punctuation">;</span> ok <span class="token punctuation">{</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;有 age 这个 key,值为&quot;</span><span class="token punctuation">,</span> value<span class="token punctuation">)</span>

	<span class="token punctuation">}</span>

<span class="token punctuation">}</span>

  <span class="token comment">// ***map遍历***</span>

  <span class="token comment">// 注意: map和数组以及切片不同,map中存储的数据是无序的, 所以多次打印输出的顺序可能不同</span>

  <span class="token keyword">var</span> dict <span class="token operator">=</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">:</span><span class="token string">&quot;lnj&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;age&quot;</span><span class="token punctuation">:</span><span class="token string">&quot;33&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;gender&quot;</span><span class="token punctuation">:</span><span class="token string">&quot;male&quot;</span><span class="token punctuation">}</span>

  <span class="token keyword">for</span> key<span class="token punctuation">,</span> value <span class="token operator">:=</span> <span class="token keyword">range</span> dict<span class="token punctuation">{</span>

    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>key<span class="token punctuation">,</span> value<span class="token punctuation">)</span>

  <span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><h2 id="结构体" tabindex="-1">结构体 <a class="header-anchor" href="#结构体" aria-hidden="true">#</a></h2><ul><li>Go 语言中的结构体和 C 语言中结构体一样, 都是用来保存一组<code>不同类型的数据</code></li><li>Go 语言中的结构体和 C 语言中结构体一样, 都需要先定义结构体类型再利用结构体类型定义结构体变量</li><li>定义结构体类型</li></ul><div class="language-go"><pre><code><span class="token keyword">type</span> 类型名称 <span class="token keyword">struct</span><span class="token punctuation">{</span>

  属性名称 属性类型

  属性名称 属性类型

  <span class="token operator">...</span> <span class="token operator">...</span>

<span class="token punctuation">}</span>
</code></pre></div><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">type</span> Studentstruct <span class="token punctuation">{</span>

  name <span class="token builtin">string</span>

  age <span class="token builtin">int</span>

<span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>创建结构体变量的两种方式</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token keyword">type</span> Student <span class="token keyword">struct</span> <span class="token punctuation">{</span>

		name <span class="token builtin">string</span>

		age <span class="token builtin">int</span>

	<span class="token punctuation">}</span>

	<span class="token comment">// 完全初始化</span>

	<span class="token keyword">var</span> stu1<span class="token operator">=</span> Student<span class="token punctuation">{</span><span class="token string">&quot;lnj&quot;</span><span class="token punctuation">,</span> <span class="token number">33</span><span class="token punctuation">}</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>stu1<span class="token punctuation">)</span>

	<span class="token comment">// 部分初始化</span>

	<span class="token comment">// 部分初始化必须通过 属性名称: 方式指定要初始化的属性</span>

	<span class="token keyword">var</span> stu2 <span class="token operator">=</span> Student<span class="token punctuation">{</span>name<span class="token punctuation">:</span><span class="token string">&quot;lnj&quot;</span><span class="token punctuation">}</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>stu2<span class="token punctuation">)</span>

<span class="token punctuation">}</span>

<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token comment">// 注意: 这里不用写 type 和结构体类型名称</span>

	<span class="token keyword">var</span> stu2 <span class="token operator">=</span> <span class="token keyword">struct</span> <span class="token punctuation">{</span>

		name <span class="token builtin">string</span>

		age <span class="token builtin">int</span>

	<span class="token punctuation">}</span><span class="token punctuation">{</span>

		name<span class="token punctuation">:</span> <span class="token string">&quot;lnj&quot;</span><span class="token punctuation">,</span>

		age<span class="token punctuation">:</span> <span class="token number">33</span><span class="token punctuation">,</span>

	<span class="token punctuation">}</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>stu2<span class="token punctuation">)</span>

<span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><ul><li>和 C 语言中的结构体一样, 如果结构体类型只需要使用一次, 那么建议定义类型同时定义变量</li><li>方式二: 定义结构体类型同时定义结构体变量(匿名结构体)</li><li>和 C 语言中的结构体一样, 如果结构体类型需要多次使用, 那么建议先定义类型再定义变量</li><li>方式一: 先定义结构体类型, 再定义结构体变量</li></ul><hr><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>结构体类型操作</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">type</span> Student <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	name <span class="token builtin">string</span>

	age <span class="token builtin">int</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token keyword">var</span> stu <span class="token operator">=</span> Student<span class="token punctuation">{</span><span class="token string">&quot;lnj&quot;</span><span class="token punctuation">,</span> <span class="token number">33</span><span class="token punctuation">}</span>

	<span class="token comment">// 获取结构体中某个属性对应的值</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>stu<span class="token punctuation">.</span>name<span class="token punctuation">)</span>

	<span class="token comment">// 修改结构体中某个属性对应的值</span>

	stu<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;zs&quot;</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>stu<span class="token punctuation">)</span>

<span class="token punctuation">}</span>

</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>和 slice、map 不同的是, 只要定义了结构体变量就可以使用结构体变量, 默认情况下结构体中的所有属性都是属性对应类型的默认值</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">type</span> Student <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	name <span class="token builtin">string</span>

	age <span class="token builtin">int</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token keyword">var</span> stu Student <span class="token comment">// 相当于 var stu = Student{}</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>stu<span class="token punctuation">)</span> <span class="token comment">// { 0}</span>

	stu<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;lnj&quot;</span> <span class="token comment">// 不会报错</span>

	stu<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">33</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>stu<span class="token punctuation">)</span> <span class="token comment">// {lnj 33}</span>

<span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><hr><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>复杂结构体成员</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">type</span> Student <span class="token keyword">struct</span> <span class="token punctuation">{</span>

	name <span class="token builtin">string</span>

	age <span class="token builtin">int</span>

<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token keyword">type</span> Demo <span class="token keyword">struct</span> <span class="token punctuation">{</span>

		age <span class="token builtin">int</span> <span class="token comment">// 基本类型作为属性</span>

		arr <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token builtin">int</span> <span class="token comment">// 数组类型作为属性</span>

		sce <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span> <span class="token comment">// 切片类型作为属性</span>

		mp <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span> <span class="token comment">// 字典类型作为属性</span>

		stu Student <span class="token comment">// 结构体类型作为属性</span>

	<span class="token punctuation">}</span>

	<span class="token keyword">var</span> d Demo <span class="token operator">=</span> Demo<span class="token punctuation">{</span>

		<span class="token number">33</span><span class="token punctuation">,</span>

		<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">}</span><span class="token punctuation">,</span>

		<span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">}</span><span class="token punctuation">,</span>

		<span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;class&quot;</span><span class="token punctuation">:</span><span class="token string">&quot;one&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>

		Student<span class="token punctuation">{</span>

			<span class="token string">&quot;lnj&quot;</span><span class="token punctuation">,</span>

			<span class="token number">33</span><span class="token punctuation">,</span>

		<span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token punctuation">}</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span> <span class="token comment">// {33 [1 3 5] [2 4 6] map[class:one] {lnj 33}}</span>

<span class="token punctuation">}</span>

<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">type</span> Student <span class="token keyword">struct</span> <span class="token punctuation">{</span>

	name <span class="token builtin">string</span>

	age <span class="token builtin">int</span>

<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token keyword">type</span> Demo <span class="token keyword">struct</span> <span class="token punctuation">{</span>

		age <span class="token builtin">int</span> <span class="token comment">// 基本类型作为属性</span>

		arr <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token builtin">int</span> <span class="token comment">// 数组类型作为属性</span>

		sce <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span> <span class="token comment">// 切片类型作为属性</span>

		mp <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span> <span class="token comment">// 字典类型作为属性</span>

		stu Student <span class="token comment">// 结构体类型作为属性</span>

	<span class="token punctuation">}</span>

	<span class="token comment">// 定义结构体变量</span>

	<span class="token keyword">var</span> d Demo

	<span class="token comment">// 可以直接使用基本类型属性</span>

	d<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">33</span>

	<span class="token comment">// 可以直接使用数组类型属性</span>

	d<span class="token punctuation">.</span>arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">666</span>

	<span class="token comment">// 不可以直接使用切片类型属性</span>

	<span class="token comment">//d.sce[0] = 888 // 编译报错</span>

	d<span class="token punctuation">.</span>sce <span class="token operator">=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span> <span class="token comment">// 先创建</span>

	d<span class="token punctuation">.</span>sce<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">888</span> <span class="token comment">// 后使用</span>

	<span class="token comment">// 不可以直接使用字典类型属性</span>

	<span class="token comment">//d.mp[&quot;class&quot;] = &quot;one&quot; // 编译报错</span>

	d<span class="token punctuation">.</span>mp <span class="token operator">=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">)</span><span class="token comment">// 先创建</span>

	d<span class="token punctuation">.</span>mp<span class="token punctuation">[</span><span class="token string">&quot;class&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;one&quot;</span><span class="token comment">// 后使用</span>

	<span class="token comment">// 可以直接使用结构体类型属性</span>

	d<span class="token punctuation">.</span>stu<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;lnj&quot;</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span> <span class="token comment">// {33 [666 0 0] [888 0 0 0 0] map[class:one] {lnj 0}}</span>

<span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><ul><li>slice、map 类型属性默认值是 nil,不能直接使用</li><li>创建时可以按照属性单独存在时初始化方式初始化</li></ul><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><hr><ul><li>结构体类型转换 <ul><li>属性名、属性类型、属性个数、排列顺序都是类型组成部分</li><li>只有属性名、属性类型、属性个数、排列顺序都相同的结构体类型才能转换</li></ul></li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token keyword">type</span> Person1 <span class="token keyword">struct</span> <span class="token punctuation">{</span>
		name <span class="token builtin">string</span>

		age <span class="token builtin">int</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">type</span> Person2 <span class="token keyword">struct</span> <span class="token punctuation">{</span>
		name <span class="token builtin">string</span>

		age <span class="token builtin">int</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">type</span> Person3 <span class="token keyword">struct</span> <span class="token punctuation">{</span>
		age <span class="token builtin">int</span>

		name <span class="token builtin">string</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">type</span> Person4 <span class="token keyword">struct</span> <span class="token punctuation">{</span>
		nm <span class="token builtin">string</span>

		age <span class="token builtin">int</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">type</span> Person5 <span class="token keyword">struct</span> <span class="token punctuation">{</span>
		name <span class="token builtin">string</span>

		age <span class="token builtin">string</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">type</span> Person6 <span class="token keyword">struct</span> <span class="token punctuation">{</span>
		age <span class="token builtin">int</span>

		name <span class="token builtin">string</span>

		gender <span class="token builtin">string</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">var</span> p1 Person1 <span class="token operator">=</span> Person1<span class="token punctuation">{</span><span class="token string">&quot;lnj&quot;</span><span class="token punctuation">,</span> <span class="token number">33</span><span class="token punctuation">}</span>

	<span class="token keyword">var</span> p2 Person2

	<span class="token comment">// 类型名称不一样不能直接赋值(Person1、Person2)</span>

	<span class="token comment">//p2 = p1</span>

	<span class="token comment">// 虽然类型名称不一样, 但是两个类型中的`属性名称`、`属性类型`、`属性个数`、`排列顺序`都一样,所以可以强制转换</span>

	p2 <span class="token operator">=</span> <span class="token function">Person2</span><span class="token punctuation">(</span>p1<span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>p2<span class="token punctuation">)</span>

	<span class="token comment">// 两个结构体类型中的`属性名称`、`属性类型`、`属性个数`都一样,但是`排列顺序`不一样,所以不能强制转换</span>

	<span class="token comment">//var p3 Person3</span>

	<span class="token comment">//p3 = Person3(p1)</span>

	<span class="token comment">//fmt.Println(p3)</span>

	<span class="token comment">// 两个结构体类型中的`属性类型`、`属性个数`、`排列顺序`都一样,但是`属性名称`不一样,所以不能强制转换</span>

	<span class="token comment">//var p4 Person4</span>

	<span class="token comment">//p4 = Person4(p1)</span>

	<span class="token comment">//fmt.Println(p4)</span>

	<span class="token comment">// 两个结构体类型中的`属性名称`、`属性个数`、`排列顺序`都一样,但是`属性类型`不一样,所以不能强制转换</span>

	<span class="token comment">//var p5 Person5</span>

	<span class="token comment">//p5 = Person5(p1)</span>

	<span class="token comment">//fmt.Println(p5)</span>

	<span class="token comment">// 两个结构体类型中的`属性名称`、`属性类型`、`排列顺序`都一样,但是`属性个数`不一样,所以不能强制转换</span>

	<span class="token comment">//var p6 Person6</span>

	<span class="token comment">//p6 = Person6(p1)</span>

	<span class="token comment">//fmt.Println(p6)</span>

<span class="token punctuation">}</span>

</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><hr><ul><li>匿名属性</li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token keyword">type</span> Person <span class="token keyword">struct</span> <span class="token punctuation">{</span>

		<span class="token builtin">int</span>

		<span class="token builtin">float32</span>

		<span class="token builtin">bool</span>

		<span class="token builtin">string</span>

	<span class="token punctuation">}</span>

	<span class="token comment">// 不指定名称初始化</span>

	per1 <span class="token operator">:=</span> Person<span class="token punctuation">{</span><span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">3.14</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token string">&quot;lnj&quot;</span><span class="token punctuation">}</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>per1<span class="token punctuation">)</span>

	<span class="token comment">// 可以把数据类型作为名字显示初始化</span>

	per2 <span class="token operator">:=</span> Person<span class="token punctuation">{</span>

		<span class="token builtin">int</span><span class="token punctuation">:</span> <span class="token number">3</span><span class="token punctuation">,</span>

		<span class="token builtin">float32</span><span class="token punctuation">:</span> <span class="token number">3.14</span><span class="token punctuation">,</span>

		<span class="token builtin">bool</span><span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>

		<span class="token builtin">string</span><span class="token punctuation">:</span> <span class="token string">&quot;lnj&quot;</span><span class="token punctuation">,</span>

	<span class="token punctuation">}</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>per2<span class="token punctuation">)</span>

	<span class="token comment">// 可以把数据类型当做属性名称操作结构体</span>

	per2<span class="token punctuation">.</span><span class="token builtin">int</span> <span class="token operator">=</span> <span class="token number">666</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>per2<span class="token punctuation">.</span><span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token comment">// 666</span>

<span class="token punctuation">}</span>

<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token keyword">type</span> Person <span class="token keyword">struct</span> <span class="token punctuation">{</span>

		name <span class="token builtin">string</span>

		age <span class="token builtin">int</span>

	<span class="token punctuation">}</span>

	<span class="token keyword">type</span> Student <span class="token keyword">struct</span> <span class="token punctuation">{</span>

		Person <span class="token comment">// 匿名属性</span>

		class <span class="token builtin">string</span>

	<span class="token punctuation">}</span>

	stu <span class="token operator">:=</span> Student<span class="token punctuation">{</span>

		Person<span class="token punctuation">{</span><span class="token string">&quot;lnj&quot;</span><span class="token punctuation">,</span> <span class="token number">33</span><span class="token punctuation">}</span><span class="token punctuation">,</span>

		<span class="token string">&quot;学前一班&quot;</span><span class="token punctuation">,</span>

	<span class="token punctuation">}</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>stu<span class="token punctuation">)</span> <span class="token comment">// {{lnj 33} 学前一班}</span>

<span class="token punctuation">}</span>

<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token keyword">type</span> Person <span class="token keyword">struct</span> <span class="token punctuation">{</span>

		name <span class="token builtin">string</span>

		age <span class="token builtin">int</span>

	<span class="token punctuation">}</span>

	<span class="token keyword">type</span> Student <span class="token keyword">struct</span> <span class="token punctuation">{</span>

		Person <span class="token comment">// 匿名属性</span>

		class <span class="token builtin">string</span>

	<span class="token punctuation">}</span>

	stu <span class="token operator">:=</span> Student<span class="token punctuation">{</span>

		Person<span class="token punctuation">{</span><span class="token string">&quot;lnj&quot;</span><span class="token punctuation">,</span> <span class="token number">33</span><span class="token punctuation">}</span><span class="token punctuation">,</span>

		<span class="token string">&quot;学前一班&quot;</span><span class="token punctuation">,</span>

	<span class="token punctuation">}</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>stu<span class="token punctuation">)</span> <span class="token comment">// {{lnj 33} 学前一班}</span>

	<span class="token comment">// 方式一: 先找到匿名属性,再访问匿名属性中的属性</span>

	stu<span class="token punctuation">.</span>Person<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;zs&quot;</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>stu<span class="token punctuation">)</span> <span class="token comment">// {{zs 33} 学前一班}</span>

	<span class="token comment">// 方式二: 直接访问匿名属性中的属性</span>

	<span class="token comment">// 系统会先查找当前结构体有没有名称叫做 name 的属性</span>

	<span class="token comment">// 如果没有会继续查找匿名属性中有没有名称叫做 name 的属性</span>

	stu<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;ww&quot;</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>stu<span class="token punctuation">)</span> <span class="token comment">// {{ww 33} 学前一班}</span>

<span class="token punctuation">}</span>

<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token keyword">type</span> Person <span class="token keyword">struct</span> <span class="token punctuation">{</span>

		name <span class="token builtin">string</span>

		age <span class="token builtin">int</span>

	<span class="token punctuation">}</span>

	<span class="token keyword">type</span> Class <span class="token keyword">struct</span> <span class="token punctuation">{</span>

		name <span class="token builtin">string</span>

		time <span class="token builtin">string</span>

	<span class="token punctuation">}</span>

	<span class="token keyword">type</span> Student <span class="token keyword">struct</span> <span class="token punctuation">{</span>

		Person <span class="token comment">// 匿名属性</span>

		Class <span class="token comment">// 匿名属性</span>

	<span class="token punctuation">}</span>

	stu <span class="token operator">:=</span> Student<span class="token punctuation">{</span>

		Person<span class="token punctuation">{</span><span class="token string">&quot;lnj&quot;</span><span class="token punctuation">,</span> <span class="token number">33</span><span class="token punctuation">}</span><span class="token punctuation">,</span>

		Class<span class="token punctuation">{</span><span class="token string">&quot;学前一班&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;2020-12-12&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span>

	<span class="token punctuation">}</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>stu<span class="token punctuation">)</span> <span class="token comment">// {{lnj 33} {学前一班 2020-12-12}}</span>

	<span class="token comment">// 编译报错, 系统搞不清楚要找哪个 name</span>

	<span class="token comment">//stu.name = &quot;zs&quot;</span>

	stu<span class="token punctuation">.</span>Person<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;zs&quot;</span>

	stu<span class="token punctuation">.</span>Class<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;小学一年级&quot;</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>stu<span class="token punctuation">)</span> <span class="token comment">// {{zs 33} {小学一年级 2020-12-12}}</span>

<span class="token punctuation">}</span>

<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token keyword">type</span> Person <span class="token keyword">struct</span> <span class="token punctuation">{</span>

		name <span class="token builtin">string</span>

	<span class="token punctuation">}</span>

	<span class="token keyword">type</span> Student <span class="token keyword">struct</span> <span class="token punctuation">{</span>

		per Person

		age <span class="token builtin">int</span>

	<span class="token punctuation">}</span>

	<span class="token keyword">var</span> stu Student <span class="token operator">=</span> Student<span class="token punctuation">{</span>Person<span class="token punctuation">{</span><span class="token string">&quot;lnj&quot;</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">}</span>

	<span class="token comment">//fmt.Println(stu.name) // 报错</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>stu<span class="token punctuation">.</span>per<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token comment">// 必须通过属性进一步查找</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>stu<span class="token punctuation">.</span>age<span class="token punctuation">)</span>

<span class="token punctuation">}</span>

<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token keyword">type</span> Person <span class="token keyword">struct</span> <span class="token punctuation">{</span>

		Person <span class="token comment">// 错误</span>

		name <span class="token builtin">string</span>

	<span class="token punctuation">}</span>

	<span class="token keyword">type</span> Student <span class="token keyword">struct</span> <span class="token punctuation">{</span>

		<span class="token operator">*</span>Student <span class="token comment">// 正确, 链表</span>

		age <span class="token builtin">int</span>

	<span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><div class="warning custom-block"><p class="custom-block-title">注意</p><ul><li>如果匿名属性是一个结构体类型, 那么这个结构体类型不能是自己</li><li>只有匿名结构体才支持向上查找</li><li>如果多个匿名属性的属性名称相同,那么不能通过方式二操作,只能通过方式一</li><li>如果结构体作为匿名属性, 想访问匿名属性的属性有两种方式</li><li>Go 语言中最常见的匿名属性是用<code>结构体类型作为匿名属性</code></li><li>没有指定属性名称,只有属性的类型, 我们称之为匿名属性</li><li>任何<code>有命名的数据类型</code>都可以作为匿名属性(int、float、bool、string、struct 等)</li></ul></div><h2 id="普通指针" tabindex="-1">普通指针 <a class="header-anchor" href="#普通指针" aria-hidden="true">#</a></h2><ul><li>和 C 语言一样, 允许用一个变量来存放其它变量的地址, 这种专门用于存储其它变量地址的变量, 我们称之为指针变量</li><li>和 C 语言一样, Go 语言中的指针无论是什么类型占用内存都一样(32 位 4 个字节, 64 位 8 个字节)</li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;fmt&quot;</span>

	<span class="token string">&quot;unsafe&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token keyword">var</span> p1 <span class="token operator">*</span><span class="token builtin">int</span>

	<span class="token keyword">var</span> p2 <span class="token operator">*</span><span class="token builtin">float64</span>

	<span class="token keyword">var</span> p3 <span class="token operator">*</span><span class="token builtin">bool</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>unsafe<span class="token punctuation">.</span><span class="token function">Sizeof</span><span class="token punctuation">(</span>p1<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 8</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>unsafe<span class="token punctuation">.</span><span class="token function">Sizeof</span><span class="token punctuation">(</span>p2<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 8</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>unsafe<span class="token punctuation">.</span><span class="token function">Sizeof</span><span class="token punctuation">(</span>p3<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 8</span>

<span class="token punctuation">}</span>

</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><ul><li>和 C 语言一样, 只要一个指针变量保存了另一个变量对应的内存地址, 那么就可以通过*来访问指针变量指向的存储空间</li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;fmt&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token comment">// 1.定义一个普通变量</span>

	<span class="token keyword">var</span> num <span class="token builtin">int</span> <span class="token operator">=</span> <span class="token number">666</span>

	<span class="token comment">// 2.定义一个指针变量</span>

	<span class="token keyword">var</span> p <span class="token operator">*</span><span class="token builtin">int</span> <span class="token operator">=</span> <span class="token operator">&amp;</span>num

	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%p\n&quot;</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>num<span class="token punctuation">)</span> <span class="token comment">// 0xc042064080</span>

	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%p\n&quot;</span><span class="token punctuation">,</span> p<span class="token punctuation">)</span> <span class="token comment">// 0xc042064080</span>

	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%T\n&quot;</span><span class="token punctuation">,</span> p<span class="token punctuation">)</span> <span class="token comment">// \*int</span>

	<span class="token comment">// 3.通过指针变量操作指向的存储空间</span>

	<span class="token operator">*</span>p <span class="token operator">=</span> <span class="token number">888</span>

	<span class="token comment">// 4.指针变量操作的就是指向变量的存储空间</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span> <span class="token comment">// 888</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token operator">*</span>p<span class="token punctuation">)</span> <span class="token comment">// 888</span>

<span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><hr><h2 id="指向数组指针" tabindex="-1">指向数组指针 <a class="header-anchor" href="#指向数组指针" aria-hidden="true">#</a></h2><ul><li>在 C 语言中, 数组名,&amp;数组名,&amp;数组首元素保存的都是同一个地址</li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-c"><pre><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

<span class="token keyword">int</span> arr<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%p\n&quot;</span><span class="token punctuation">,</span> arr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0060FEA4</span>

<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%p\n&quot;</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>arr<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0060FEA4</span>

<span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%p\n&quot;</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 0060FEA4</span>

<span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><ul><li>在 Go 语言中通过数组名无法直接获取数组的内存地址</li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token keyword">var</span> arr <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token builtin">int</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">}</span>

	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%p\n&quot;</span><span class="token punctuation">,</span> arr<span class="token punctuation">)</span> <span class="token comment">// 乱七八糟东西</span>

	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%p\n&quot;</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>arr<span class="token punctuation">)</span> <span class="token comment">// 0xc0420620a0</span>

	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%p\n&quot;</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span> <span class="token comment">// 0xc0420620a0</span>

<span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><ul><li>在 C 语言中, 无论我们将数组名,&amp;数组名,&amp;数组首元素赋值给指针变量, 都代表指针变量指向了这个数组</li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-c"><pre><code><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h&gt;</span></span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>

  <span class="token keyword">int</span> arr<span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">}</span><span class="token punctuation">;</span>

  <span class="token keyword">int</span> <span class="token operator">*</span>p1 <span class="token operator">=</span> arr<span class="token punctuation">;</span>

  p1<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">6</span><span class="token punctuation">;</span>

  <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%d\n&quot;</span><span class="token punctuation">,</span> arr<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>



  <span class="token keyword">int</span> <span class="token operator">*</span>p2 <span class="token operator">=</span> <span class="token operator">&amp;</span>arr<span class="token punctuation">;</span>

  p2<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">7</span><span class="token punctuation">;</span>

  <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%d\n&quot;</span><span class="token punctuation">,</span> arr<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>



  <span class="token keyword">int</span> <span class="token operator">*</span>p3 <span class="token operator">=</span> <span class="token operator">&amp;</span>arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">;</span>

  p3<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">8</span><span class="token punctuation">;</span>

  <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">&quot;%d\n&quot;</span><span class="token punctuation">,</span> arr<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><ul><li>在 Go 语言中, 因为只有数据类型一模一样才能赋值, 所以只能通过&amp;数组名赋值给指针变量, 才代表指针变量指向了这个数组</li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token comment">// 1.错误, 在 Go 语言中必须类型一模一样才能赋值</span>

	<span class="token comment">// arr 类型是[3]int, p1 的类型是\*[3]int</span>

	<span class="token keyword">var</span> p1 <span class="token operator">*</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token builtin">int</span>

	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%T\n&quot;</span><span class="token punctuation">,</span> arr<span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%T\n&quot;</span><span class="token punctuation">,</span> p1<span class="token punctuation">)</span>

	p1 <span class="token operator">=</span> arr <span class="token comment">// 报错</span>

	p1<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">6</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

	<span class="token comment">// 2.正确, &amp;arr 的类型是*[3]int, p2 的类型也是*[3]int</span>

	<span class="token keyword">var</span> p2 <span class="token operator">*</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token builtin">int</span>

	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%T\n&quot;</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>arr<span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%T\n&quot;</span><span class="token punctuation">,</span> p2<span class="token punctuation">)</span>

	p2 <span class="token operator">=</span> <span class="token operator">&amp;</span>arr

	p2<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">6</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

	<span class="token comment">// 3.错误, &amp;arr[0]的类型是*int, p3 的类型也是*[3]int</span>

	<span class="token keyword">var</span> p3 <span class="token operator">*</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token builtin">int</span>

	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%T\n&quot;</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%T\n&quot;</span><span class="token punctuation">,</span> p3<span class="token punctuation">)</span>

	p3 <span class="token operator">=</span> <span class="token operator">&amp;</span>arr<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token comment">// 报错</span>

	p3<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">6</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><div class="warning custom-block"><p class="custom-block-title">提示</p><ul><li>Go 语言中的指针, 不支持 C 语言中的+1 -1 和++ -- 操作</li></ul></div><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token keyword">var</span> arr <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token builtin">int</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">}</span>

	<span class="token keyword">var</span> p <span class="token operator">*</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token builtin">int</span>

	p <span class="token operator">=</span> <span class="token operator">&amp;</span>arr

	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%p\n&quot;</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>arr<span class="token punctuation">)</span> <span class="token comment">// 0xc0420620a0</span>

	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%p\n&quot;</span><span class="token punctuation">,</span> p<span class="token punctuation">)</span> <span class="token comment">// 0xc0420620a0</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>arr<span class="token punctuation">)</span> <span class="token comment">// &amp;[1 3 5]</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span> <span class="token comment">// &amp;[1 3 5]</span>

	<span class="token comment">// 指针指向数组之后操作数组的几种方式</span>

	<span class="token comment">// 1.直接通过数组名操作</span>

	arr<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">6</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

	<span class="token comment">// 2.通过指针间接操作</span>

	<span class="token punctuation">(</span><span class="token operator">*</span>p<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">7</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token operator">*</span>p<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

	<span class="token comment">// 3.通过指针间接操作</span>

	p<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">8</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>p<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

	<span class="token comment">// 注意点: Go 语言中的指针, 不支持+1 -1 和++ --操作</span>

	<span class="token operator">*</span><span class="token punctuation">(</span>p <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token number">9</span> <span class="token comment">// 报错</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token operator">*</span>p<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token comment">// 报错</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><hr><h2 id="指向切片的指针" tabindex="-1">指向切片的指针 <a class="header-anchor" href="#指向切片的指针" aria-hidden="true">#</a></h2><ul><li>值得注意点的是切片的本质就是一个指针指向数组, 所以指向切片的指针是一个二级指针</li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><h2 id="" tabindex="-1">::: <a class="header-anchor" href="#" aria-hidden="true">#</a></h2><h2 id="指向字典指针" tabindex="-1">指向字典指针 <a class="header-anchor" href="#指向字典指针" aria-hidden="true">#</a></h2><ul><li>与普通指针并无差异</li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token keyword">var</span> dict <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span> <span class="token operator">=</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;lnj&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;age&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;33&quot;</span><span class="token punctuation">}</span>

	<span class="token keyword">var</span> p <span class="token operator">*</span><span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span> <span class="token operator">=</span> <span class="token operator">&amp;</span>dict

	<span class="token punctuation">(</span><span class="token operator">*</span>p<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">&quot;zs&quot;</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>dict<span class="token punctuation">)</span>

<span class="token punctuation">}</span>

</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token comment">// 1.定义一个切片</span>

	<span class="token keyword">var</span> sce <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">}</span>

	<span class="token comment">// 2.打印切片的地址</span>

	<span class="token comment">// 切片变量中保存的地址, 也就是指向的那个数组的地址 sce = 0xc0420620a0</span>

	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;sce = %p\n&quot;</span><span class="token punctuation">,</span> sce<span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>sce<span class="token punctuation">)</span> <span class="token comment">// [1 3 5]</span>

	<span class="token comment">// 切片变量自己的地址, &amp;sce = 0xc04205e3e0</span>

	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;&amp;sce = %p\n&quot;</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>sce<span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>sce<span class="token punctuation">)</span> <span class="token comment">// &amp;[1 3 5]</span>

	<span class="token comment">// 3.定义一个指向切片的指针</span>

	<span class="token keyword">var</span> p <span class="token operator">*</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span>

	<span class="token comment">// 因为必须类型一致才能赋值, 所以将切片变量自己的地址给了指针</span>

	p <span class="token operator">=</span> <span class="token operator">&amp;</span>sce

	<span class="token comment">// 4.打印指针保存的地址</span>

	<span class="token comment">// 直接打印 p 打印出来的是保存的切片变量的地址 p = 0xc04205e3e0</span>

	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;p = %p\n&quot;</span><span class="token punctuation">,</span> p<span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span> <span class="token comment">// &amp;[1 3 5]</span>

	<span class="token comment">// 打印*p 打印出来的是切片变量保存的地址, 也就是数组的地址 *p = 0xc0420620a0</span>

	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;*p = %p\n&quot;</span><span class="token punctuation">,</span> <span class="token operator">*</span>p<span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token operator">*</span>p<span class="token punctuation">)</span> <span class="token comment">// [1 3 5]</span>

	<span class="token comment">// 5.修改切片的值</span>

	<span class="token comment">// 通过\*p 找到切片变量指向的存储空间(数组), 然后修改数组中保存的数据</span>

	<span class="token punctuation">(</span><span class="token operator">*</span>p<span class="token punctuation">)</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">666</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>sce<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><hr><h2 id="指向结构体指针" tabindex="-1">指向结构体指针 <a class="header-anchor" href="#指向结构体指针" aria-hidden="true">#</a></h2><ul><li><p>Go 语言中指向结构体的指针和 C 语言一样</p></li><li><p>结构体和指针</p></li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">type</span> Student <span class="token keyword">struct</span> <span class="token punctuation">{</span>

	name <span class="token builtin">string</span>

	age <span class="token builtin">int</span>

<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token comment">// 创建时利用取地址符号获取结构体变量地址</span>

	<span class="token keyword">var</span> p1 <span class="token operator">=</span> <span class="token operator">&amp;</span>Student<span class="token punctuation">{</span><span class="token string">&quot;lnj&quot;</span><span class="token punctuation">,</span> <span class="token number">33</span><span class="token punctuation">}</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>p1<span class="token punctuation">)</span> <span class="token comment">// &amp;{lnj 33}</span>

	<span class="token comment">// 通过 new 内置函数传入数据类型创建</span>

	<span class="token comment">// 内部会创建一个空的结构体变量, 然后返回这个结构体变量的地址</span>

	<span class="token keyword">var</span> p2 <span class="token operator">=</span> <span class="token function">new</span><span class="token punctuation">(</span>Student<span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>p2<span class="token punctuation">)</span> <span class="token comment">// &amp;{ 0}</span>

<span class="token punctuation">}</span>

<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">type</span> Student <span class="token keyword">struct</span> <span class="token punctuation">{</span>

	name <span class="token builtin">string</span>

	age <span class="token builtin">int</span>

<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token keyword">var</span> p <span class="token operator">=</span> <span class="token operator">&amp;</span>Student<span class="token punctuation">{</span><span class="token punctuation">}</span>

	<span class="token comment">// 方式一: 传统方式操作</span>

	<span class="token comment">// 修改结构体中某个属性对应的值</span>

	<span class="token comment">// 注意: 由于.运算符优先级比\*高, 所以一定要加上()</span>

	<span class="token punctuation">(</span><span class="token operator">*</span>p<span class="token punctuation">)</span><span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;lnj&quot;</span>

	<span class="token comment">// 获取结构体中某个属性对应的值</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token operator">*</span>p<span class="token punctuation">)</span><span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token comment">// lnj</span>

	<span class="token comment">// 方式二: 通过 Go 语法糖操作</span>

	<span class="token comment">// Go 语言作者为了程序员使用起来更加方便, 在操作指向结构体的指针时可以像操作接头体变量一样通过.来操作</span>

	<span class="token comment">// 编译时底层会自动转发为(\*p).age 方式</span>

	p<span class="token punctuation">.</span>age <span class="token operator">=</span> <span class="token number">33</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span>age<span class="token punctuation">)</span> <span class="token comment">// 33</span>

<span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><ul><li>利用结构体指针操作结构体属性</li><li>创建结构体指针变量有两种方式</li></ul><h2 id="指针作为函数参数和返回值" tabindex="-1">指针作为函数参数和返回值 <a class="header-anchor" href="#指针作为函数参数和返回值" aria-hidden="true">#</a></h2><ul><li>如果指针类型作为函数参数, 修改形参会影响实参</li><li>不能将函数内的指向局部变量的指针作为返回值, 函数结束指向空间会被释放</li><li>可以将函数内的局部变量作为返回值, 本质是拷贝一份</li></ul><h2 id="方法" tabindex="-1">方法 <a class="header-anchor" href="#方法" aria-hidden="true">#</a></h2><ul><li><p>Go 语言中的方法其实就是一个特殊函数, 只不过这个函数是和某种属性类型绑定在一起的而已</p></li><li><p>Go 语言中的方法<code>一般用于</code>将<code>函数和结构体绑定在一起</code>, 让结构体除了能够保存数据外还能具备某些行为</p></li><li><p>将函数和数据类型绑定的格式</p></li><li><p>只需要在函数名称前面加上(接收者 数据类型), 即可将函数和某种数据类型绑定在一起</p></li></ul><div class="language-go"><pre><code><span class="token keyword">func</span> <span class="token punctuation">(</span>接收者 数据类型<span class="token punctuation">)</span>方法名称<span class="token punctuation">(</span>形参列表<span class="token punctuation">)</span><span class="token punctuation">(</span>返回值列表<span class="token punctuation">)</span><span class="token punctuation">{</span>
  方法体
<span class="token punctuation">}</span>
</code></pre></div><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>给结构体添加一个方法,此时结构体除了可以保存数据,还具备说出自己名字和年龄的行为</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token comment">// 1.定义一个结构体</span>

<span class="token keyword">type</span> Person <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	name <span class="token builtin">string</span>

	age <span class="token builtin">int</span>
<span class="token punctuation">}</span>

<span class="token comment">// 2.定义一个函数, 并将这个函数和 Person 结构体绑定在一起</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>p Person<span class="token punctuation">)</span> <span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;my name is&quot;</span><span class="token punctuation">,</span> p<span class="token punctuation">.</span>name<span class="token punctuation">,</span> <span class="token string">&quot;my age is&quot;</span><span class="token punctuation">,</span> p<span class="token punctuation">.</span>age<span class="token punctuation">)</span>

<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token comment">// 3.创建一个结构体变量</span>

	per <span class="token operator">:=</span> Person<span class="token punctuation">{</span><span class="token string">&quot;lnj&quot;</span><span class="token punctuation">,</span> <span class="token number">33</span><span class="token punctuation">}</span>

	<span class="token comment">// 4.利用结构体变量调用和结构体绑定的方法</span>

	<span class="token comment">// 调用时会自动将调用者(per)传递给方法的接收者(p)</span>

	<span class="token comment">// 所以可以在方法内部通过 p 方法结构体变量的属性</span>

	per<span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>

</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><hr><ul><li>方法和函数异同</li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">type</span> Person <span class="token keyword">struct</span> <span class="token punctuation">{</span>

	name <span class="token builtin">string</span>

	age <span class="token builtin">int</span>

<span class="token punctuation">}</span>

<span class="token comment">// 定义一个方法</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>p Person<span class="token punctuation">)</span><span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;say 方法&quot;</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>

<span class="token comment">// 定义一个函数</span>

<span class="token keyword">func</span> <span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;say 函数&quot;</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	p <span class="token operator">:=</span> Person<span class="token punctuation">{</span><span class="token string">&quot;lnj&quot;</span><span class="token punctuation">,</span> <span class="token number">33</span><span class="token punctuation">}</span>

	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%T\n&quot;</span><span class="token punctuation">,</span> p<span class="token punctuation">.</span>say<span class="token punctuation">)</span> <span class="token comment">// func()</span>

	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%T\n&quot;</span><span class="token punctuation">,</span> say<span class="token punctuation">)</span> <span class="token comment">// func()</span>

	<span class="token comment">// 定义一个保存没有形参没有返回值的函数类型变量</span>

	<span class="token keyword">var</span> fn <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	<span class="token comment">// 利用函数类型变量保存一个方法</span>

	fn <span class="token operator">=</span> p<span class="token punctuation">.</span>say

	<span class="token comment">// 利用函数类型变量调用一个方法</span>

	<span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	<span class="token comment">// 利用函数类型变量保存一个函数</span>

	fn <span class="token operator">=</span> say

	<span class="token comment">// 利用函数类型变量调用一个函数</span>

	<span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>

<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">type</span> Person <span class="token keyword">struct</span> <span class="token punctuation">{</span>

	name <span class="token builtin">string</span>

	age <span class="token builtin">int</span>

<span class="token punctuation">}</span>

<span class="token comment">// 定义一个方法</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>p Person<span class="token punctuation">)</span><span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;my name is&quot;</span><span class="token punctuation">,</span> p<span class="token punctuation">.</span>name<span class="token punctuation">,</span> <span class="token string">&quot;my age is&quot;</span><span class="token punctuation">,</span> p<span class="token punctuation">.</span>age<span class="token punctuation">)</span>

<span class="token punctuation">}</span>

<span class="token comment">// 定义一个函数</span>

<span class="token keyword">func</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;test&quot;</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	per <span class="token operator">:=</span> Person<span class="token punctuation">{</span><span class="token string">&quot;lnj&quot;</span><span class="token punctuation">,</span> <span class="token number">33</span><span class="token punctuation">}</span>

	per<span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 方法只能通过绑定类型的变量调用</span>

	<span class="token comment">//say() // 编译报错, 不能直接调用</span>

	<span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 编译通过, 可以直接调用</span>

<span class="token punctuation">}</span>

<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">type</span> Person <span class="token keyword">struct</span> <span class="token punctuation">{</span>

	name <span class="token builtin">string</span>

	age <span class="token builtin">int</span>

<span class="token punctuation">}</span>

<span class="token comment">// 定义一个方法</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>p Person<span class="token punctuation">)</span><span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;my name is&quot;</span><span class="token punctuation">,</span> p<span class="token punctuation">.</span>name<span class="token punctuation">,</span> <span class="token string">&quot;my age is&quot;</span><span class="token punctuation">,</span> p<span class="token punctuation">.</span>age<span class="token punctuation">)</span>

<span class="token punctuation">}</span>

<span class="token comment">// 定义一个函数</span>

<span class="token keyword">func</span> <span class="token function">test</span><span class="token punctuation">(</span>p Person<span class="token punctuation">)</span> <span class="token punctuation">{</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;my name is&quot;</span><span class="token punctuation">,</span> p<span class="token punctuation">.</span>name<span class="token punctuation">,</span> <span class="token string">&quot;my age is&quot;</span><span class="token punctuation">,</span> p<span class="token punctuation">.</span>age<span class="token punctuation">)</span>

<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	per <span class="token operator">:=</span> Person<span class="token punctuation">{</span><span class="token string">&quot;lnj&quot;</span><span class="token punctuation">,</span> <span class="token number">33</span><span class="token punctuation">}</span>

	per<span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// my name is lnj my age is 33</span>

	<span class="token function">test</span><span class="token punctuation">(</span>per<span class="token punctuation">)</span> <span class="token comment">// my name is lnj my age is 33</span>

<span class="token punctuation">}</span>

<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">type</span> Person <span class="token keyword">struct</span> <span class="token punctuation">{</span>

	name <span class="token builtin">string</span>

	age <span class="token builtin">int</span>

<span class="token punctuation">}</span>

<span class="token comment">// 接收者是一个变量</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>p Person<span class="token punctuation">)</span><span class="token function">setName</span><span class="token punctuation">(</span>name <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	p<span class="token punctuation">.</span>name <span class="token operator">=</span> name

<span class="token punctuation">}</span>

<span class="token comment">// 接收者是一个指针</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>p <span class="token operator">*</span>Person<span class="token punctuation">)</span><span class="token function">setAge</span><span class="token punctuation">(</span>age <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	p<span class="token punctuation">.</span>age <span class="token operator">=</span> age

<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	per <span class="token operator">:=</span> Person<span class="token punctuation">{</span><span class="token string">&quot;lnj&quot;</span><span class="token punctuation">,</span> <span class="token number">33</span><span class="token punctuation">}</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>per<span class="token punctuation">)</span> <span class="token comment">// {lnj 33}</span>

	<span class="token comment">// 值传递, 方法内部修改不会影响方法外部</span>

	per<span class="token punctuation">.</span><span class="token function">setName</span><span class="token punctuation">(</span><span class="token string">&quot;zs&quot;</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>per<span class="token punctuation">)</span> <span class="token comment">// {lnj 33}</span>

	p <span class="token operator">:=</span> <span class="token operator">&amp;</span>per

	<span class="token comment">// 地址传递, 方法内部修改会影响方法外部</span>

	<span class="token punctuation">(</span><span class="token operator">*</span>p<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setAge</span><span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>per<span class="token punctuation">)</span> <span class="token comment">// {lnj 18}</span>

<span class="token punctuation">}</span>

<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">type</span> Person <span class="token keyword">struct</span> <span class="token punctuation">{</span>

	name <span class="token builtin">string</span>

	age <span class="token builtin">int</span>

<span class="token punctuation">}</span>

<span class="token comment">// 接收者是一个变量</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>p Person<span class="token punctuation">)</span><span class="token function">setName</span><span class="token punctuation">(</span>name <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	p<span class="token punctuation">.</span>name <span class="token operator">=</span> name

<span class="token punctuation">}</span>

<span class="token comment">// 接收者是一个指针</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>p <span class="token operator">*</span>Person<span class="token punctuation">)</span><span class="token function">setAge</span><span class="token punctuation">(</span>age <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	p<span class="token punctuation">.</span>age <span class="token operator">=</span> age

<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	per <span class="token operator">:=</span> Person<span class="token punctuation">{</span><span class="token string">&quot;lnj&quot;</span><span class="token punctuation">,</span> <span class="token number">33</span><span class="token punctuation">}</span>

	<span class="token comment">// 方式一: 先拿到指针,然后再通过指针调用</span>

	p <span class="token operator">:=</span> <span class="token operator">&amp;</span>per

	<span class="token punctuation">(</span><span class="token operator">*</span>p<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">setAge</span><span class="token punctuation">(</span><span class="token number">18</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>per<span class="token punctuation">)</span> <span class="token comment">// {lnj 18}</span>

	<span class="token comment">// 方式二: 直接利用变量调用, 底层会自动获取变量地址传递给接收者</span>

	per<span class="token punctuation">.</span><span class="token function">setAge</span><span class="token punctuation">(</span><span class="token number">66</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>per<span class="token punctuation">)</span> <span class="token comment">// {lnj 66}</span>

<span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><div class="warning custom-block"><p class="custom-block-title">注意</p><ul><li>地址传递的几种调用方式</li><li>既然可以看做形参, 那么自然也具备形参的特点(值传递和地址传递)</li><li>方法的接收者可以看做就是函数的一个形参</li><li>方法只能通过绑定类型的变量调用, 函数可以直接调用</li><li>方法的数据类型也是函数类型, 所以也可以定义变量保存(作为参数返回值等)</li></ul></div><hr><h2 id="接口" tabindex="-1">接口 <a class="header-anchor" href="#接口" aria-hidden="true">#</a></h2><ul><li>Go 语言中的接口和现实生活中的 USB 插槽很像, 它定义某种标准, 但不关心具体实现 <ul><li>无论你到哪个商店里面去购买 USB 线,只要你告诉商家你需要一根 USB 线, 买回家之后就一定能插到电脑上使用. 之所以能用,原因就是电脑厂商在指定了 USB 插槽的标准(尺寸、排线等等), 生产厂家只需要按照标准生产即可</li><li>同样在 Go 语言中我们可以通过接口来定义某种标准(函数声明),但不用不关心具体实现(函数实现), 只要将来有人按照标准实现了接口,我们就可以使用</li></ul></li><li>定义接口格式</li></ul><div class="language-go"><pre><code><span class="token keyword">type</span> 接口名称 <span class="token keyword">interface</span><span class="token punctuation">{</span>
  函数声明
<span class="token punctuation">}</span>
</code></pre></div><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>定义一个通用的 USB 接口</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token comment">// 1.定义一个接口</span>

<span class="token keyword">type</span> usber <span class="token keyword">interface</span> <span class="token punctuation">{</span>
	<span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	<span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> Computer <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	name <span class="token builtin">string</span>

	model <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token comment">// 2.实现接口中的所有方法</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>cm Computer<span class="token punctuation">)</span> <span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;启动电脑&quot;</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>cm Computer<span class="token punctuation">)</span> <span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;关闭电脑&quot;</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>

<span class="token keyword">type</span> Phone <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	name <span class="token builtin">string</span>

	model <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token comment">// 2.实现接口中的所有方法</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>p Phone<span class="token punctuation">)</span> <span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;启动手机&quot;</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>p Phone<span class="token punctuation">)</span> <span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;关闭手机&quot;</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>

<span class="token comment">// 3.使用接口定义的方法</span>

<span class="token keyword">func</span> <span class="token function">working</span><span class="token punctuation">(</span>u usber<span class="token punctuation">)</span> <span class="token punctuation">{</span>

	u<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	u<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	cm <span class="token operator">:=</span> Computer<span class="token punctuation">{</span><span class="token string">&quot;戴尔&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;F1234&quot;</span><span class="token punctuation">}</span>

	<span class="token function">working</span><span class="token punctuation">(</span>cm<span class="token punctuation">)</span> <span class="token comment">// 启动电脑 关闭电脑</span>

	p <span class="token operator">:=</span> Phone<span class="token punctuation">{</span><span class="token string">&quot;华为&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;M10&quot;</span><span class="token punctuation">}</span>

	<span class="token function">working</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span> <span class="token comment">// 启动手机 关闭手机</span>

<span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><ul><li>接口注意点</li></ul><div class="language-go"><pre><code><span class="token keyword">type</span> usber <span class="token keyword">interface</span> <span class="token punctuation">{</span>

  <span class="token keyword">func</span> <span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">// 错误</span>

    fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;启动&quot;</span><span class="token punctuation">)</span>

  <span class="token punctuation">}</span>

  <span class="token keyword">func</span> <span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 错误</span>

  fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;停止&quot;</span><span class="token punctuation">)</span>

  <span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><div class="language-go"><pre><code><span class="token keyword">type</span> usber <span class="token keyword">interface</span> <span class="token punctuation">{</span>

  name <span class="token builtin">string</span> <span class="token comment">// 错误</span>

  <span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

  <span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>
</code></pre></div><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token comment">// 1.定义一个接口</span>

<span class="token keyword">type</span> usber <span class="token keyword">interface</span> <span class="token punctuation">{</span>
	<span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	<span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> Computer <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	name <span class="token builtin">string</span>

	model <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token comment">// 2.实现接口中的所有方法</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>cm Computer<span class="token punctuation">)</span> <span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;启动电脑&quot;</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>cm Computer<span class="token punctuation">)</span> <span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;关闭电脑&quot;</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>

<span class="token comment">// 2.只实现了接口中部分方法</span>

<span class="token keyword">type</span> Phone <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	name <span class="token builtin">string</span>

	model <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>p Phone<span class="token punctuation">)</span> <span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;启动手机&quot;</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token comment">// 1.定义一个 usber 接口类型变量</span>

	<span class="token keyword">var</span> i usber

	<span class="token comment">// 2.用 usber 接口类型变量接收 Computer 类型结构体</span>

	i <span class="token operator">=</span> Computer<span class="token punctuation">{</span><span class="token string">&quot;戴尔&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;F1234&quot;</span><span class="token punctuation">}</span> <span class="token comment">// 实现了所有方法, 不会报错</span>

	<span class="token comment">// 3.用 usber 接口类型变量接收 Phone 类型结构体</span>

	<span class="token comment">//i = Phone{&quot;华为&quot;, &quot;M10&quot;} // 只实现了部分方法, 会报错</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>

<span class="token punctuation">}</span>

</code></pre></div><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">type</span> A <span class="token keyword">interface</span> <span class="token punctuation">{</span>
	<span class="token function">fna</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> B <span class="token keyword">interface</span> <span class="token punctuation">{</span>
	<span class="token function">fnb</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> C <span class="token keyword">interface</span> <span class="token punctuation">{</span>
	A <span class="token comment">// 嵌入 A 接口</span>

	B <span class="token comment">// 嵌入 B 接口</span>

	<span class="token function">fnc</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> Person <span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>p Person<span class="token punctuation">)</span> <span class="token function">fna</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;实现 A 接口中的方法&quot;</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>p Person<span class="token punctuation">)</span> <span class="token function">fnb</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;实现 B 接口中的方法&quot;</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>p Person<span class="token punctuation">)</span> <span class="token function">fnc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;实现 C 接口中的方法&quot;</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	p <span class="token operator">:=</span> Person<span class="token punctuation">{</span><span class="token punctuation">}</span>

	p<span class="token punctuation">.</span><span class="token function">fna</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 实现 A 接口中的方法</span>

	p<span class="token punctuation">.</span><span class="token function">fnb</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 实现 B 接口中的方法</span>

	p<span class="token punctuation">.</span><span class="token function">fnc</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 实现 C 接口中的方法</span>

<span class="token punctuation">}</span>

</code></pre></div><div class="language-go"><pre><code><span class="token keyword">type</span> A <span class="token keyword">interface</span> <span class="token punctuation">{</span>
  A <span class="token comment">// 报错, 不能自己搞自己</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-go"><pre><code><span class="token keyword">type</span> A <span class="token keyword">interface</span> <span class="token punctuation">{</span>
  <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">type</span> B <span class="token keyword">interface</span> <span class="token punctuation">{</span>
  <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">type</span> C <span class="token keyword">interface</span> <span class="token punctuation">{</span>
  A
  B <span class="token comment">// 报错, A接口和B接口都有名称叫做fn的方法</span>
  <span class="token function">fnc</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">type</span> aer <span class="token keyword">interface</span> <span class="token punctuation">{</span>
	<span class="token function">fna</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">type</span> ber <span class="token keyword">interface</span> <span class="token punctuation">{</span>
	aer
	<span class="token function">fnb</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// Person实现了超集接口所有方法</span>
<span class="token keyword">type</span> Person <span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>p Person<span class="token punctuation">)</span> <span class="token function">fna</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;实现A接口中的方法&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">func</span> <span class="token punctuation">(</span>p Person<span class="token punctuation">)</span> <span class="token function">fnb</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;实现B接口中的方法&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// Student实现了子集接口所有方法</span>
<span class="token keyword">type</span> Student <span class="token keyword">struct</span><span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>p Student<span class="token punctuation">)</span> <span class="token function">fna</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;实现A接口中的方法&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> i ber
	<span class="token comment">// 子集接口变量不能转换为超集接口变量</span>
	<span class="token comment">//i = Student{}</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
	<span class="token keyword">var</span> j aer
	<span class="token comment">// 超集接口变量可以自动转换成子集接口变量,</span>
	j <span class="token operator">=</span> Person<span class="token punctuation">{</span><span class="token punctuation">}</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>j<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre></div><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// 1.定义一个空接口类型变量</span>
	<span class="token keyword">var</span> i <span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
	<span class="token comment">// 2.用接口类型保存任意类型数据</span>
	i <span class="token operator">=</span> <span class="token number">123</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token comment">// 123</span>
	i <span class="token operator">=</span> <span class="token number">3.14</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token comment">// 3.14</span>
	i <span class="token operator">=</span> <span class="token string">&quot;lnj&quot;</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token comment">// lnj</span>
	i <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">}</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token comment">// [1 3 5]</span>
	i <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">2</span><span class="token punctuation">,</span> <span class="token number">4</span><span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">}</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token comment">// [2 4 6]</span>
	i <span class="token operator">=</span> <span class="token keyword">map</span><span class="token punctuation">[</span><span class="token builtin">string</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;lnj&quot;</span><span class="token punctuation">}</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token comment">// map[name:lnj]</span>
	i <span class="token operator">=</span> Computer<span class="token punctuation">{</span><span class="token string">&quot;戴尔&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;F1234&quot;</span><span class="token punctuation">}</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token comment">// {戴尔 F1234}</span>
<span class="token punctuation">}</span>

</code></pre></div><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token comment">// 1.定义一个接口</span>
<span class="token keyword">type</span> usber <span class="token keyword">interface</span> <span class="token punctuation">{</span>
	<span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token comment">// 2.自定义int类型</span>
<span class="token keyword">type</span> integer <span class="token builtin">int</span>

<span class="token comment">// 2.实现接口中的所有方法</span>
<span class="token keyword">func</span> <span class="token punctuation">(</span>i integer<span class="token punctuation">)</span> <span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;int类型实现接口&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">func</span> <span class="token punctuation">(</span>i integer<span class="token punctuation">)</span> <span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;int类型实现接口&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">var</span> i integer <span class="token operator">=</span> <span class="token number">666</span>
	i<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// int类型实现接口</span>
	i<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token comment">// int类型实现接口</span>
<span class="token punctuation">}</span>

</code></pre></div><div class="warning custom-block"><p class="custom-block-title">注意</p><ul><li>只要是自定义类型就可以实现接口</li><li>空接口类型可以接收任意类型数据</li><li>超集接口变量可以自动转换成子集接口变量, 子集接口变量不能转换为超集接口变量(本质就是没有实现所有方法)</li><li>接口中嵌入接口时不能出现相同的方法名称</li><li>和结构体一样,接口中嵌入接口时不能嵌入自己</li><li>和结构体一样,接口中也可以嵌入接口</li><li>只有实现了接口中所有的方法, 才算实现了接口, 才能用<code>该接口类型</code>接收</li><li>接口中只能有方法什么不能有字段</li><li>接口中只能有方法的声明不能有方法的实现</li></ul></div><ul><li>接口类型转换</li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">type</span> studier <span class="token keyword">interface</span> <span class="token punctuation">{</span>

	<span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>

<span class="token keyword">type</span> Person <span class="token keyword">struct</span> <span class="token punctuation">{</span>

	name <span class="token builtin">string</span>

	age <span class="token builtin">int</span>

<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>p Person<span class="token punctuation">)</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span>name<span class="token punctuation">,</span> <span class="token string">&quot;正在学习&quot;</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token comment">// 1.定义一个接口类型变量</span>

	<span class="token keyword">var</span> s studier

	<span class="token comment">// 2.用接口类型变量接收实现了接口的结构体</span>

	s <span class="token operator">=</span> Person<span class="token punctuation">{</span><span class="token string">&quot;lnj&quot;</span><span class="token punctuation">,</span> <span class="token number">33</span><span class="token punctuation">}</span>

	s<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;zs&quot;</span> <span class="token comment">// 报错, 由于 s 是接口类型, 所以不能访问属性</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span>

<span class="token punctuation">}</span>

<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">type</span> studier <span class="token keyword">interface</span> <span class="token punctuation">{</span>

	<span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>

<span class="token keyword">type</span> Person <span class="token keyword">struct</span> <span class="token punctuation">{</span>

	name <span class="token builtin">string</span>

	age <span class="token builtin">int</span>

<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>p Person<span class="token punctuation">)</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span>name<span class="token punctuation">,</span> <span class="token string">&quot;正在学习&quot;</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token keyword">var</span> s studier

	s <span class="token operator">=</span> Person<span class="token punctuation">{</span><span class="token string">&quot;lnj&quot;</span><span class="token punctuation">,</span> <span class="token number">33</span><span class="token punctuation">}</span>

	s<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;zs&quot;</span> <span class="token comment">// 报错, 由于 s 是接口类型, 所以不能访问属性</span>

	<span class="token comment">// 2.定义一个结构体类型变量</span>

	<span class="token comment">//var p Person</span>

	<span class="token comment">// 不能用强制类型转换方式将接口类型转换为原始类型</span>

	<span class="token comment">//p = Person(s) // 报错</span>

	<span class="token comment">// 2.利用 ok-idiom 模式将接口类型还原为原始类型</span>

	<span class="token comment">// s.(Person)这种格式我们称之为: 类型断言</span>

	<span class="token keyword">if</span> p<span class="token punctuation">,</span> ok <span class="token operator">:=</span> s<span class="token punctuation">.</span><span class="token punctuation">(</span>Person<span class="token punctuation">)</span><span class="token punctuation">;</span> ok <span class="token punctuation">{</span>

		p<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;zs&quot;</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span>

	<span class="token punctuation">}</span>

	<span class="token comment">// 2.通过 type switch 将接口类型还原为原始类型</span>

	<span class="token comment">// 注意: type switch 不支持 fallthrought</span>

	<span class="token keyword">switch</span> p <span class="token operator">:=</span> s<span class="token punctuation">.</span><span class="token punctuation">(</span><span class="token keyword">type</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token keyword">case</span> Person<span class="token punctuation">:</span>

		p<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">&quot;zs&quot;</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>p<span class="token punctuation">)</span> <span class="token comment">// {zs 33}</span>

	<span class="token keyword">default</span><span class="token punctuation">:</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;不是Person类型&quot;</span><span class="token punctuation">)</span>

	<span class="token punctuation">}</span>

<span class="token punctuation">}</span>

<span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">type</span> studier <span class="token keyword">interface</span> <span class="token punctuation">{</span>

	<span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>

<span class="token keyword">type</span> Person <span class="token keyword">struct</span> <span class="token punctuation">{</span>

	name <span class="token builtin">string</span>

	age <span class="token builtin">int</span>

<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>p Person<span class="token punctuation">)</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span>name<span class="token punctuation">,</span> <span class="token string">&quot;正在学习&quot;</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token comment">// 1.定义一个抽象接口类型</span>

	<span class="token keyword">var</span> i <span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span>

	i <span class="token operator">=</span> Person<span class="token punctuation">{</span><span class="token string">&quot;lnj&quot;</span><span class="token punctuation">,</span> <span class="token number">33</span><span class="token punctuation">}</span>

	<span class="token comment">// 不能调用 read 方法, 因为抽象接口中没有这个方法</span>

	<span class="token comment">//i.read()</span>

	<span class="token comment">// 2.利用 ok-idiom 模式将抽象接口转换为具体接口</span>

	<span class="token keyword">if</span> s<span class="token punctuation">,</span> ok <span class="token operator">:=</span> i<span class="token punctuation">.</span><span class="token punctuation">(</span>studier<span class="token punctuation">)</span><span class="token punctuation">;</span> ok<span class="token punctuation">{</span>

		<span class="token comment">// 可以调用 read 方法,因为 studier 中声明了这个方法,并且结构体中实现了这个方法</span>

		s<span class="token punctuation">.</span><span class="token function">read</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// lnj 正在学习</span>

	<span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><ul><li>除了可以将接口类型转换为原始类型以外, 企业开发中有时候可能我们还需要将抽象接口类型转换为具体接口类型</li><li>想要访问变量中的属性, 必须将接口类型还原为原始类型</li><li>接口类型变量可以接收实现了该接口类型的变量, 但是只能调用该变量中的方法, 不能访问该变量的属性</li></ul><h2 id="面向对象基本概念" tabindex="-1">面向对象基本概念 <a class="header-anchor" href="#面向对象基本概念" aria-hidden="true">#</a></h2><h2 id="面向对象思想" tabindex="-1">面向对象思想 <a class="header-anchor" href="#面向对象思想" aria-hidden="true">#</a></h2><ul><li>面向对象(Object Oriented,OO)是软件开发方法</li><li>面向对象是一种对现实世界抽象的理解，是计算机编程技术发展到一定阶段后的产物</li><li>Object Oriented Programming-OOP ——面向对象编程</li></ul><hr><h2 id="面向对象和面向过程区别" tabindex="-1">面向对象和面向过程区别 <a class="header-anchor" href="#面向对象和面向过程区别" aria-hidden="true">#</a></h2><ul><li><p>面向对象是相对面向过程而言</p></li><li><p>面向对象和面向过程都是一种思想</p></li><li><p>面向过程</p><ul><li>强调的是功能行为</li><li>关注的是解决问题需要哪些步骤</li></ul></li><li><p>回想下前面我们完成一个需求的步骤：</p><ul><li>首先搞清楚我们要做什么</li><li>然后分析怎么做</li><li>最后我用代码体现</li><li>一步一步去实现，而具体的每一步都需要我们去实现和操作</li></ul></li><li><p>在上面每一个具体步骤中我们都是参与者， 并且需要面对具体的每一个步骤和过程， 这就是面向过程最直接的体现</p></li></ul><hr><ul><li>面向对象 <ul><li>将功能封装进对象，强调具备了功能的对象</li><li>关注的是解决问题需要哪些对象</li></ul></li><li>当需求单一， 或者简单时， 我们一步一步去操作没问题， 并且效率也挺高。可随着需求的更改， 功能的增加， 发现需要面对每一个步骤非常麻烦， 这时就开始思索， 能不能把这些步骤和功能再进行封装， 封装时根据不同的功能，进行不同的封装，功能类似的封装在一起。这样结构就清晰多了， 用的时候， 找到对应的类就可以了， 这就是面向对象思想</li></ul><hr><h2 id="面向对象的特点" tabindex="-1">面向对象的特点 <a class="header-anchor" href="#面向对象的特点" aria-hidden="true">#</a></h2><ul><li>是一种符合人们思考习惯的思想</li><li>可以将复杂的事情简单化</li><li>将程序员从执行者转换成了指挥者</li><li>完成需求时： <ul><li>先要去找具有所需的功能的对象来用</li><li>如果该对象不存在，那么创建一个具有所需功能的对象</li><li>这样简化开发并提高复用</li></ul></li></ul><hr><h2 id="类与对象的关系" tabindex="-1">类与对象的关系 <a class="header-anchor" href="#类与对象的关系" aria-hidden="true">#</a></h2><ul><li><p>面向对象的核心就是对象,那怎么创建对象?</p><ul><li><p>现实生活中可以根据模板创建对象,编程语言也一样,也必须先有一个模板,在这个模板中说清楚将来创建出来的对象有哪些<code>属性</code>和<code>行为</code></p></li><li><p>Go 语言中的类相当于图纸，用来描述一类事物。也就是说要想创建对象必须先有类</p></li><li><p>Go 语言利用类来创建对象，对象是类的具体存在, 因此面向对象解决问题应该是先考虑需要设计哪些类，再利用类创建多少个对象</p></li></ul></li></ul><hr><h2 id="如何设计一个类" tabindex="-1">如何设计一个类 <a class="header-anchor" href="#如何设计一个类" aria-hidden="true">#</a></h2><ul><li>生活中描述事物无非就是描述事物的<code>属性</code>和<code>行为</code>。 <ul><li>如：人有身高，体重等属性，有说话，打架等行为。</li></ul></li></ul><div class="language-go"><pre><code>事物名称<span class="token punctuation">(</span>类名<span class="token punctuation">)</span><span class="token punctuation">:</span>人<span class="token punctuation">(</span>Person<span class="token punctuation">)</span>

属性<span class="token punctuation">:</span>身高<span class="token punctuation">(</span>height<span class="token punctuation">)</span>、年龄<span class="token punctuation">(</span>age<span class="token punctuation">)</span>

行为<span class="token punctuation">(</span>功能<span class="token punctuation">)</span><span class="token punctuation">:</span>跑<span class="token punctuation">(</span>run<span class="token punctuation">)</span>、打架<span class="token punctuation">(</span>fight<span class="token punctuation">)</span>
</code></pre></div><ul><li>Go 语言中用类来描述事物也是如此 <ul><li>属性：对应类中的成员变量。</li><li>行为：对应类中的成员方法。</li></ul></li><li>定义类其实在定义类中的成员(成员变量和成员方法)</li><li>拥有相同或者类似<code>属性</code>（状态特征）和<code>行为</code>（能干什么事）的对象都可以抽像成为一个类</li></ul><hr><h2 id="如何分析一个类" tabindex="-1">如何分析一个类 <a class="header-anchor" href="#如何分析一个类" aria-hidden="true">#</a></h2><ul><li>一般名词都是类(名词提炼法) <ul><li>飞机发射两颗炮弹摧毁了 8 辆装甲车</li></ul></li></ul><div class="language-go"><pre><code>  飞机

  炮弹

  装甲车
</code></pre></div><ul><li>隔壁老王在公车上牵着一条叼着热狗的草泥马</li></ul><div class="language-go"><pre><code>  老王

  热狗

  草泥马
</code></pre></div><hr><h2 id="如何定义一个类" tabindex="-1">如何定义一个类 <a class="header-anchor" href="#如何定义一个类" aria-hidden="true">#</a></h2><ul><li>类是用于描述事物的的属性和行为的, 而 Go 语言中的结构体正好可以用于描述事物的属性和行为</li><li>所以在 Go 语言中我们使用结构体来定义一个类型</li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">type</span> Person <span class="token keyword">struct</span> <span class="token punctuation">{</span>

	name <span class="token builtin">string</span> <span class="token comment">// 人的属性</span>

	age <span class="token builtin">int</span> <span class="token comment">// 人的属性</span>

<span class="token punctuation">}</span>

<span class="token comment">// 人的行为</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>p Person<span class="token punctuation">)</span><span class="token function">Say</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;my name is&quot;</span><span class="token punctuation">,</span> p<span class="token punctuation">.</span>name<span class="token punctuation">,</span> <span class="token string">&quot;my age is&quot;</span><span class="token punctuation">,</span> p<span class="token punctuation">.</span>age<span class="token punctuation">)</span>

<span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><h2 id="如何通过类创建一个对象" tabindex="-1">如何通过类创建一个对象 <a class="header-anchor" href="#如何通过类创建一个对象" aria-hidden="true">#</a></h2><ul><li>不过就是创建结构体的时候, 根据每个对象的特征赋值不同的属性罢了</li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>创建一个结构体变量</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code>p1 <span class="token operator">:=</span> Person<span class="token punctuation">{</span><span class="token string">&quot;lnj&quot;</span><span class="token punctuation">,</span> <span class="token number">33</span><span class="token punctuation">}</span>

per<span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

p2 <span class="token operator">:=</span> Person<span class="token punctuation">{</span><span class="token string">&quot;zs&quot;</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">}</span>

per<span class="token punctuation">.</span><span class="token function">Say</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><hr><h2 id="不同包中变量、函数、方法、类型公私有问题" tabindex="-1">不同包中变量、函数、方法、类型公私有问题 <a class="header-anchor" href="#不同包中变量、函数、方法、类型公私有问题" aria-hidden="true">#</a></h2><ul><li>在 Go 语言中通过首字母大小写来控制变量、函数、方法、类型的公私有</li><li>如果首字母小写, 那么代表私有, 仅在当前包中可以使用</li><li>如果首字母大写, 那么代表共有, 其它包中也可以使用</li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> demo

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">var</span> num1 <span class="token builtin">int</span> <span class="token operator">=</span> <span class="token number">123</span> <span class="token comment">// 当前包可用</span>

<span class="token keyword">var</span> Num1 <span class="token builtin">int</span> <span class="token operator">=</span> <span class="token number">123</span> <span class="token comment">// 其它包也可用</span>

<span class="token keyword">type</span> person <span class="token keyword">struct</span> <span class="token punctuation">{</span> <span class="token comment">// 当前包可用</span>

	name <span class="token builtin">string</span> <span class="token comment">// 当前包可用</span>

	age <span class="token builtin">int</span> <span class="token comment">// 当前包可用</span>

<span class="token punctuation">}</span>

<span class="token keyword">type</span> Student <span class="token keyword">struct</span> <span class="token punctuation">{</span> <span class="token comment">// 其它包也可用</span>

	Name <span class="token builtin">string</span> <span class="token comment">// 其它包也可用</span>

	Age <span class="token builtin">int</span> <span class="token comment">// 其它包也可用</span>

<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 当前包可用</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;test1&quot;</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">Test2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 其它包也可用</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Test2&quot;</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>p person<span class="token punctuation">)</span> <span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 当前包可用</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span>name<span class="token punctuation">,</span> p<span class="token punctuation">.</span>age<span class="token punctuation">)</span>

<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>s Student<span class="token punctuation">)</span> <span class="token function">Say</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span> <span class="token comment">// 其它包也可用</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>Name<span class="token punctuation">,</span> s<span class="token punctuation">.</span>Age<span class="token punctuation">)</span>

<span class="token punctuation">}</span>

</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><hr><h2 id="面向对象三大特性" tabindex="-1">面向对象三大特性 <a class="header-anchor" href="#面向对象三大特性" aria-hidden="true">#</a></h2><ul><li><p>封装性</p><ul><li>封装性就是隐藏实现细节，仅对外公开接口</li><li>类是数据与功能的封装，数据就是成员变量，功能就是方法</li></ul></li><li><p>为什么要封装?</p><ul><li><p>不封装的缺点：当一个类把自己的成员变量暴露给外部的时候,那么该类就失去对该成员变量的管理权，别人可以任意的修改你的成员变量</p></li><li><p>封装就是将数据隐藏起来,只能用此类的方法才可以读取或者设置数据,不可被外部任意修改是面向对象设计本质(<code>将变化隔离</code>)。这样降低了数据被误用的可能 (<code>提高安全性</code>和<code>灵活性</code>)</p></li></ul></li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>model 包</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> model

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">type</span> Person <span class="token keyword">struct</span> <span class="token punctuation">{</span> <span class="token comment">// 其它包也可用</span>

	name <span class="token builtin">string</span> <span class="token comment">// 当前包可用</span>

	age <span class="token builtin">int</span> <span class="token comment">// 当前包可用</span>

<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>p <span class="token operator">*</span>person<span class="token punctuation">)</span> <span class="token function">SetAge</span><span class="token punctuation">(</span>age <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token comment">// 安全校验</span>

	<span class="token keyword">if</span> age <span class="token operator">&lt;</span> <span class="token number">0</span> <span class="token punctuation">{</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;年龄不能为负数&quot;</span><span class="token punctuation">)</span>

	<span class="token punctuation">}</span>

	p<span class="token punctuation">.</span>age <span class="token operator">=</span> age

<span class="token punctuation">}</span>

</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;fmt&quot;</span>

	<span class="token string">&quot;main/model&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token comment">// 报错, 因为 name 和 age 不是公开的</span>

	<span class="token comment">//p := model.Person{&quot;lnj&quot;, 18}</span>

	<span class="token comment">// 方式一</span>

	<span class="token comment">//p := model.Person{}</span>

	<span class="token comment">//p.SetAge(18)</span>

	<span class="token comment">//fmt.Println(p)</span>

	<span class="token comment">// 方式二</span>

	<span class="token comment">//p := new(model.Person)</span>

	<span class="token comment">//p.SetAge(18)</span>

	<span class="token comment">//fmt.Println(p)</span>

<span class="token punctuation">}</span>

</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><ul><li>封装原则 <ul><li>将不需要对外提供的内容都隐藏起来,把属性都隐藏,提供公共的方法对其访问</li></ul></li></ul><hr><ul><li><p>继承性</p><ul><li>Go 语言认为虽然继承能够提升代码的复用性, 但是会让代码腐烂, 并增加代码的复杂度.</li><li>所以 go 语言坚持了〃组合优于继承〃的原则, Go 语言中所谓的继承其实是利用组合实现的(匿名结构体属性)</li></ul></li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>普通继承(组合)</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">type</span> Person <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	name <span class="token builtin">string</span>

	age <span class="token builtin">int</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> Student <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	Person <span class="token comment">// 学生继承了人的特性</span>

	score <span class="token builtin">int</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> Teacher <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	Person <span class="token comment">// 老师继承了人的特性</span>

	Title <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	s <span class="token operator">:=</span> Student<span class="token punctuation">{</span>Person<span class="token punctuation">{</span><span class="token string">&quot;lnj&quot;</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">99</span><span class="token punctuation">}</span>

	<span class="token comment">//fmt.Println(s.Person.name)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token comment">// 两种方式都能访问</span>

	<span class="token comment">//fmt.Println(s.Person.age)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>age<span class="token punctuation">)</span> <span class="token comment">// 两种方式都能访问</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>score<span class="token punctuation">)</span>

<span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>继承结构中出现重名情况, 采用就近原则</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">type</span> Person <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	name <span class="token builtin">string</span> <span class="token comment">// 属性重名</span>

	age <span class="token builtin">int</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> Student <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	Person

	name <span class="token builtin">string</span> <span class="token comment">// 属性重名</span>

	score <span class="token builtin">int</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	s <span class="token operator">:=</span> Student<span class="token punctuation">{</span>Person<span class="token punctuation">{</span><span class="token string">&quot;zs&quot;</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;ls&quot;</span><span class="token punctuation">,</span> <span class="token number">99</span><span class="token punctuation">}</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>Person<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token comment">// zs</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token comment">// ls</span>

	<span class="token comment">//fmt.Println(s.Person.age)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>age<span class="token punctuation">)</span> <span class="token comment">// 两种方式都能访问</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>score<span class="token punctuation">)</span>

<span class="token punctuation">}</span>

</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>多重继承（示例一）</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">type</span> Object <span class="token keyword">struct</span> <span class="token punctuation">{</span>

	life <span class="token builtin">int</span>

<span class="token punctuation">}</span>

<span class="token keyword">type</span> Person <span class="token keyword">struct</span> <span class="token punctuation">{</span>

	Object

	name <span class="token builtin">string</span>

	age <span class="token builtin">int</span>

<span class="token punctuation">}</span>

<span class="token keyword">type</span> Student <span class="token keyword">struct</span> <span class="token punctuation">{</span>

	Person

	score <span class="token builtin">int</span>

<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	s <span class="token operator">:=</span> Student<span class="token punctuation">{</span>Person<span class="token punctuation">{</span>Object<span class="token punctuation">{</span><span class="token number">77</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token string">&quot;zs&quot;</span><span class="token punctuation">,</span> <span class="token number">33</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">99</span><span class="token punctuation">}</span>

	<span class="token comment">//fmt.Println(s.Person.Object.life)</span>

	<span class="token comment">//fmt.Println(s.Person.life)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>life<span class="token punctuation">)</span> <span class="token comment">// 三种方式都可以</span>

	<span class="token comment">//fmt.Println(s.Person.name)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token comment">// 两种方式都能访问</span>

	<span class="token comment">//fmt.Println(s.Person.age)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>age<span class="token punctuation">)</span> <span class="token comment">// 两种方式都能访问</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>score<span class="token punctuation">)</span>

<span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>多重继承（示例二）</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">type</span> Object <span class="token keyword">struct</span> <span class="token punctuation">{</span>

	life <span class="token builtin">int</span>

<span class="token punctuation">}</span>

<span class="token keyword">type</span> Person <span class="token keyword">struct</span> <span class="token punctuation">{</span>

	name <span class="token builtin">string</span>

	age <span class="token builtin">int</span>

<span class="token punctuation">}</span>

<span class="token keyword">type</span> Student <span class="token keyword">struct</span> <span class="token punctuation">{</span>

	Object

	Person

	score <span class="token builtin">int</span>

<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	s <span class="token operator">:=</span> Student<span class="token punctuation">{</span>Object<span class="token punctuation">{</span><span class="token number">77</span><span class="token punctuation">}</span><span class="token punctuation">,</span> Person<span class="token punctuation">{</span><span class="token string">&quot;zs&quot;</span><span class="token punctuation">,</span> <span class="token number">33</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">99</span><span class="token punctuation">}</span>

	<span class="token comment">//fmt.Println(s.Person.life)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>life<span class="token punctuation">)</span> <span class="token comment">// 两种方式都可以</span>

	<span class="token comment">//fmt.Println(s.Person.name)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>name<span class="token punctuation">)</span> <span class="token comment">// 两种方式都能访问</span>

	<span class="token comment">//fmt.Println(s.Person.age)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>age<span class="token punctuation">)</span> <span class="token comment">// 两种方式都能访问</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>s<span class="token punctuation">.</span>score<span class="token punctuation">)</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><ul><li>方法继承</li><li>在 Go 语言中子类不仅仅能够继承父类的属性, 还能够继承父类的方法</li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">type</span> Person <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	name <span class="token builtin">string</span>

	age <span class="token builtin">int</span>
<span class="token punctuation">}</span>

<span class="token comment">// 父类方法</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>p Person<span class="token punctuation">)</span> <span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;name is &quot;</span><span class="token punctuation">,</span> p<span class="token punctuation">.</span>name<span class="token punctuation">,</span> <span class="token string">&quot;age is &quot;</span><span class="token punctuation">,</span> p<span class="token punctuation">.</span>age<span class="token punctuation">)</span>

<span class="token punctuation">}</span>

<span class="token keyword">type</span> Student <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	Person

	score <span class="token builtin">float32</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	stu <span class="token operator">:=</span> Student<span class="token punctuation">{</span>Person<span class="token punctuation">{</span><span class="token string">&quot;zs&quot;</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">59.9</span><span class="token punctuation">}</span>

	stu<span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>

</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><ul><li>继承中的方法重写 <ul><li>如果子类有和父类同名的方法, 那么我们称之为方法重写</li></ul></li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">type</span> Person <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	name <span class="token builtin">string</span>

	age <span class="token builtin">int</span>
<span class="token punctuation">}</span>

<span class="token comment">// 父类方法</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>p Person<span class="token punctuation">)</span> <span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;name is &quot;</span><span class="token punctuation">,</span> p<span class="token punctuation">.</span>name<span class="token punctuation">,</span> <span class="token string">&quot;age is &quot;</span><span class="token punctuation">,</span> p<span class="token punctuation">.</span>age<span class="token punctuation">)</span>

<span class="token punctuation">}</span>

<span class="token keyword">type</span> Student <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	Person

	score <span class="token builtin">float32</span>
<span class="token punctuation">}</span>

<span class="token comment">// 子类方法</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>s Student<span class="token punctuation">)</span> <span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;name is &quot;</span><span class="token punctuation">,</span> s<span class="token punctuation">.</span>name<span class="token punctuation">,</span> <span class="token string">&quot;age is &quot;</span><span class="token punctuation">,</span> s<span class="token punctuation">.</span>age<span class="token punctuation">,</span> <span class="token string">&quot;score is &quot;</span><span class="token punctuation">,</span> s<span class="token punctuation">.</span>score<span class="token punctuation">)</span>

<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	stu <span class="token operator">:=</span> Student<span class="token punctuation">{</span>Person<span class="token punctuation">{</span><span class="token string">&quot;zs&quot;</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token number">59.9</span><span class="token punctuation">}</span>

	<span class="token comment">// 和属性一样, 访问时采用就近原则</span>

	stu<span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	<span class="token comment">// 和属性一样, 方法同名时可以通过指定父类名称的方式, 访问父类方法</span>

	stu<span class="token punctuation">.</span>Person<span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>

</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><div class="warning custom-block"><p class="custom-block-title">注意</p><p>无论是属性继承还是方法继承, 都只能子类访问父类, 不能父类访问子类</p></div><hr><ul><li>多态性 <ul><li>多态就是某一类事物的多种形态</li></ul></li></ul><div class="language-go"><pre><code>  猫<span class="token punctuation">:</span> 猫<span class="token operator">--</span><span class="token operator">&gt;</span>动物

  狗<span class="token punctuation">:</span> 狗<span class="token operator">--</span><span class="token operator">&gt;</span>动物

  男人 <span class="token punctuation">:</span> 男人 <span class="token operator">--</span><span class="token operator">&gt;</span>人 <span class="token operator">--</span><span class="token operator">&gt;</span>高级动物

  女人 <span class="token punctuation">:</span> 女人 <span class="token operator">--</span><span class="token operator">&gt;</span>人 <span class="token operator">--</span><span class="token operator">&gt;</span>高级动物
</code></pre></div><ul><li>Go 语言中的多态是采用接口来实现的</li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token comment">// 1.定义接口</span>

<span class="token keyword">type</span> Animal <span class="token keyword">interface</span> <span class="token punctuation">{</span>
	<span class="token function">Eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">type</span> Dog <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	name <span class="token builtin">string</span>

	age <span class="token builtin">int</span>
<span class="token punctuation">}</span>

<span class="token comment">// 2.实现接口方法</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>d Dog<span class="token punctuation">)</span> <span class="token function">Eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>d<span class="token punctuation">.</span>name<span class="token punctuation">,</span> <span class="token string">&quot;正在吃东西&quot;</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>

<span class="token keyword">type</span> Cat <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	name <span class="token builtin">string</span>

	age <span class="token builtin">int</span>
<span class="token punctuation">}</span>

<span class="token comment">// 2.实现接口方法</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>c Cat<span class="token punctuation">)</span> <span class="token function">Eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span>name<span class="token punctuation">,</span> <span class="token string">&quot;正在吃东西&quot;</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>

<span class="token comment">// 3.对象特有方法</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>c Cat<span class="token punctuation">)</span> <span class="token function">Special</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>c<span class="token punctuation">.</span>name<span class="token punctuation">,</span> <span class="token string">&quot;特有方法&quot;</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token comment">// 1.利用接口类型保存实现了所有接口方法的对象</span>

	<span class="token keyword">var</span> a Animal

	a <span class="token operator">=</span> Dog<span class="token punctuation">{</span><span class="token string">&quot;旺财&quot;</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">}</span>

	<span class="token comment">// 2.利用接口类型调用对象中实现的方法</span>

	a<span class="token punctuation">.</span><span class="token function">Eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	a <span class="token operator">=</span> Cat<span class="token punctuation">{</span><span class="token string">&quot;喵喵&quot;</span><span class="token punctuation">,</span> <span class="token number">18</span><span class="token punctuation">}</span>

	a<span class="token punctuation">.</span><span class="token function">Eat</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	<span class="token comment">// 3.利用接口类型调用对象特有的方法</span>

	<span class="token comment">//a.Special() // 接口类型只能调用接口中声明的方法, 不能调用对象特有方法</span>

	<span class="token keyword">if</span> cat<span class="token punctuation">,</span> ok <span class="token operator">:=</span> a<span class="token punctuation">.</span><span class="token punctuation">(</span>Cat<span class="token punctuation">)</span><span class="token punctuation">;</span> ok <span class="token punctuation">{</span>

		cat<span class="token punctuation">.</span><span class="token function">Special</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 只有对象本身才能调用对象的特有方法</span>

	<span class="token punctuation">}</span>

<span class="token punctuation">}</span>

</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><ul><li>多态优点 <ul><li>多态的主要好处就是简化了编程接口。它允许在类和类之间重用一些习惯性的命名,而不用为每一个新的方法命名一个新名字。这样,编程接口就是一些抽象的行为的集合,从而和实现接口的类的区分开来</li><li>多态也使得代码可以分散在不同的对象中而不用试图在一个方法中考虑到所有可能的对象。这样使得您的代码扩展性和复用性更好一些。当一个新的情景出现时,您无须对现有的代码进行改动,而只需要增加一个新的类和新的同名方法</li></ul></li></ul><h2 id="异常处理" tabindex="-1">异常处理 <a class="header-anchor" href="#异常处理" aria-hidden="true">#</a></h2><ul><li>程序运行时，发生的不被期望的事件，它阻止了程序按照程序员的预期正常执行，这就是异常</li><li>golang 中提供了两种处理异常的方式 <ul><li>一种是程序发生异常时, 将异常信息反馈给使用者</li><li>一种是程序发生异常时, 立刻退出终止程序继续运行</li></ul></li></ul><hr><h2 id="打印异常信息" tabindex="-1">打印异常信息 <a class="header-anchor" href="#打印异常信息" aria-hidden="true">#</a></h2><ul><li>Go 语言中提供了两种创建异常信息的方式</li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>通过 fmt 包中的 Errorf 函数创建错误信息, 然后打印</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token comment">// 1.创建错误信息</span>

	<span class="token keyword">var</span> err <span class="token builtin">error</span> <span class="token operator">=</span> fmt<span class="token punctuation">.</span><span class="token function">Errorf</span><span class="token punctuation">(</span><span class="token string">&quot;这里是错误信息&quot;</span><span class="token punctuation">)</span>

	<span class="token comment">// 2.打印错误信息</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token comment">// 这里是错误信息</span>

<span class="token punctuation">}</span>

</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>通过 errors 包中的 New 函数创建错误信息,然后打印</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;errors&quot;</span>
	<span class="token string">&quot;fmt&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token comment">// 1.创建错误信息</span>

	<span class="token keyword">var</span> err <span class="token builtin">error</span> <span class="token operator">=</span> errors<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span><span class="token string">&quot;这里是错误信息&quot;</span><span class="token punctuation">)</span>

	<span class="token comment">// 2.打印错误信息</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token comment">// 这里是错误信息</span>

<span class="token punctuation">}</span>

</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><ul><li><p>两种创建异常信息实现原理解析</p><ul><li><p>Go 语言中创建异常信息其实都是通过一个 error 接口实现的</p></li><li><p>Go 语言再<code>builtin</code>包中定义了一个名称叫做 error 的接口. 源码如下</p></li></ul></li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> builtin

<span class="token comment">// 定义了一个名称叫做 error 的接口</span>

<span class="token comment">// 接口中声明了一个叫做 Error() 的方法</span>

<span class="token keyword">type</span> <span class="token builtin">error</span> <span class="token keyword">interface</span> <span class="token punctuation">{</span>
	<span class="token function">Error</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">string</span>
<span class="token punctuation">}</span>

</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><ul><li>在 errors 包中定义了一个名称叫做做 errorString 的结构体, 利用这个结构体实现了 error 接口中指定的方法</li><li>并且在 errors 包中还提供了一个 New 方法, 用于创建实现了 error 接口的结构体对象, 并且在创建时就会把指定的字符串传递给这个结构体</li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token comment">// 指定包名为 errors</span>

<span class="token keyword">package</span> errors

<span class="token comment">// 定义了一个名称叫做 errorString 的结构体, 里面有一个字符串类型属性 s</span>

<span class="token keyword">type</span> errorString <span class="token keyword">struct</span> <span class="token punctuation">{</span>
	s <span class="token builtin">string</span>
<span class="token punctuation">}</span>

<span class="token comment">// 实现了 error 接口中的 Error 方法</span>

<span class="token comment">// 内部直接将结构体中保存的字符串返回</span>

<span class="token keyword">func</span> <span class="token punctuation">(</span>e <span class="token operator">*</span>errorString<span class="token punctuation">)</span> <span class="token function">Error</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">string</span> <span class="token punctuation">{</span>

	<span class="token keyword">return</span> e<span class="token punctuation">.</span>s

<span class="token punctuation">}</span>

<span class="token comment">// 定义了一个 New 函数, 用于创建异常信息</span>

<span class="token comment">// 注意: New 函数的返回值是一个接口类型</span>

<span class="token keyword">func</span> <span class="token function">New</span><span class="token punctuation">(</span>text <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token builtin">error</span> <span class="token punctuation">{</span>

	<span class="token comment">// 返回一个创建好的errorString结构体地址</span>

	<span class="token keyword">return</span> <span class="token operator">&amp;</span>errorString<span class="token punctuation">{</span>text<span class="token punctuation">}</span>

<span class="token punctuation">}</span>

</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><ul><li>fmt 包中 Errorf 底层的实现原理其实就是在内部自动调用了 errors 包中的 New 函数</li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">func</span> <span class="token function">Errorf</span><span class="token punctuation">(</span>format <span class="token builtin">string</span><span class="token punctuation">,</span> a <span class="token operator">...</span><span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token builtin">error</span> <span class="token punctuation">{</span>

  <span class="token keyword">return</span> errors<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span><span class="token function">Sprintf</span><span class="token punctuation">(</span>format<span class="token punctuation">,</span> a<span class="token operator">...</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><ul><li>应用场景</li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;errors&quot;</span>
	<span class="token string">&quot;fmt&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">div</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>res <span class="token builtin">int</span><span class="token punctuation">,</span> err <span class="token builtin">error</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token keyword">if</span> b <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">{</span>

		<span class="token comment">// 一旦传入的除数为 0, 就会返回 error 信息</span>

		err <span class="token operator">=</span> errors<span class="token punctuation">.</span><span class="token function">New</span><span class="token punctuation">(</span><span class="token string">&quot;除数不能为 0&quot;</span><span class="token punctuation">)</span>

	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>

		res <span class="token operator">=</span> a <span class="token operator">/</span> b

	<span class="token punctuation">}</span>

	<span class="token keyword">return</span>

<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token comment">//res, err := div(10, 5)</span>

	res<span class="token punctuation">,</span> err <span class="token operator">:=</span> <span class="token function">div</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>

	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token comment">// 除数不能为 0</span>

	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token comment">// 2</span>

	<span class="token punctuation">}</span>

<span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><hr><h2 id="中断程序" tabindex="-1">中断程序 <a class="header-anchor" href="#中断程序" aria-hidden="true">#</a></h2><ul><li>Go 语言中提供了一个叫做 panic 函数, 用于发生异常时终止程序继续运行</li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div></div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">div</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>res <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token keyword">if</span> b <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">{</span>

		<span class="token comment">//一旦传入的除数为 0, 程序就会终止</span>

		<span class="token function">panic</span><span class="token punctuation">(</span><span class="token string">&quot;除数不能为 0&quot;</span><span class="token punctuation">)</span>

	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>

		res <span class="token operator">=</span> a <span class="token operator">/</span> b

	<span class="token punctuation">}</span>

	<span class="token keyword">return</span>

<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	res <span class="token operator">:=</span> <span class="token function">div</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>

<span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><ul><li><p>Go 语言中有两种方式可以触发 panic 终止程序</p><ul><li><p>我们自己手动调用 panic 函数</p></li><li><p>程序内部出现问题自动触发 panic 函数</p></li></ul></li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token comment">// 例如:数组角标越界, 就会自动触发 panic</span>

	<span class="token keyword">var</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">}</span>

	arr<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token number">666</span> <span class="token comment">// 报错</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span>

	<span class="token comment">// 例如:除数为 0, 就会自动触发 panic</span>

	<span class="token keyword">var</span> res <span class="token operator">=</span> <span class="token number">10</span> <span class="token operator">/</span> <span class="token number">0</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span>

<span class="token punctuation">}</span>

</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><ul><li>除非是不可恢复性、导致系统无法正常工作的错误, 否则不建议使用 panic</li></ul><hr><h2 id="恢复程序" tabindex="-1">恢复程序 <a class="header-anchor" href="#恢复程序" aria-hidden="true">#</a></h2><ul><li>程序和人一样都需要具备一定的容错能力, 学会知错就改. 所以如果不是不可恢复性、导致系统无法正常工作的错误, 如果发生了 panic 我们需要恢复程序, 让程序继续执行,并且需要记录到底犯了什么错误</li><li>在 Go 语言中我们可以通过 defer 和 recover 来实现 panic 异常的捕获, 让程序继续执行</li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">div</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>res <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token comment">// 定义一个延迟调用的函数, 用于捕获 panic 异常</span>

	<span class="token comment">// 注意: 一定要在 panic 之前定义</span>

	<span class="token keyword">defer</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

		<span class="token keyword">if</span> err <span class="token operator">:=</span> <span class="token function">recover</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>

			res <span class="token operator">=</span> <span class="token operator">-</span><span class="token number">1</span>

			fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token comment">// 除数不能为 0</span>

		<span class="token punctuation">}</span>

	<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	<span class="token keyword">if</span> b <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">{</span>

		<span class="token comment">//err = errors.New(&quot;除数不能为 0&quot;)</span>

		<span class="token function">panic</span><span class="token punctuation">(</span><span class="token string">&quot;除数不能为 0&quot;</span><span class="token punctuation">)</span>

	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>

		res <span class="token operator">=</span> a <span class="token operator">/</span> b

	<span class="token punctuation">}</span>

	<span class="token keyword">return</span>

<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">setValue</span><span class="token punctuation">(</span>arr <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">,</span> index <span class="token builtin">int</span><span class="token punctuation">,</span> value <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	arr<span class="token punctuation">[</span>index<span class="token punctuation">]</span> <span class="token operator">=</span> value

<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	res <span class="token operator">:=</span> <span class="token function">div</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token comment">// -1</span>

<span class="token punctuation">}</span>

</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><ul><li>panic 注意点 <ul><li>panic 异常会沿着调用堆栈向外传递, 所以也可以在外层捕获</li></ul></li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">div</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">(</span>res <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token keyword">if</span> b <span class="token operator">==</span> <span class="token number">0</span> <span class="token punctuation">{</span>

		<span class="token comment">//err = errors.New(&quot;除数不能为 0&quot;)</span>

		<span class="token function">panic</span><span class="token punctuation">(</span><span class="token string">&quot;除数不能为 0&quot;</span><span class="token punctuation">)</span>

	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>

		res <span class="token operator">=</span> a <span class="token operator">/</span> b

	<span class="token punctuation">}</span>

	<span class="token keyword">return</span>

<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token comment">// panic 异常会沿着调用堆栈向外传递, 所以也可以在外层捕获</span>

	<span class="token keyword">defer</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

		<span class="token keyword">if</span> err <span class="token operator">:=</span> <span class="token function">recover</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>

			fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token comment">// 除数不能为 0</span>

		<span class="token punctuation">}</span>

	<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	<span class="token function">div</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>

</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><ul><li>多个异常,只有第一个会被捕获</li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">test1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token comment">// 多个异常,只有第一个会被捕获</span>

	<span class="token keyword">defer</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

		<span class="token keyword">if</span> err <span class="token operator">:=</span> <span class="token function">recover</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>

			fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token comment">// 异常 A</span>

		<span class="token punctuation">}</span>

	<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	<span class="token function">panic</span><span class="token punctuation">(</span><span class="token string">&quot;异常 A&quot;</span><span class="token punctuation">)</span> <span class="token comment">// 相当于 return, 后面代码不会继续执行</span>

	<span class="token function">panic</span><span class="token punctuation">(</span><span class="token string">&quot;异常 B&quot;</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token function">test1</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>

</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><ul><li>如果有异常写在 defer 中, 那么只有 defer 中的异常会被捕获</li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">test2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token comment">// 如果有异常写在 defer 中, 并且其它异常写在 defer 后面, 那么只有 defer 中的异常会被捕获</span>

	<span class="token keyword">defer</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

		<span class="token keyword">if</span> err <span class="token operator">:=</span> <span class="token function">recover</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>

			fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token comment">// 异常 A</span>

		<span class="token punctuation">}</span>

	<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	<span class="token keyword">defer</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

		<span class="token function">panic</span><span class="token punctuation">(</span><span class="token string">&quot;异常 B&quot;</span><span class="token punctuation">)</span>

	<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	<span class="token function">panic</span><span class="token punctuation">(</span><span class="token string">&quot;异常 A&quot;</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token function">test1</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>

</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><h2 id="字符串相关方法" tabindex="-1">字符串相关方法 <a class="header-anchor" href="#字符串相关方法" aria-hidden="true">#</a></h2><ul><li>获取字符串长度 <ul><li>注意: Go 语言编码方式是 UTF-8,在 UTF-8 中一个汉字占 3 个字节</li></ul></li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	str1 <span class="token operator">:=</span> <span class="token string">&quot;lnj&quot;</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">len</span><span class="token punctuation">(</span>str1<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 3</span>

	str2 <span class="token operator">:=</span> <span class="token string">&quot;公号：代码情缘&quot;</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">len</span><span class="token punctuation">(</span>str2<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 12</span>

<span class="token punctuation">}</span>

</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><ul><li>如果字符串中包含中文, 又想精确的计算字符串中字符的个数而不是占用的字节, 那么必须先将字符串转换为 rune 类型数组 <ul><li>Go 语言中 byte 用于保存字符, rune 用于保存汉字</li></ul></li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	str <span class="token operator">:=</span> <span class="token string">&quot;公号：代码情缘&quot;</span>

	<span class="token comment">// 注意 byte 占 1 个字节, 只能保存字符不能保存汉字,因为一个汉字占用 3 个字节</span>

	arr1 <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token function">byte</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span> <span class="token comment">// 12</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">len</span><span class="token punctuation">(</span>arr1<span class="token punctuation">)</span><span class="token punctuation">)</span>

	<span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> v <span class="token operator">:=</span> <span class="token keyword">range</span> arr1 <span class="token punctuation">{</span>

		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%c&quot;</span><span class="token punctuation">,</span> v<span class="token punctuation">)</span> <span class="token comment">// lnjæåæ±</span>

	<span class="token punctuation">}</span>

	<span class="token comment">// Go 语言中 rune 类型就是专门用于保存汉字的</span>

	arr2 <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token function">rune</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">len</span><span class="token punctuation">(</span>arr2<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token comment">// 6</span>

	<span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> v <span class="token operator">:=</span> <span class="token keyword">range</span> arr2 <span class="token punctuation">{</span>

		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%c&quot;</span><span class="token punctuation">,</span> v<span class="token punctuation">)</span> <span class="token comment">// lnj 李南江</span>

	<span class="token punctuation">}</span>

<span class="token punctuation">}</span>

</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><ul><li>查找子串在字符串中出现的位置 <ul><li>func Index(s, sep string) int</li><li>func IndexByte(s string, c byte) int</li><li>func IndexRune(s string, r rune) int</li><li>func IndexAny(s, chars string) int</li><li>func IndexFunc(s string, f func(rune) bool) int</li><li>func LastIndex(s, sep string) int</li><li>func LastIndexByte(s string, c byte) int</li><li>func LastIndexAny(s, chars string) int</li><li>func LastIndexFunc(s string, f func(rune) bool) int</li></ul></li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;strings&quot;</span>

	<span class="token string">&quot;fmt&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token comment">// 查找`字符`在字符串中第一次出现的位置, 找不到返回-1</span>

	res <span class="token operator">:=</span> strings<span class="token punctuation">.</span><span class="token function">IndexByte</span><span class="token punctuation">(</span><span class="token string">&quot;hello 李南江&quot;</span><span class="token punctuation">,</span> <span class="token char">&#39;l&#39;</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token comment">// 2</span>

	<span class="token comment">// 查找`汉字`OR`字符`在字符串中第一次出现的位置, 找不到返回-1</span>

	res <span class="token operator">=</span> strings<span class="token punctuation">.</span><span class="token function">IndexRune</span><span class="token punctuation">(</span><span class="token string">&quot;hello 李南江&quot;</span><span class="token punctuation">,</span> <span class="token char">&#39;李&#39;</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token comment">// 6</span>

	res <span class="token operator">=</span> strings<span class="token punctuation">.</span><span class="token function">IndexRune</span><span class="token punctuation">(</span><span class="token string">&quot;hello 李南江&quot;</span><span class="token punctuation">,</span> <span class="token char">&#39;l&#39;</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token comment">// 2</span>

	<span class="token comment">// 查找`汉字`OR`字符`中任意一个在字符串中第一次出现的位置, 找不到返回-1</span>

	res <span class="token operator">=</span> strings<span class="token punctuation">.</span><span class="token function">IndexAny</span><span class="token punctuation">(</span><span class="token string">&quot;hello 李南江&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;wml&quot;</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token comment">// 2</span>

	<span class="token comment">// 会把 wmhl 拆开逐个查找, w、m、h、l 只要任意一个被找到, 立刻停止查找</span>

	res <span class="token operator">=</span> strings<span class="token punctuation">.</span><span class="token function">IndexAny</span><span class="token punctuation">(</span><span class="token string">&quot;hello 李南江&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;wmhl&quot;</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token comment">// 0</span>

	<span class="token comment">// 查找`子串`在字符串第一次出现的位置, 找不到返回-1</span>

	res <span class="token operator">=</span> strings<span class="token punctuation">.</span><span class="token function">Index</span><span class="token punctuation">(</span><span class="token string">&quot;hello 李南江&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;llo&quot;</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token comment">// 2</span>

	<span class="token comment">// 会把 lle 当做一个整体去查找, 而不是拆开</span>

	res <span class="token operator">=</span> strings<span class="token punctuation">.</span><span class="token function">Index</span><span class="token punctuation">(</span><span class="token string">&quot;hello 李南江&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;lle&quot;</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token comment">// -1</span>

	<span class="token comment">// 可以查找字符也可以查找汉字</span>

	res <span class="token operator">=</span> strings<span class="token punctuation">.</span><span class="token function">Index</span><span class="token punctuation">(</span><span class="token string">&quot;hello 李南江&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;李&quot;</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token comment">// 6</span>

	<span class="token comment">// 会将字符串先转换为[]rune, 然后遍历 rune 切片逐个取出传给自定义函数</span>

	<span class="token comment">// 只要函数返回 true,代表符合我们的需求, 既立即停止查找</span>

	res <span class="token operator">=</span> strings<span class="token punctuation">.</span><span class="token function">IndexFunc</span><span class="token punctuation">(</span><span class="token string">&quot;hello 李南江&quot;</span><span class="token punctuation">,</span> custom<span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token comment">// 6</span>

	<span class="token comment">// 倒序查找`子串`在字符串第一次出现的位置, 找不到返回-1</span>

	res <span class="token operator">:=</span> strings<span class="token punctuation">.</span><span class="token function">LastIndex</span><span class="token punctuation">(</span><span class="token string">&quot;hello 李南江&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;l&quot;</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token comment">// 3</span>

<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">custom</span><span class="token punctuation">(</span>r <span class="token builtin">rune</span><span class="token punctuation">)</span> <span class="token builtin">bool</span> <span class="token punctuation">{</span>

	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;被调用了, 当前传入的是%c\n&quot;</span><span class="token punctuation">,</span> r<span class="token punctuation">)</span>

	<span class="token keyword">if</span> r <span class="token operator">==</span> <span class="token char">&#39;o&#39;</span> <span class="token punctuation">{</span>

		<span class="token keyword">return</span> <span class="token boolean">true</span>

	<span class="token punctuation">}</span>

	<span class="token keyword">return</span> <span class="token boolean">false</span>

<span class="token punctuation">}</span>

</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><ul><li>判断字符串中是否包含子串 <ul><li>func Contains(s, substr string) bool</li><li>func ContainsRune(s string, r rune) bool</li><li>func ContainsAny(s, chars string) bool</li><li>func HasPrefix(s, prefix string) bool</li><li>func HasSuffix(s, suffix string) bool</li></ul></li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;strings&quot;</span>

	<span class="token string">&quot;fmt&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token comment">// 查找`子串`在字符串中是否存在, 存在返回 true, 不存在返回 false</span>

	<span class="token comment">// 底层实现就是调用 strings.Index 函数</span>

	res <span class="token operator">:=</span> strings<span class="token punctuation">.</span><span class="token function">Contains</span><span class="token punctuation">(</span><span class="token string">&quot;hello 代码情缘&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;llo&quot;</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token comment">// true</span>

	<span class="token comment">// 查找`汉字`OR`字符`在字符串中是否存在, 存在返回 true, 不存在返回 false</span>

	<span class="token comment">// 底层实现就是调用 strings.IndexRune 函数</span>

	res <span class="token operator">=</span> strings<span class="token punctuation">.</span><span class="token function">ContainsRune</span><span class="token punctuation">(</span><span class="token string">&quot;hello 代码情缘&quot;</span><span class="token punctuation">,</span> <span class="token char">&#39;l&#39;</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token comment">// true</span>

	res <span class="token operator">=</span> strings<span class="token punctuation">.</span><span class="token function">ContainsRune</span><span class="token punctuation">(</span><span class="token string">&quot;hello 代码情缘&quot;</span><span class="token punctuation">,</span> <span class="token char">&#39;李&#39;</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token comment">// true</span>

	<span class="token comment">// 查找`汉字`OR`字符`中任意一个在字符串中是否存在, 存在返回 true, 不存在返回 false</span>

	<span class="token comment">// 底层实现就是调用 strings.IndexAny 函数</span>

	res <span class="token operator">=</span> strings<span class="token punctuation">.</span><span class="token function">ContainsAny</span><span class="token punctuation">(</span><span class="token string">&quot;hello 代码情缘&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;wmhl&quot;</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token comment">// true</span>

	<span class="token comment">// 判断字符串是否已某个字符串开头</span>

	res <span class="token operator">=</span> strings<span class="token punctuation">.</span><span class="token function">HasPrefix</span><span class="token punctuation">(</span><span class="token string">&quot;lnj-book.avi&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;lnj&quot;</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token comment">// true</span>

	<span class="token comment">// 判断字符串是否已某个字符串结尾</span>

	res <span class="token operator">=</span> strings<span class="token punctuation">.</span><span class="token function">HasSuffix</span><span class="token punctuation">(</span><span class="token string">&quot;lnj-book.avi&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;.avi&quot;</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token comment">// true</span>

<span class="token punctuation">}</span>

</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><ul><li><p>字符串比较</p><ul><li><p>func Compare(a, b string) int</p></li><li><p>func EqualFold(s, t string) bool</p></li></ul></li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;strings&quot;</span>

	<span class="token string">&quot;fmt&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token comment">// 比较两个字符串大小, 会逐个字符地进行比较 ASCII 值</span>

	<span class="token comment">// 第一个参数 &gt; 第二个参数 返回 1</span>

	<span class="token comment">// 第一个参数 &lt; 第二个参数 返回 -1</span>

	<span class="token comment">// 第一个参数 == 第二个参数 返回 0</span>

	res <span class="token operator">:=</span> strings<span class="token punctuation">.</span><span class="token function">Compare</span><span class="token punctuation">(</span><span class="token string">&quot;bcd&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;abc&quot;</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token comment">// 1</span>

	res <span class="token operator">=</span> strings<span class="token punctuation">.</span><span class="token function">Compare</span><span class="token punctuation">(</span><span class="token string">&quot;bcd&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;bdc&quot;</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token comment">// -1</span>

	res <span class="token operator">=</span> strings<span class="token punctuation">.</span><span class="token function">Compare</span><span class="token punctuation">(</span><span class="token string">&quot;bcd&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;bcd&quot;</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token comment">// 0</span>

	<span class="token comment">// 判断两个字符串是否相等, 可以判断字符和中文</span>

	<span class="token comment">// 判断时会忽略大小写进行判断</span>

	res2 <span class="token operator">:=</span> strings<span class="token punctuation">.</span><span class="token function">EqualFold</span><span class="token punctuation">(</span><span class="token string">&quot;abc&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;def&quot;</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>res2<span class="token punctuation">)</span> <span class="token comment">// false</span>

	res2 <span class="token operator">=</span> strings<span class="token punctuation">.</span><span class="token function">EqualFold</span><span class="token punctuation">(</span><span class="token string">&quot;abc&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;abc&quot;</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>res2<span class="token punctuation">)</span> <span class="token comment">// true</span>

	res2 <span class="token operator">=</span> strings<span class="token punctuation">.</span><span class="token function">EqualFold</span><span class="token punctuation">(</span><span class="token string">&quot;abc&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;ABC&quot;</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>res2<span class="token punctuation">)</span> <span class="token comment">// true</span>

	res2 <span class="token operator">=</span> strings<span class="token punctuation">.</span><span class="token function">EqualFold</span><span class="token punctuation">(</span><span class="token string">&quot;代码情缘&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;代码情缘&quot;</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>res2<span class="token punctuation">)</span> <span class="token comment">// true</span>

<span class="token punctuation">}</span>

</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><ul><li>字符串转换 <ul><li>func ToUpper(s string) string</li><li>func ToLower(s string) string</li><li>func ToTitle(s string) string</li><li>func ToUpperSpecial(_case unicode.SpecialCase, s string) string</li><li>func ToLowerSpecial(_case unicode.SpecialCase, s string) string</li><li>func ToTitleSpecial(_case unicode.SpecialCase, s string) string</li><li>func Title(s string) string</li></ul></li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;strings&quot;</span>

	<span class="token string">&quot;fmt&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token comment">// 将字符串转换为小写</span>

	res <span class="token operator">:=</span> strings<span class="token punctuation">.</span><span class="token function">ToLower</span><span class="token punctuation">(</span><span class="token string">&quot;ABC&quot;</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token comment">// abc</span>

	<span class="token comment">// 将字符串转换为大写</span>

	res <span class="token operator">=</span> strings<span class="token punctuation">.</span><span class="token function">ToUpper</span><span class="token punctuation">(</span><span class="token string">&quot;abc&quot;</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token comment">// ABC</span>

	<span class="token comment">// 将字符串转换为标题格式, 大部分`字符`标题格式就是大写</span>

	res <span class="token operator">=</span> strings<span class="token punctuation">.</span><span class="token function">ToTitle</span><span class="token punctuation">(</span><span class="token string">&quot;hello world&quot;</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token comment">// HELLO WORLD</span>

	res <span class="token operator">=</span> strings<span class="token punctuation">.</span><span class="token function">ToTitle</span><span class="token punctuation">(</span><span class="token string">&quot;HELLO WORLD&quot;</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token comment">// HELLO WORLD</span>

	<span class="token comment">// 将单词首字母变为大写, 其它字符不变</span>

	<span class="token comment">// 单词之间用空格 OR 特殊字符隔开</span>

	res <span class="token operator">=</span> strings<span class="token punctuation">.</span><span class="token function">Title</span><span class="token punctuation">(</span><span class="token string">&quot;hello world&quot;</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token comment">// Hello World</span>

<span class="token punctuation">}</span>

</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><ul><li>字符串拆合 <ul><li>func Split(s, sep string) []string</li><li>func SplitN(s, sep string, n int) []string</li><li>func SplitAfter(s, sep string) []string</li><li>func SplitAfterN(s, sep string, n int) []string</li><li>func Fields(s string) []string</li><li>func FieldsFunc(s string, f func(rune) bool) []string</li><li>func Join(a []string, sep string) string</li><li>func Repeat(s string, count int) string</li><li>func Replace(s, old, new string, n int) string</li></ul></li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;strings&quot;</span>

	<span class="token string">&quot;fmt&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token comment">// 按照指定字符串切割原字符串</span>

	<span class="token comment">// 用,切割字符串</span>

	arr1 <span class="token operator">:=</span> strings<span class="token punctuation">.</span><span class="token function">Split</span><span class="token punctuation">(</span><span class="token string">&quot;a,b,c&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;,&quot;</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>arr1<span class="token punctuation">)</span> <span class="token comment">// [a b c]</span>

	arr2 <span class="token operator">:=</span> strings<span class="token punctuation">.</span><span class="token function">Split</span><span class="token punctuation">(</span><span class="token string">&quot;ambmc&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;m&quot;</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>arr2<span class="token punctuation">)</span> <span class="token comment">// [a b c]</span>

	<span class="token comment">// 按照指定字符串切割原字符串, 并且指定切割为几份</span>

	<span class="token comment">// 如果最后一个参数为 0, 那么会范围一个空数组</span>

	arr3 <span class="token operator">:=</span> strings<span class="token punctuation">.</span><span class="token function">SplitN</span><span class="token punctuation">(</span><span class="token string">&quot;a,b,c&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;,&quot;</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>arr3<span class="token punctuation">)</span> <span class="token comment">// [a b,c]</span>

	arr4 <span class="token operator">:=</span> strings<span class="token punctuation">.</span><span class="token function">SplitN</span><span class="token punctuation">(</span><span class="token string">&quot;a,b,c&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;,&quot;</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>arr4<span class="token punctuation">)</span> <span class="token comment">// []</span>

	<span class="token comment">// 按照指定字符串切割原字符串, 切割时包含指定字符串</span>

	arr5 <span class="token operator">:=</span> strings<span class="token punctuation">.</span><span class="token function">SplitAfter</span><span class="token punctuation">(</span><span class="token string">&quot;a,b,c&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;,&quot;</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>arr5<span class="token punctuation">)</span> <span class="token comment">// [a, b, c]</span>

	<span class="token comment">// 按照指定字符串切割原字符串, 切割时包含指定字符串, 并且指定切割为几份</span>

	arr6 <span class="token operator">:=</span> strings<span class="token punctuation">.</span><span class="token function">SplitAfterN</span><span class="token punctuation">(</span><span class="token string">&quot;a,b,c&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;,&quot;</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>arr6<span class="token punctuation">)</span> <span class="token comment">// [a, b,c]</span>

	<span class="token comment">// 按照空格切割字符串, 多个空格会合并为一个空格处理</span>

	arr7 <span class="token operator">:=</span> strings<span class="token punctuation">.</span><span class="token function">Fields</span><span class="token punctuation">(</span><span class="token string">&quot;a b c d&quot;</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>arr7<span class="token punctuation">)</span> <span class="token comment">// [a b c d]</span>

	<span class="token comment">// 将字符串转换成切片传递给函数之后由函数决定如何切割</span>

	<span class="token comment">// 类似于 IndexFunc</span>

	arr8 <span class="token operator">:=</span> strings<span class="token punctuation">.</span><span class="token function">FieldsFunc</span><span class="token punctuation">(</span><span class="token string">&quot;a,b,c&quot;</span><span class="token punctuation">,</span> custom<span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>arr8<span class="token punctuation">)</span> <span class="token comment">// [a b c]</span>

	<span class="token comment">// 将字符串切片按照指定连接符号转换为字符串</span>

	sce <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">string</span><span class="token punctuation">{</span><span class="token string">&quot;aa&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;bb&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;cc&quot;</span><span class="token punctuation">}</span>

	str1 <span class="token operator">:=</span> strings<span class="token punctuation">.</span><span class="token function">Join</span><span class="token punctuation">(</span>sce<span class="token punctuation">,</span> <span class="token string">&quot;-&quot;</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>str1<span class="token punctuation">)</span> <span class="token comment">// aa-bb-cc</span>

	<span class="token comment">// 返回 count 个 s 串联的指定字符串</span>

	str2 <span class="token operator">:=</span> strings<span class="token punctuation">.</span><span class="token function">Repeat</span><span class="token punctuation">(</span><span class="token string">&quot;abc&quot;</span><span class="token punctuation">,</span> <span class="token number">2</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>str2<span class="token punctuation">)</span> <span class="token comment">// abcabc</span>

	<span class="token comment">// 第一个参数: 需要替换的字符串</span>

	<span class="token comment">// 第二个参数: 旧字符串</span>

	<span class="token comment">// 第三个参数: 新字符串</span>

	<span class="token comment">// 第四个参数: 用新字符串 替换 多少个旧字符串</span>

	<span class="token comment">// 注意点: 传入-1 代表只要有旧字符串就替换</span>

	<span class="token comment">// 注意点: 替换之后会生成新字符串, 原字符串不会受到影响</span>

	str3 <span class="token operator">:=</span> <span class="token string">&quot;abcdefabcdefabc&quot;</span>

	str4 <span class="token operator">:=</span> strings<span class="token punctuation">.</span><span class="token function">Replace</span><span class="token punctuation">(</span>str3<span class="token punctuation">,</span> <span class="token string">&quot;abc&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;mmm&quot;</span><span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>str3<span class="token punctuation">)</span> <span class="token comment">// abcdefabcdefabc</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>str4<span class="token punctuation">)</span> <span class="token comment">// mmmdefmmmdefmmm</span>

<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">custom</span><span class="token punctuation">(</span>r <span class="token builtin">rune</span><span class="token punctuation">)</span> <span class="token builtin">bool</span> <span class="token punctuation">{</span>

	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;被调用了, 当前传入的是%c\n&quot;</span><span class="token punctuation">,</span> r<span class="token punctuation">)</span>

	<span class="token keyword">if</span> r <span class="token operator">==</span> <span class="token char">&#39;,&#39;</span> <span class="token punctuation">{</span>

		<span class="token keyword">return</span> <span class="token boolean">true</span>

	<span class="token punctuation">}</span>

	<span class="token keyword">return</span> <span class="token boolean">false</span>

<span class="token punctuation">}</span>

</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><ul><li>字符串清理 <ul><li>func Trim(s string, cutset string) string</li><li>func TrimLeft(s string, cutset string) string</li><li>func TrimRight(s string, cutset string) string</li><li>func TrimFunc(s string, f func(rune) bool) string</li><li>func TrimLeftFunc(s string, f func(rune) bool) string</li><li>func TrimRightFunc(s string, f func(rune) bool) string</li><li>func TrimSpace(s string) string</li><li>func TrimPrefix(s, prefix string) string</li><li>func TrimSuffix(s, suffix string) string</li></ul></li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;strings&quot;</span>

	<span class="token string">&quot;fmt&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token comment">// 去除字符串两端指定字符</span>

	str1 <span class="token operator">:=</span> strings<span class="token punctuation">.</span><span class="token function">Trim</span><span class="token punctuation">(</span><span class="token string">&quot;!!!abc!!!def!!!&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;!&quot;</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>str1<span class="token punctuation">)</span> <span class="token comment">// abc!!!def</span>

	<span class="token comment">// 去除字符串左端指定字符</span>

	str2 <span class="token operator">:=</span> strings<span class="token punctuation">.</span><span class="token function">TrimLeft</span><span class="token punctuation">(</span><span class="token string">&quot;!!!abc!!!def!!!&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;!&quot;</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>str2<span class="token punctuation">)</span> <span class="token comment">// abc!!!def!!!</span>

	<span class="token comment">// 去除字符串右端指定字符</span>

	str3 <span class="token operator">:=</span> strings<span class="token punctuation">.</span><span class="token function">TrimRight</span><span class="token punctuation">(</span><span class="token string">&quot;!!!abc!!!def!!!&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;!&quot;</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>str3<span class="token punctuation">)</span> <span class="token comment">// !!!abc!!!def</span>

	<span class="token comment">// // 去除字符串两端空格</span>

	str4 <span class="token operator">:=</span> strings<span class="token punctuation">.</span><span class="token function">TrimSpace</span><span class="token punctuation">(</span><span class="token string">&quot; abc!!!def &quot;</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>str4<span class="token punctuation">)</span> <span class="token comment">// abc!!!def</span>

	<span class="token comment">// 按照方法定义规则,去除字符串两端符合规则内容</span>

	str5 <span class="token operator">:=</span> strings<span class="token punctuation">.</span><span class="token function">TrimFunc</span><span class="token punctuation">(</span><span class="token string">&quot;!!!abc!!!def!!!&quot;</span><span class="token punctuation">,</span> custom<span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>str5<span class="token punctuation">)</span> <span class="token comment">// abc!!!def</span>

	<span class="token comment">// 按照方法定义规则,去除字符串左端符合规则内容</span>

	str6 <span class="token operator">:=</span> strings<span class="token punctuation">.</span><span class="token function">TrimLeftFunc</span><span class="token punctuation">(</span><span class="token string">&quot;!!!abc!!!def!!!&quot;</span><span class="token punctuation">,</span> custom<span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>str6<span class="token punctuation">)</span> <span class="token comment">// abc!!!def!!!</span>

	<span class="token comment">// 按照方法定义规则,去除字符串右端符合规则内容</span>

	str7 <span class="token operator">:=</span> strings<span class="token punctuation">.</span><span class="token function">TrimRightFunc</span><span class="token punctuation">(</span><span class="token string">&quot;!!!abc!!!def!!!&quot;</span><span class="token punctuation">,</span> custom<span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>str7<span class="token punctuation">)</span> <span class="token comment">// !!!abc!!!def</span>

	<span class="token comment">// 取出字符串开头的指定字符串</span>

	str8 <span class="token operator">:=</span> strings<span class="token punctuation">.</span><span class="token function">TrimPrefix</span><span class="token punctuation">(</span><span class="token string">&quot;lnj-book.avi&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;lnj-&quot;</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>str8<span class="token punctuation">)</span> <span class="token comment">// book.avi</span>

	<span class="token comment">// 取出字符串结尾的指定字符串</span>

	str9 <span class="token operator">:=</span> strings<span class="token punctuation">.</span><span class="token function">TrimSuffix</span><span class="token punctuation">(</span><span class="token string">&quot;lnj-book.avi&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;.avi&quot;</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>str9<span class="token punctuation">)</span> <span class="token comment">// lnj-book</span>

<span class="token punctuation">}</span>

</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><hr><h2 id="正则表达式" tabindex="-1">正则表达式 <a class="header-anchor" href="#正则表达式" aria-hidden="true">#</a></h2><ul><li><p>正则表达式是对字符串操作的一种逻辑公式，就是用事先定义好的一些特定字符、及这些特定字符的组合，组成一个“规则字符串”，这个“规则字符串”用来表达对字符串的一种过滤逻辑。</p></li><li><p>相关规则标准详见</p><ul><li>百度百科</li><li>Go 语言官方文档 regexp 包</li></ul></li><li><p>Go 语言中正则表达式使用步骤</p><ul><li><p>创建一个正则表达式匹配规则对象</p></li><li><p>利用正则表达式匹配规则对象匹配指定字符串</p></li></ul></li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;regexp&quot;</span>
	<span class="token string">&quot;strings&quot;</span>

	<span class="token string">&quot;fmt&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token comment">// 创建一个正则表达式匹配规则对象</span>

	<span class="token comment">// reg := regexp.MustCompile(规则字符串)</span>

	<span class="token comment">// 利用正则表达式匹配规则对象匹配指定字符串</span>

	<span class="token comment">// 会将所有匹配到的数据放到一个字符串切片中返回</span>

	<span class="token comment">// 如果没有匹配到数据会返回 nil</span>

	<span class="token comment">// res := reg.FindAllString(需要匹配的字符串, 匹配多少个)</span>

	str <span class="token operator">:=</span> <span class="token string">&quot;Hello 李南江 1232&quot;</span>

	reg <span class="token operator">:=</span> regexp<span class="token punctuation">.</span><span class="token function">MustCompile</span><span class="token punctuation">(</span><span class="token string">&quot;2&quot;</span><span class="token punctuation">)</span>

	res <span class="token operator">:=</span> reg<span class="token punctuation">.</span><span class="token function">FindAllString</span><span class="token punctuation">(</span>str<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token comment">// [2 2]</span>

	res <span class="token operator">=</span> reg<span class="token punctuation">.</span><span class="token function">FindAllString</span><span class="token punctuation">(</span>str<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>res<span class="token punctuation">)</span> <span class="token comment">// [2]</span>

<span class="token punctuation">}</span>

</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><ul><li>匹配电话号码</li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;regexp&quot;</span>
	<span class="token string">&quot;strings&quot;</span>

	<span class="token string">&quot;fmt&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	res2 <span class="token operator">:=</span> <span class="token function">findPhoneNumber</span><span class="token punctuation">(</span><span class="token string">&quot;13554499311&quot;</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>res2<span class="token punctuation">)</span> <span class="token comment">// true</span>

	res2 <span class="token operator">=</span> <span class="token function">findPhoneNumber</span><span class="token punctuation">(</span><span class="token string">&quot;03554499311&quot;</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>res2<span class="token punctuation">)</span> <span class="token comment">// false</span>

	res2 <span class="token operator">=</span> <span class="token function">findPhoneNumber</span><span class="token punctuation">(</span><span class="token string">&quot;1355449931&quot;</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>res2<span class="token punctuation">)</span> <span class="token comment">// false</span>

<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">findPhoneNumber</span><span class="token punctuation">(</span>str <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token builtin">bool</span> <span class="token punctuation">{</span>

	<span class="token comment">// 创建一个正则表达式匹配规则对象</span>

	reg <span class="token operator">:=</span> regexp<span class="token punctuation">.</span><span class="token function">MustCompile</span><span class="token punctuation">(</span><span class="token string">&quot;^1[1-9]{10}&quot;</span><span class="token punctuation">)</span>

	<span class="token comment">// 利用正则表达式匹配规则对象匹配指定字符串</span>

	res <span class="token operator">:=</span> reg<span class="token punctuation">.</span><span class="token function">FindAllString</span><span class="token punctuation">(</span>str<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>

	<span class="token keyword">if</span> res <span class="token operator">==</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>

		<span class="token keyword">return</span> <span class="token boolean">false</span>

	<span class="token punctuation">}</span>

	<span class="token keyword">return</span> <span class="token boolean">true</span>

<span class="token punctuation">}</span>

</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><ul><li>匹配 Email</li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div></div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;regexp&quot;</span>
	<span class="token string">&quot;strings&quot;</span>

	<span class="token string">&quot;fmt&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	res2 <span class="token operator">=</span> <span class="token function">findEmail</span><span class="token punctuation">(</span><span class="token string">&quot;123@qq.com&quot;</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>res2<span class="token punctuation">)</span> <span class="token comment">// true</span>

	res2 <span class="token operator">=</span> <span class="token function">findEmail</span><span class="token punctuation">(</span><span class="token string">&quot;ab?de@qq.com&quot;</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>res2<span class="token punctuation">)</span> <span class="token comment">// false</span>

	res2 <span class="token operator">=</span> <span class="token function">findEmail</span><span class="token punctuation">(</span><span class="token string">&quot;123@qqcom&quot;</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>res2<span class="token punctuation">)</span> <span class="token comment">// false</span>

<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">findEmail</span><span class="token punctuation">(</span>str <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token builtin">bool</span> <span class="token punctuation">{</span>

	reg <span class="token operator">:=</span> regexp<span class="token punctuation">.</span><span class="token function">MustCompile</span><span class="token punctuation">(</span><span class="token string">&quot;^[a-zA-Z0-9_]+@[a-zA-Z0-9]+\\.[a-zA-Z0-9]+&quot;</span><span class="token punctuation">)</span>

	res <span class="token operator">:=</span> reg<span class="token punctuation">.</span><span class="token function">FindAllString</span><span class="token punctuation">(</span>str<span class="token punctuation">,</span> <span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span>

	<span class="token keyword">if</span> res <span class="token operator">==</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>

		<span class="token keyword">return</span> <span class="token boolean">false</span>

	<span class="token punctuation">}</span>

	<span class="token keyword">return</span> <span class="token boolean">true</span>

<span class="token punctuation">}</span>

</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><hr><h2 id="时间和日期函数" tabindex="-1">时间和日期函数 <a class="header-anchor" href="#时间和日期函数" aria-hidden="true">#</a></h2><ul><li>获取当前时间</li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;fmt&quot;</span>

	<span class="token string">&quot;time&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token keyword">var</span> t time<span class="token punctuation">.</span>Time <span class="token operator">=</span> time<span class="token punctuation">.</span><span class="token function">Now</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	<span class="token comment">// 2018-09-27 17:25:11.653198 +0800 CST m=+0.009759201</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span>

<span class="token punctuation">}</span>

</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><ul><li>获取年月日时分秒</li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;fmt&quot;</span>

	<span class="token string">&quot;time&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token keyword">var</span> t time<span class="token punctuation">.</span>Time <span class="token operator">=</span> time<span class="token punctuation">.</span><span class="token function">Now</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span><span class="token function">Year</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span><span class="token function">Month</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span><span class="token function">Day</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span><span class="token function">Hour</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span><span class="token function">Minute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span><span class="token function">Second</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>

</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><ul><li>格式化时间</li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例一</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;fmt&quot;</span>

	<span class="token string">&quot;time&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token keyword">var</span> t time<span class="token punctuation">.</span>Time <span class="token operator">=</span> time<span class="token punctuation">.</span><span class="token function">Now</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;当前的时间是: %d-%d-%d %d:%d:%d\n&quot;</span><span class="token punctuation">,</span> t<span class="token punctuation">.</span><span class="token function">Year</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>

		t<span class="token punctuation">.</span><span class="token function">Month</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> t<span class="token punctuation">.</span><span class="token function">Day</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> t<span class="token punctuation">.</span><span class="token function">Hour</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> t<span class="token punctuation">.</span><span class="token function">Minute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> t<span class="token punctuation">.</span><span class="token function">Second</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

	<span class="token keyword">var</span> dateStr <span class="token operator">=</span> fmt<span class="token punctuation">.</span><span class="token function">Sprintf</span><span class="token punctuation">(</span><span class="token string">&quot;%d-%d-%d %d:%d:%d&quot;</span><span class="token punctuation">,</span> t<span class="token punctuation">.</span><span class="token function">Year</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>

		t<span class="token punctuation">.</span><span class="token function">Month</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> t<span class="token punctuation">.</span><span class="token function">Day</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> t<span class="token punctuation">.</span><span class="token function">Hour</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> t<span class="token punctuation">.</span><span class="token function">Minute</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> t<span class="token punctuation">.</span><span class="token function">Second</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;当前的时间是:&quot;</span><span class="token punctuation">,</span> dateStr<span class="token punctuation">)</span>

<span class="token punctuation">}</span>

</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例二</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;fmt&quot;</span>

	<span class="token string">&quot;time&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token keyword">var</span> t time<span class="token punctuation">.</span>Time <span class="token operator">=</span> time<span class="token punctuation">.</span><span class="token function">Now</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	<span class="token comment">// 2006/01/02 15:04:05 这个字符串是 Go 语言规定的, 各个数字都是固定的</span>

	<span class="token comment">// 字符串中的各个数字可以只有组合, 这样就能按照需求返回格式化好的时间</span>

	str1 <span class="token operator">:=</span> t<span class="token punctuation">.</span><span class="token function">Format</span><span class="token punctuation">(</span><span class="token string">&quot;2006/01/02 15:04:05&quot;</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>str1<span class="token punctuation">)</span>

	str2 <span class="token operator">:=</span> t<span class="token punctuation">.</span><span class="token function">Format</span><span class="token punctuation">(</span><span class="token string">&quot;2006/01/02&quot;</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>str2<span class="token punctuation">)</span>

	str3 <span class="token operator">:=</span> t<span class="token punctuation">.</span><span class="token function">Format</span><span class="token punctuation">(</span><span class="token string">&quot;15:04:05&quot;</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>str3<span class="token punctuation">)</span>

<span class="token punctuation">}</span>

</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><ul><li><p>时间常量</p><ul><li><p>一般用于指定时间单位, 和休眠函数配合使用</p></li><li><p>例如: 100 毫秒, <code>100 *time.Millisecond</code></p></li></ul></li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;fmt&quot;</span>

	<span class="token string">&quot;time&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">const</span> <span class="token punctuation">(</span>
	Nanosecond Duration <span class="token operator">=</span> <span class="token number">1</span> <span class="token comment">// 纳秒</span>

	Microsecond <span class="token operator">=</span> <span class="token number">1000</span> <span class="token operator">*</span> Nanosecond <span class="token comment">// 微秒</span>

	Millisecond <span class="token operator">=</span> <span class="token number">1000</span> <span class="token operator">*</span> Microsecond <span class="token comment">// 毫秒</span>

	Second <span class="token operator">=</span> <span class="token number">1000</span> <span class="token operator">*</span> Millisecond <span class="token comment">// 秒</span>

	Minute <span class="token operator">=</span> <span class="token number">60</span> <span class="token operator">*</span> Second <span class="token comment">// 分钟</span>

	Hour <span class="token operator">=</span> <span class="token number">60</span> <span class="token operator">*</span> Minute <span class="token comment">// 小时</span>

<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token keyword">for</span> <span class="token punctuation">{</span>

		<span class="token comment">// 1 秒钟打印一次</span>

		time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>Second <span class="token operator">*</span> <span class="token number">1</span><span class="token punctuation">)</span>

		<span class="token comment">// 0.1 秒打印一次</span>

		<span class="token comment">//time.Sleep(time.Second * 0.1)</span>

		time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>Millisecond <span class="token operator">*</span> <span class="token number">100</span><span class="token punctuation">)</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;Hello LNJ&quot;</span><span class="token punctuation">)</span>

	<span class="token punctuation">}</span>

<span class="token punctuation">}</span>

</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><ul><li>获取当前时间戳 <ul><li>Unix 秒</li><li>UnixNano 纳秒</li><li>一般用于配合随机函数使用, 作为随机函数随机种子</li></ul></li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例一</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>

	<span class="token string">&quot;fmt&quot;</span>
	<span class="token string">&quot;math/rand&quot;</span>

	<span class="token string">&quot;time&quot;</span>

<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	t <span class="token operator">:=</span> time<span class="token punctuation">.</span><span class="token function">Now</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	<span class="token comment">// 获取 1970 年 1 月 1 日距离当前的时间(秒)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span><span class="token function">Unix</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

	<span class="token comment">// 获取 1970 年 1 月 1 日距离当前的时间(纳秒)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>t<span class="token punctuation">.</span><span class="token function">UnixNano</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例二</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;fmt&quot;</span>

	<span class="token string">&quot;math/rand&quot;</span>

	<span class="token string">&quot;time&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token comment">// 创建随机数种子</span>

	rand<span class="token punctuation">.</span><span class="token function">Seed</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span><span class="token function">Now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">UnixNano</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

	<span class="token comment">// 生成一个随机数</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>rand<span class="token punctuation">.</span><span class="token function">Intn</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>

</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><h2 id="go-语言中调用-c-语言函数" tabindex="-1">Go 语言中调用 C 语言函数 <a class="header-anchor" href="#go-语言中调用-c-语言函数" aria-hidden="true">#</a></h2><ul><li>在 Go 语言开篇中我们已经知道, Go 语言与 C 语言之间有着千丝万缕的关系, 甚至被称之为 21 世纪的 C 语言</li><li>所以在 Go 与 C 语言互操作方面，Go 更是提供了强大的支持。尤其是在 Go 中使用 C，你甚至可以直接在 Go 源文件中编写 C 代码，这是其他语言所无法望其项背的</li><li>格式: <ul><li>在 import &quot;C&quot;之前通过单行注释或者通过多行注释编写 C 语言代码</li><li>在 import &quot;C&quot;之后编写 Go 语言代码</li><li>在 Go 语言代码中通过 C.函数名称() 调用 C 语言代码即可</li><li>注意: import &quot;C&quot;和前面的注释之间不能出现空行或其它内容, 必须紧紧相连</li></ul></li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例一</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token comment">//#include &lt;stdio.h&gt;</span>

<span class="token comment">//void say(){</span>

<span class="token comment">// printf(&quot;Hello World\n&quot;);</span>

<span class="token comment">//}</span>

<span class="token keyword">import</span> <span class="token string">&quot;C&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	C<span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>

</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例二</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token comment">/*

#include &lt;stdio.h&gt;

void say(){

printf(&quot;Hello World\n&quot;);

}

*/</span>

<span class="token keyword">import</span> <span class="token string">&quot;C&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	C<span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>

</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><blockquote><ul><li>Go 语言中没有包名是 C 的包, 但是这个导入会促使 Go 编译器利用 cgo 工具预处理文件</li><li>在预处理过程中,cgo 会产生一个临时包, 这个包里包含了所有 C 函数和类型对应的 Go 语言声明</li><li>最终使得 cgo 工具可以通过一种特殊的方式来调用 import &quot;C&quot;之前的 C 语言代码</li></ul></blockquote><ul><li>常规问题: <ul><li>如果编译报错<code>cc1.exe: sorry, unimplemented: 64-bit mode not compiled in</code></li><li>说明你使用的是 64 的 golang，而你使用的 32 位的 MinGW，所以需要下载 64 位的 mingw 并配置环境变量</li><li>下载地址: <a href="https://www.baidu.com/s?wd=sorry%2C%20unimplemented%3A%2064-bit%20mode%20not%20compiled%20in" target="_blank" rel="noopener noreferrer">https://www.baidu.com/s?wd=sorry%2C unimplemented%3A 64-bit mode not compiled in</a></li></ul></li></ul><hr><h2 id="c-语言中调用-go-语言函数-很少使用" tabindex="-1">C 语言中调用 Go 语言函数(很少使用) <a class="header-anchor" href="#c-语言中调用-go-语言函数-很少使用" aria-hidden="true">#</a></h2><ul><li>在 Go 代码中通过 <code>//export Go函数名称</code>导出 Go 的函数名称</li><li>在 C 代码中通过 <code>extern 返回值类型 Go函数名称(形参列表);</code> 声明 Go 中导出的函数名称</li><li>注意: <code>//export Go函数名称</code>和<code>extern 返回值类型 Go函数名称(形参列表);</code>不能在同一个文件中</li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例一</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;C&quot;</span>

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token comment">// 导出 Go 函数声明, 给 C 使用</span>

<span class="token comment">//export GoFunction</span>

<span class="token keyword">func</span> <span class="token function">GoFunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;GoFunction!!!&quot;</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>

</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例二</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token comment">/**

#include &lt;stdio.h&gt;

// 声明 Go 中的函数

extern void GoFunction();

void CFunction() {

printf(&quot;CFunction!\n&quot;);

GoFunction();

}

*/</span>

<span class="token keyword">import</span> <span class="token string">&quot;C&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	C<span class="token punctuation">.</span><span class="token function">CFunction</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>

</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><blockquote><ul><li>由于不在同一个文件, 所以需要通过 go build 或者 go install 同时编译多个文件</li></ul></blockquote><hr><ul><li>Go 中使用 C 语言的类型</li><li>基本数据类型 <ul><li>在 Go 中可以用如下方式访问 C 原生的数值类型：</li></ul></li></ul><div class="language-go"><pre><code>	C<span class="token punctuation">.</span>char<span class="token punctuation">,</span>

  C<span class="token punctuation">.</span>schar <span class="token punctuation">(</span>signed char<span class="token punctuation">)</span><span class="token punctuation">,</span>

  C<span class="token punctuation">.</span>uchar <span class="token punctuation">(</span>unsigned char<span class="token punctuation">)</span><span class="token punctuation">,</span>

  C<span class="token punctuation">.</span>short<span class="token punctuation">,</span>

  C<span class="token punctuation">.</span>ushort <span class="token punctuation">(</span>unsigned short<span class="token punctuation">)</span><span class="token punctuation">,</span>

  C<span class="token punctuation">.</span><span class="token builtin">int</span><span class="token punctuation">,</span> C<span class="token punctuation">.</span><span class="token builtin">uint</span> <span class="token punctuation">(</span>unsigned <span class="token builtin">int</span><span class="token punctuation">)</span><span class="token punctuation">,</span>

  C<span class="token punctuation">.</span>long<span class="token punctuation">,</span>

  C<span class="token punctuation">.</span>ulong <span class="token punctuation">(</span>unsigned long<span class="token punctuation">)</span><span class="token punctuation">,</span>

  C<span class="token punctuation">.</span>longlong <span class="token punctuation">(</span>long long<span class="token punctuation">)</span><span class="token punctuation">,</span>

  C<span class="token punctuation">.</span>ulonglong <span class="token punctuation">(</span>unsigned long long<span class="token punctuation">)</span><span class="token punctuation">,</span>

  C<span class="token punctuation">.</span>float<span class="token punctuation">,</span>

  C<span class="token punctuation">.</span>double
</code></pre></div><ul><li>Go 的数值类型与 C 中的数值类型不是一一对应的。因此在使用对方类型变量时必须显式转型操作</li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token comment">/*

#include &lt;stdio.h&gt;

int num = 123;

float value = 3.14;

char ch = &#39;N&#39;;

*/</span>

<span class="token keyword">import</span> <span class="token string">&quot;C&quot;</span>

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token keyword">var</span> num1 C<span class="token punctuation">.</span><span class="token builtin">int</span> <span class="token operator">=</span> C<span class="token punctuation">.</span>num

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>num1<span class="token punctuation">)</span>

	<span class="token keyword">var</span> num2 <span class="token builtin">int</span>

	<span class="token comment">//num2 = num1 // 报错</span>

	num2 <span class="token operator">=</span> <span class="token function">int</span><span class="token punctuation">(</span>num1<span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>num2<span class="token punctuation">)</span>

	<span class="token keyword">var</span> value1 C<span class="token punctuation">.</span>float <span class="token operator">=</span> C<span class="token punctuation">.</span>value

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>value1<span class="token punctuation">)</span>

	<span class="token keyword">var</span> value2 <span class="token builtin">float32</span> <span class="token operator">=</span> <span class="token function">float32</span><span class="token punctuation">(</span>C<span class="token punctuation">.</span>value<span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>value2<span class="token punctuation">)</span>

	<span class="token keyword">var</span> ch1 C<span class="token punctuation">.</span>char <span class="token operator">=</span> C<span class="token punctuation">.</span>ch

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>ch1<span class="token punctuation">)</span>

	<span class="token keyword">var</span> ch2 <span class="token builtin">byte</span> <span class="token operator">=</span> <span class="token function">byte</span><span class="token punctuation">(</span>C<span class="token punctuation">.</span>ch<span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>ch2<span class="token punctuation">)</span>

<span class="token punctuation">}</span>

</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><hr><ul><li>字符串类型 <ul><li>C 语言中并不没有字符串类型，在 C 中用带结尾&#39;\0&#39;的字符数组来表示字符串；而在 Go 中 string 类型是原生类型，因此在两种语言互操作是必须要做字符串类型的转换</li><li>C 字符串转换 Go 字符串: <code>C.GoString(str)</code></li><li>Go 字符串转换 C 字符串: <code>C.CString(str)</code></li></ul></li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><h2 id="-1" tabindex="-1">::: <a class="header-anchor" href="#-1" aria-hidden="true">#</a></h2><ul><li>指针类型 <ul><li>unsafe.Pointer：通用指针类型，用于转换不同类型的指针，不能进行指针运算</li><li>原生数值类型的指针类型可按 Go 语法在类型前面加上*，例如:var p *C.int。</li><li>而 void*比较特殊，用 Go 中的 unsafe.Pointer 表示。</li><li>uintptr：用于指针运算，GC 不把 uintptr 当指针，uintptr 无法持有对象。uintptr 类型的目标会被回收</li><li>也就是说 unsafe.Pointer 是桥梁，可以让任意类型的指针实现相互转换，也可以将任意类型的指针转换为 uintptr 进行指针运算</li></ul></li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;C&quot;</span>
<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;fmt&quot;</span>
	<span class="token string">&quot;unsafe&quot;</span>
<span class="token punctuation">)</span>

<span class="token comment">/*

#include &lt;stdio.h&gt;

int num = 123;

void *ptr = &amp;num;

*/</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token comment">// 这是一个 C 语言变量</span>

	<span class="token keyword">var</span> num C<span class="token punctuation">.</span><span class="token builtin">int</span> <span class="token operator">=</span> C<span class="token punctuation">.</span>num

	<span class="token comment">// 这是一个 C 语言指针</span>

	<span class="token keyword">var</span> p1 <span class="token operator">*</span>C<span class="token punctuation">.</span><span class="token builtin">int</span> <span class="token operator">=</span> <span class="token operator">&amp;</span>num

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token operator">*</span>p1<span class="token punctuation">)</span>

	<span class="token comment">//var p2 *C.void = C.ptr // 报错</span>

	<span class="token comment">// 利用 unsafe.Pointer 接收 viod *</span>

	<span class="token keyword">var</span> p2 unsafe<span class="token punctuation">.</span>Pointer <span class="token operator">=</span> C<span class="token punctuation">.</span>ptr

	<span class="token comment">// 将 unsafe.Pointer 转换为具体类型</span>

	<span class="token keyword">var</span> p3 <span class="token operator">*</span>C<span class="token punctuation">.</span><span class="token builtin">int</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token operator">*</span>C<span class="token punctuation">.</span><span class="token builtin">int</span><span class="token punctuation">)</span><span class="token punctuation">(</span>p2<span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token operator">*</span>p3<span class="token punctuation">)</span>

<span class="token punctuation">}</span>

</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;C&quot;</span>
<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;fmt&quot;</span>
	<span class="token string">&quot;unsafe&quot;</span>
<span class="token punctuation">)</span>

<span class="token comment">/*

#include &lt;stdio.h&gt;

char *str = &quot;www.it666.com&quot;;

void say(char *name){

printf(&quot;my name is %s&quot;, name);

}

*/</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token comment">// 1.C 语言字符串转换 Go 语言字符串</span>

	str1 <span class="token operator">:=</span> C<span class="token punctuation">.</span>str

	str2 <span class="token operator">:=</span> C<span class="token punctuation">.</span><span class="token function">GoString</span><span class="token punctuation">(</span>str1<span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>str2<span class="token punctuation">)</span>

	<span class="token comment">// 2.Go 语言字符串转换 C 语言字符串</span>

	str <span class="token operator">:=</span> <span class="token string">&quot;lnj&quot;</span>

	cs <span class="token operator">:=</span> C<span class="token punctuation">.</span><span class="token function">CString</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span>

	C<span class="token punctuation">.</span><span class="token function">say</span><span class="token punctuation">(</span>cs<span class="token punctuation">)</span>

	<span class="token comment">// 注意: 转换后所得到的 C 字符串 cs 并不能由 Go 的 gc 所管理，我们必须手动释放 cs 所占用的内存</span>

	C<span class="token punctuation">.</span><span class="token function">free</span><span class="token punctuation">(</span>unsafe<span class="token punctuation">.</span><span class="token function">Pointer</span><span class="token punctuation">(</span>cs<span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>

</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><hr><ul><li>枚举类型 <ul><li>C 语言中的枚举类型在 Go 语言中的表现形式为 C.enum_XXX</li><li>访问枚举和访问普通变量无异, 直接通过 C.枚举值即可</li></ul></li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><h2 id="-2" tabindex="-1">::: <a class="header-anchor" href="#-2" aria-hidden="true">#</a></h2><ul><li>结构体类型 <ul><li>C 语言中的结构体类型在 Go 语言中的表现形式为 C.struct_XXX</li><li>访问结构体 直接通过<code>结构体变量.属性名称</code>即可</li></ul></li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><h2 id="-3" tabindex="-1">::: <a class="header-anchor" href="#-3" aria-hidden="true">#</a></h2><ul><li>数组类型 <ul><li>C 语言中的数组与 Go 语言中的数组差异较大， C 中的数组是指针类型,  Go 中的数组是值类型</li><li>目前似乎无法直接显式的在两者之间进行转型，官方文档也没有说明。</li></ul></li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><h2 id="-4" tabindex="-1">::: <a class="header-anchor" href="#-4" aria-hidden="true">#</a></h2><ul><li>利用 Go 语言调用 C 语言函数, 实现无缓冲区输入 <ul><li>请在终端运行</li></ul></li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;C&quot;</span>
<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token comment">/*

#include &lt;stdio.h&gt;

char lowerCase(char ch){

// 1.判断当前是否是小写字母

if(ch &gt;= &#39;a&#39; &amp;&amp; ch &lt;= &#39;z&#39;){

return ch;

}

// 注意点: 不能直接编写else, 因为执行到else不一定是一个大写字母

else if(ch &gt;= &#39;A&#39; &amp;&amp; ch &lt;= &#39;Z&#39;){

return ch + (&#39;a&#39; - &#39;A&#39;);

}

return &#39; &#39;;

}

char getCh(){

// 1.接收用户输入的数据

char ch;

scanf(&quot;%c&quot;, &amp;ch);

setbuf(stdin, NULL);

// 2.大小写转换

ch = lowerCase(ch);

// 3.返回转换好的字符

return ch;

}

*/</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token keyword">for</span> <span class="token punctuation">{</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;请输入 w a s d 其中一个字符, 控制小人走出迷宫&quot;</span><span class="token punctuation">)</span>

		<span class="token keyword">var</span> ch <span class="token builtin">byte</span> <span class="token operator">=</span> <span class="token function">byte</span><span class="token punctuation">(</span>C<span class="token punctuation">.</span><span class="token function">getCh</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%c&quot;</span><span class="token punctuation">,</span> ch<span class="token punctuation">)</span>

	<span class="token punctuation">}</span>

<span class="token punctuation">}</span>

</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token comment">/*

#include &lt;stdio.h&gt;

int cArray[5] = {1, 2, 3, 4, 5};

*/</span>

<span class="token keyword">import</span> <span class="token string">&quot;C&quot;</span>

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token keyword">var</span> cArr <span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span>C<span class="token punctuation">.</span><span class="token builtin">int</span> <span class="token operator">=</span> C<span class="token punctuation">.</span>cArray

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>cArr<span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%T\n&quot;</span><span class="token punctuation">,</span> cArr<span class="token punctuation">)</span>

<span class="token punctuation">}</span>

</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;C&quot;</span>
<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token comment">/*

#include &lt;stdio.h&gt;

struct Point {

float x;

float y;

};

*/</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token comment">// 1.利用 C 的结构体类型创建结构体</span>

	<span class="token keyword">var</span> cp C<span class="token punctuation">.</span>struct_Point <span class="token operator">=</span> C<span class="token punctuation">.</span>struct_Point<span class="token punctuation">{</span><span class="token number">6.6</span><span class="token punctuation">,</span> <span class="token number">8.8</span><span class="token punctuation">}</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>cp<span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%T\n&quot;</span><span class="token punctuation">,</span> cp<span class="token punctuation">)</span>

	<span class="token comment">// 2.将 C 语言结构体转换为 Go 语言结构体</span>

	<span class="token keyword">type</span> GoPoint <span class="token keyword">struct</span> <span class="token punctuation">{</span>
		x <span class="token builtin">float32</span>

		y <span class="token builtin">float32</span>
	<span class="token punctuation">}</span>

	<span class="token keyword">var</span> gp GoPoint

	gp<span class="token punctuation">.</span>x <span class="token operator">=</span> <span class="token function">float32</span><span class="token punctuation">(</span>cp<span class="token punctuation">.</span>x<span class="token punctuation">)</span>

	gp<span class="token punctuation">.</span>y <span class="token operator">=</span> <span class="token function">float32</span><span class="token punctuation">(</span>cp<span class="token punctuation">.</span>y<span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>gp<span class="token punctuation">)</span>

<span class="token punctuation">}</span>

</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token comment">/*

#include &lt;stdio.h&gt;

enum Gender {

GenderMale,

GenderFemale,

GenderYao

};

*/</span>

<span class="token keyword">import</span> <span class="token string">&quot;C&quot;</span>

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token keyword">var</span> sex C<span class="token punctuation">.</span>enum_Gender <span class="token operator">=</span> C<span class="token punctuation">.</span>GenderMale

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>sex<span class="token punctuation">)</span>

	sex <span class="token operator">=</span> C<span class="token punctuation">.</span>GenderFemale

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>sex<span class="token punctuation">)</span>

	sex <span class="token operator">=</span> C<span class="token punctuation">.</span>GenderYao

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>sex<span class="token punctuation">)</span>

<span class="token punctuation">}</span>

</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><h2 id="文件的打开和关闭" tabindex="-1">文件的打开和关闭 <a class="header-anchor" href="#文件的打开和关闭" aria-hidden="true">#</a></h2><ul><li>和 C 语言一样, Go 语言中操作文件也是通过一个 FILE 结构体</li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">type</span> file <span class="token keyword">struct</span> <span class="token punctuation">{</span>

	pfd poll<span class="token punctuation">.</span>FD

	name <span class="token builtin">string</span>

	dirinfo <span class="token operator">*</span>dirInfo

<span class="token punctuation">}</span>

<span class="token keyword">type</span> File <span class="token keyword">struct</span> <span class="token punctuation">{</span>

	<span class="token operator">*</span>file <span class="token comment">// os specific</span>

<span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><ul><li><p>Open 函数</p><ul><li>func Open(name string) (file *File, err error)</li><li>Open 打开一个文件用于<code>读取</code></li></ul></li><li><p>Close 函数</p><ul><li>func (f *File) Close() error</li><li>Close 关闭文件 f</li></ul></li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;fmt&quot;</span>

	<span class="token string">&quot;os&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token comment">// 1.打开一个文件</span>

	<span class="token comment">// 注意: 文件不存在不会创建, 会报错</span>

	<span class="token comment">// 注意: 通过 Open 打开只能读取, 不能写入</span>

	fp<span class="token punctuation">,</span> err <span class="token operator">:=</span> os<span class="token punctuation">.</span><span class="token function">Open</span><span class="token punctuation">(</span><span class="token string">&quot;d:/lnj.txt&quot;</span><span class="token punctuation">)</span>

	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>

	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>fp<span class="token punctuation">)</span>

	<span class="token punctuation">}</span>

	<span class="token comment">// 2.关闭一个文件</span>

	<span class="token keyword">defer</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

		err <span class="token operator">=</span> fp<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

		<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>

			fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>

		<span class="token punctuation">}</span>

	<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>

</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><hr><h2 id="文件读取" tabindex="-1">文件读取 <a class="header-anchor" href="#文件读取" aria-hidden="true">#</a></h2><ul><li>Read 函数(不带缓冲区去读) <ul><li>func (f *File) Read(b []byte) (n int, err error)</li><li>Read 方法从 f 中读取最多 len(b)字节数据并写入 b,</li></ul></li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;fmt&quot;</span>

	<span class="token string">&quot;io&quot;</span>

	<span class="token string">&quot;os&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token comment">// 1.打开一个文件</span>

	<span class="token comment">// 注意: 文件不存在不会创建, 会报错</span>

	<span class="token comment">// 注意: 通过 Open 打开只能读取, 不能写入</span>

	fp<span class="token punctuation">,</span> err <span class="token operator">:=</span> os<span class="token punctuation">.</span><span class="token function">Open</span><span class="token punctuation">(</span><span class="token string">&quot;d:/lnj.txt&quot;</span><span class="token punctuation">)</span>

	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>

	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>fp<span class="token punctuation">)</span>

	<span class="token punctuation">}</span>

	<span class="token comment">// 2.关闭一个文件</span>

	<span class="token keyword">defer</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

		err <span class="token operator">=</span> fp<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

		<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>

			fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>

		<span class="token punctuation">}</span>

	<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	<span class="token comment">// 3.读取指定指定字节个数据</span>

	<span class="token comment">// 注意点: \n 也会被读取进来</span>

	<span class="token comment">//buf := make([]byte, 50)</span>

	<span class="token comment">//count, err := fp.Read(buf)</span>

	<span class="token comment">//if err != nil {</span>

	<span class="token comment">// fmt.Println(err)</span>

	<span class="token comment">//}else{</span>

	<span class="token comment">// fmt.Println(count)</span>

	<span class="token comment">// fmt.Println(string(buf))</span>

	<span class="token comment">//}</span>

	<span class="token comment">// 4.读取文件中所有内容, 直到文件末尾为止</span>

	buf <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>

	<span class="token keyword">for</span> <span class="token punctuation">{</span>

		count<span class="token punctuation">,</span> err <span class="token operator">:=</span> fp<span class="token punctuation">.</span><span class="token function">Read</span><span class="token punctuation">(</span>buf<span class="token punctuation">)</span>

		<span class="token comment">// 注意: 这行代码要放到判断 EOF 之前, 否则会出现少读一行情况</span>

		fmt<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token function">string</span><span class="token punctuation">(</span>buf<span class="token punctuation">[</span><span class="token punctuation">:</span>count<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

		<span class="token keyword">if</span> err <span class="token operator">==</span> io<span class="token punctuation">.</span>EOF <span class="token punctuation">{</span>

			<span class="token keyword">break</span>

		<span class="token punctuation">}</span>

	<span class="token punctuation">}</span>

<span class="token punctuation">}</span>

</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><ul><li>ReadBytes 和 ReadString 函数(带缓冲区去读) <ul><li>func (b *Reader) ReadBytes(delim byte) (line []byte, err error)</li><li>ReadBytes 读取直到第一次遇到 delim 字节</li><li>func (b *Reader) ReadString(delim byte) (line string, err error)</li><li>ReadString 读取直到第一次遇到 delim 字节</li></ul></li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;bufio&quot;</span>

	<span class="token string">&quot;fmt&quot;</span>

	<span class="token string">&quot;io&quot;</span>

	<span class="token string">&quot;os&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token comment">// 1.打开一个文件</span>

	<span class="token comment">// 注意: 文件不存在不会创建, 会报错</span>

	<span class="token comment">// 注意: 通过 Open 打开只能读取, 不能写入</span>

	fp<span class="token punctuation">,</span> err <span class="token operator">:=</span> os<span class="token punctuation">.</span><span class="token function">Open</span><span class="token punctuation">(</span><span class="token string">&quot;d:/lnj.txt&quot;</span><span class="token punctuation">)</span>

	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>

	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>fp<span class="token punctuation">)</span>

	<span class="token punctuation">}</span>

	<span class="token comment">// 2.关闭一个文件</span>

	<span class="token keyword">defer</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

		err <span class="token operator">=</span> fp<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

		<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>

			fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>

		<span class="token punctuation">}</span>

	<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	<span class="token comment">// 3.读取一行数据</span>

	<span class="token comment">// 创建读取缓冲区, 默认大小 4096</span>

	<span class="token comment">//r :=bufio.NewReader(fp)</span>

	<span class="token comment">//buf, err := r.ReadBytes(&#39;\n&#39;)</span>

	<span class="token comment">//buf, err := r.ReadString(&#39;\n&#39;)</span>

	<span class="token comment">//if err != nil{</span>

	<span class="token comment">// fmt.Println(err)</span>

	<span class="token comment">//}else{</span>

	<span class="token comment">// fmt.Println(string(buf))</span>

	<span class="token comment">//}</span>

	<span class="token comment">// 4.读取文件中所有内容, 直到文件末尾为止</span>

	r <span class="token operator">:=</span> bufio<span class="token punctuation">.</span><span class="token function">NewReader</span><span class="token punctuation">(</span>fp<span class="token punctuation">)</span>

	<span class="token keyword">for</span> <span class="token punctuation">{</span>

		<span class="token comment">//buf, err := r.ReadBytes(&#39;\n&#39;)</span>

		buf<span class="token punctuation">,</span> err <span class="token operator">:=</span> r<span class="token punctuation">.</span><span class="token function">ReadString</span><span class="token punctuation">(</span><span class="token char">&#39;\n&#39;</span><span class="token punctuation">)</span>

		fmt<span class="token punctuation">.</span><span class="token function">Print</span><span class="token punctuation">(</span><span class="token function">string</span><span class="token punctuation">(</span>buf<span class="token punctuation">)</span><span class="token punctuation">)</span>

		<span class="token keyword">if</span> err <span class="token operator">==</span> io<span class="token punctuation">.</span>EOF <span class="token punctuation">{</span>

			<span class="token keyword">break</span>

		<span class="token punctuation">}</span>

	<span class="token punctuation">}</span>

<span class="token punctuation">}</span>

</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><ul><li>ReadFile 函数 <ul><li>func ReadFile(filename string) ([]byte, error)</li><li>从 filename 指定的文件中读取数据并返回文件的所有内容</li><li>不适合大文件读取</li></ul></li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><h2 id="-5" tabindex="-1">::: <a class="header-anchor" href="#-5" aria-hidden="true">#</a></h2><h2 id="文件创建和写入" tabindex="-1">文件创建和写入 <a class="header-anchor" href="#文件创建和写入" aria-hidden="true">#</a></h2><ul><li>Create 函数 <ul><li>func Create(name string) (file *File, err error)</li><li>Create 采用模式 0666（任何人都可读写，不可执行）创建一个名为 name 的文件</li><li>如果文件存在会覆盖原有文件</li></ul></li><li>Write 函数 <ul><li>func (f *File) Write(b []byte) (n int, err error)</li><li>将指定字节数组写入到文件中</li></ul></li><li>WriteString 函数 <ul><li>func (f *File) WriteString(s string) (ret int, err error)</li><li>将指定字符串写入到文件中</li></ul></li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;fmt&quot;</span>

	<span class="token string">&quot;os&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token comment">// 1.创建一个文件</span>

	fp<span class="token punctuation">,</span> err <span class="token operator">:=</span> os<span class="token punctuation">.</span><span class="token function">Create</span><span class="token punctuation">(</span><span class="token string">&quot;d:/lnj.txt&quot;</span><span class="token punctuation">)</span>

	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>

	<span class="token punctuation">}</span>

	<span class="token comment">// 2.关闭打开的文件</span>

	<span class="token keyword">defer</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

		err <span class="token operator">:=</span> fp<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

		<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>

			fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>

		<span class="token punctuation">}</span>

	<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	<span class="token comment">// 2.往文件中写入数据</span>

	<span class="token comment">// 注意: Windows 换行是\r\n</span>

	bytes <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">{</span><span class="token char">&#39;l&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;n&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;j&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;\r&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;\n&#39;</span><span class="token punctuation">}</span>

	fp<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span>bytes<span class="token punctuation">)</span>

	fp<span class="token punctuation">.</span><span class="token function">WriteString</span><span class="token punctuation">(</span><span class="token string">&quot;www.it666.com\r\n&quot;</span><span class="token punctuation">)</span>

	fp<span class="token punctuation">.</span><span class="token function">WriteString</span><span class="token punctuation">(</span><span class="token string">&quot;www.itzb.com\r\n&quot;</span><span class="token punctuation">)</span>

	<span class="token comment">// 注意: Go 语言采用 UTF-8 编码, 一个中文占用 3 个字节</span>

	fp<span class="token punctuation">.</span><span class="token function">WriteString</span><span class="token punctuation">(</span><span class="token string">&quot;李南江&quot;</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>

</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;fmt&quot;</span>

	<span class="token string">&quot;io/ioutil&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	filePath <span class="token operator">:=</span> <span class="token string">&quot;d:/lnj.txt&quot;</span>

	buf<span class="token punctuation">,</span> err <span class="token operator">:=</span> ioutil<span class="token punctuation">.</span><span class="token function">ReadFile</span><span class="token punctuation">(</span>filePath<span class="token punctuation">)</span>

	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>

	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token function">string</span><span class="token punctuation">(</span>buf<span class="token punctuation">)</span><span class="token punctuation">)</span>

	<span class="token punctuation">}</span>

<span class="token punctuation">}</span>

</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><ul><li>OpenFile 函数 <ul><li>0 没有任何权限</li><li>1.执行权限(如果是可执行程序, 可以运行)</li><li>2.写权限</li><li>3.写权限和执行权限</li><li>4.读权限</li><li>5.读权限和执行权限</li><li>6.读权限和写权限</li><li>7.读权限和写权限以及执行权限</li><li>func OpenFile(name string, flag int, perm FileMode) (file *File, err error)</li><li>第一个参数: 打开的路径</li><li>第二个参数: 打开的模式</li><li>第三个参数: 指定权限</li></ul></li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;syscall&quot;</span>

<span class="token keyword">const</span> <span class="token punctuation">(</span>
	O_RDONLY <span class="token builtin">int</span> <span class="token operator">=</span> syscall<span class="token punctuation">.</span>O_RDONLY <span class="token comment">// 只读模式打开文件</span>

	O_WRONLY <span class="token builtin">int</span> <span class="token operator">=</span> syscall<span class="token punctuation">.</span>O_WRONLY <span class="token comment">// 只写模式打开文件</span>

	O_RDWR <span class="token builtin">int</span> <span class="token operator">=</span> syscall<span class="token punctuation">.</span>O_RDWR <span class="token comment">// 读写模式打开文件</span>

	O_APPEND <span class="token builtin">int</span> <span class="token operator">=</span> syscall<span class="token punctuation">.</span>O_APPEND <span class="token comment">// 写操作时将数据附加到文件尾部</span>

	O_CREATE <span class="token builtin">int</span> <span class="token operator">=</span> syscall<span class="token punctuation">.</span>O_CREAT <span class="token comment">// 如果不存在将创建一个新文件</span>

	O_EXCL <span class="token builtin">int</span> <span class="token operator">=</span> syscall<span class="token punctuation">.</span>O_EXCL <span class="token comment">// 和 O_CREATE 配合使用，文件必须不存在</span>

	O_SYNC <span class="token builtin">int</span> <span class="token operator">=</span> syscall<span class="token punctuation">.</span>O_SYNC <span class="token comment">// 打开文件用于同步 I/O</span>

	O_TRUNC <span class="token builtin">int</span> <span class="token operator">=</span> syscall<span class="token punctuation">.</span>O_TRUNC <span class="token comment">// 如果可能，打开时清空文件</span>

<span class="token punctuation">)</span>

<span class="token keyword">const</span> <span class="token punctuation">(</span>

	<span class="token comment">// 单字符是被 String 方法用于格式化的属性缩写。</span>

	ModeDir FileMode <span class="token operator">=</span> <span class="token number">1</span> <span class="token operator">&lt;&lt;</span> <span class="token punctuation">(</span><span class="token number">32</span> <span class="token operator">-</span> <span class="token number">1</span> <span class="token operator">-</span> <span class="token boolean">iota</span><span class="token punctuation">)</span> <span class="token comment">// d: 目录</span>

	ModeAppend <span class="token comment">// a: 只能写入，且只能写入到末尾</span>

	ModeExclusive <span class="token comment">// l: 用于执行</span>

	ModeTemporary <span class="token comment">// T: 临时文件（非备份文件）</span>

	ModeSymlink <span class="token comment">// L: 符号链接（不是快捷方式文件）</span>

	ModeDevice <span class="token comment">// D: 设备</span>

	ModeNamedPipe <span class="token comment">// p: 命名管道（FIFO）</span>

	ModeSocket <span class="token comment">// S: Unix 域 socket</span>

	ModeSetuid <span class="token comment">// u: 表示文件具有其创建者用户 id 权限</span>

	ModeSetgid <span class="token comment">// g: 表示文件具有其创建者组 id 的权限</span>

	ModeCharDevice <span class="token comment">// c: 字符设备，需已设置 ModeDevice</span>

	ModeSticky <span class="token comment">// t: 只有 root/创建者能删除/移动文件</span>

	<span class="token comment">// 覆盖所有类型位（用于通过&amp;获取类型位），对普通文件，所有这些位都不应被设置</span>

	ModeType <span class="token operator">=</span> ModeDir <span class="token operator">|</span> ModeSymlink <span class="token operator">|</span> ModeNamedPipe <span class="token operator">|</span> ModeSocket <span class="token operator">|</span> ModeDevice

	ModePerm FileMode <span class="token operator">=</span> <span class="token number">0777</span> <span class="token comment">// 覆盖所有 Unix 权限位（用于通过&amp;获取类型位）</span>

<span class="token punctuation">)</span>

</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><ul><li>不带缓冲区写入</li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;fmt&quot;</span>

	<span class="token string">&quot;os&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token comment">// 注意点: 第三个参数在 Windows 没有效果</span>

	<span class="token comment">// -rw-rw-rw- (666) 所有用户都有文件读、写权限。</span>

	<span class="token comment">//-rwxrwxrwx (777) 所有用户都有读、写、执行权限。</span>

	<span class="token comment">// 1.打开文件</span>

	<span class="token comment">//fp, err := os.OpenFile(&quot;d:/lnj.txt&quot;, os.O_CREATE|os.O_RDWR, 0666)</span>

	fp<span class="token punctuation">,</span> err <span class="token operator">:=</span> os<span class="token punctuation">.</span><span class="token function">OpenFile</span><span class="token punctuation">(</span><span class="token string">&quot;d:/lnj.txt&quot;</span><span class="token punctuation">,</span> os<span class="token punctuation">.</span>O_CREATE<span class="token operator">|</span>os<span class="token punctuation">.</span>O_APPEND<span class="token punctuation">,</span> <span class="token number">0666</span><span class="token punctuation">)</span>

	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>

	<span class="token punctuation">}</span>

	<span class="token comment">// 2.关闭打开的文件</span>

	<span class="token keyword">defer</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

		err <span class="token operator">:=</span> fp<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

		<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>

			fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>

		<span class="token punctuation">}</span>

	<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	<span class="token comment">// 注意点:</span>

	<span class="token comment">// 如果 O_RDWR 模式打开, 被打开文件已经有内容, 会从最前面开始覆盖</span>

	<span class="token comment">// 如果 O_APPEND 模式打开, 被打开文件已经有内容, 会从在最后追加</span>

	<span class="token comment">// 3.往文件中写入数据</span>

	bytes <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">{</span><span class="token char">&#39;l&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;n&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;j&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;\r&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;\n&#39;</span><span class="token punctuation">}</span>

	fp<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span>bytes<span class="token punctuation">)</span>

	fp<span class="token punctuation">.</span><span class="token function">WriteString</span><span class="token punctuation">(</span><span class="token string">&quot;www.it666.com\r\n&quot;</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>

</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><ul><li>带缓冲区写入</li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;bufio&quot;</span>

	<span class="token string">&quot;fmt&quot;</span>

	<span class="token string">&quot;os&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token comment">// 1.打开文件</span>

	fp<span class="token punctuation">,</span> err <span class="token operator">:=</span> os<span class="token punctuation">.</span><span class="token function">OpenFile</span><span class="token punctuation">(</span><span class="token string">&quot;d:/lnj.txt&quot;</span><span class="token punctuation">,</span> os<span class="token punctuation">.</span>O_CREATE<span class="token operator">|</span>os<span class="token punctuation">.</span>O_APPEND<span class="token punctuation">,</span> <span class="token number">0666</span><span class="token punctuation">)</span>

	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>

	<span class="token punctuation">}</span>

	<span class="token comment">// 2.关闭打开的文件</span>

	<span class="token keyword">defer</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

		err <span class="token operator">:=</span> fp<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

		<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>

			fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>

		<span class="token punctuation">}</span>

	<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	<span class="token comment">// 3.创建缓冲区</span>

	w <span class="token operator">:=</span> bufio<span class="token punctuation">.</span><span class="token function">NewWriter</span><span class="token punctuation">(</span>fp<span class="token punctuation">)</span>

	<span class="token comment">// 4.写入数据到缓冲区</span>

	bytes <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">{</span><span class="token char">&#39;l&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;n&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;j&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;\r&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;\n&#39;</span><span class="token punctuation">}</span>

	w<span class="token punctuation">.</span><span class="token function">Write</span><span class="token punctuation">(</span>bytes<span class="token punctuation">)</span>

	w<span class="token punctuation">.</span><span class="token function">WriteString</span><span class="token punctuation">(</span><span class="token string">&quot;www.it666.com\r\n&quot;</span><span class="token punctuation">)</span>

	<span class="token comment">// 5.将缓冲区中的数据刷新到文件</span>

	w<span class="token punctuation">.</span><span class="token function">Flush</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>

</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><ul><li>WriteFile 函数</li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;fmt&quot;</span>

	<span class="token string">&quot;io/ioutil&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token comment">// 1.写入数据到指定文件</span>

	data <span class="token operator">:=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">byte</span><span class="token punctuation">{</span><span class="token char">&#39;l&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;n&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;j&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;\r&#39;</span><span class="token punctuation">,</span> <span class="token char">&#39;\n&#39;</span><span class="token punctuation">}</span>

	err <span class="token operator">:=</span> ioutil<span class="token punctuation">.</span><span class="token function">WriteFile</span><span class="token punctuation">(</span><span class="token string">&quot;d:/abc.txt&quot;</span><span class="token punctuation">,</span> data<span class="token punctuation">,</span> <span class="token number">0666</span><span class="token punctuation">)</span>

	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>

	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;写入成功&quot;</span><span class="token punctuation">)</span>

	<span class="token punctuation">}</span>

<span class="token punctuation">}</span>

</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><h2 id="判断文件是否存在" tabindex="-1">判断文件是否存在 <a class="header-anchor" href="#判断文件是否存在" aria-hidden="true">#</a></h2><ul><li>Stat 函数 <ul><li>func Stat(name string) (fi FileInfo, err error)</li></ul></li><li>返回值: FileInfo</li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">type</span> FileInfo <span class="token keyword">interface</span> <span class="token punctuation">{</span>

	<span class="token function">Name</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">string</span>       <span class="token comment">// 文件的名字（不含扩展名）</span>

	<span class="token function">Size</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">int64</span>        <span class="token comment">// 普通文件返回值表示其大小；其他文件的返回值含义各系统不同</span>

	<span class="token function">Mode</span><span class="token punctuation">(</span><span class="token punctuation">)</span> FileMode     <span class="token comment">// 文件的模式位</span>

	<span class="token function">ModTime</span><span class="token punctuation">(</span><span class="token punctuation">)</span> time<span class="token punctuation">.</span>Time <span class="token comment">// 文件的修改时间</span>

	<span class="token function">IsDir</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token builtin">bool</span>        <span class="token comment">// 等价于Mode().IsDir()</span>

	<span class="token function">Sys</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token keyword">interface</span><span class="token punctuation">{</span><span class="token punctuation">}</span>   <span class="token comment">// 底层数据来源（可以返回nil）</span>

<span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><ul><li>返回值: error <ul><li>返回值 error 等于 nil,代表文件存在</li><li>返回值 error 不等于 nil, 可以进一步通过 IsNotExist 判断, 如果返回 true 代表文件不存在</li><li>返回值 error 如果返回其它错误, 则不确定文件是否存在</li></ul></li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;fmt&quot;</span>

	<span class="token string">&quot;os&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	info<span class="token punctuation">,</span> err <span class="token operator">:=</span> os<span class="token punctuation">.</span><span class="token function">Stat</span><span class="token punctuation">(</span><span class="token string">&quot;d:/lnj.txt&quot;</span><span class="token punctuation">)</span>

	<span class="token keyword">if</span> err <span class="token operator">==</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;文件存在&quot;</span><span class="token punctuation">)</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>info<span class="token punctuation">.</span><span class="token function">Name</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token keyword">if</span> os<span class="token punctuation">.</span><span class="token function">IsNotExist</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token punctuation">{</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;文件不存在&quot;</span><span class="token punctuation">)</span>

	<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;不确定&quot;</span><span class="token punctuation">)</span>

	<span class="token punctuation">}</span>

<span class="token punctuation">}</span>

</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><hr><h2 id="练习" tabindex="-1">练习 <a class="header-anchor" href="#练习" aria-hidden="true">#</a></h2><ul><li>将一个文本文件拷贝到另外一个文件中 <ul><li>尝试用上面学习的其它方法实现下</li></ul></li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div></div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;fmt&quot;</span>

	<span class="token string">&quot;io/ioutil&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token comment">// 1.读取一个文件</span>

	buf<span class="token punctuation">,</span> err <span class="token operator">:=</span> ioutil<span class="token punctuation">.</span><span class="token function">ReadFile</span><span class="token punctuation">(</span><span class="token string">&quot;d:/lnj.txt&quot;</span><span class="token punctuation">)</span>

	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>

		<span class="token keyword">return</span>

	<span class="token punctuation">}</span>

	<span class="token comment">// 2.写入读取的数据到另一个文件</span>

	err <span class="token operator">=</span> ioutil<span class="token punctuation">.</span><span class="token function">WriteFile</span><span class="token punctuation">(</span><span class="token string">&quot;d:/abc.txt&quot;</span><span class="token punctuation">,</span> buf<span class="token punctuation">,</span> <span class="token number">0666</span><span class="token punctuation">)</span>

	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>

		<span class="token keyword">return</span>

	<span class="token punctuation">}</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;拷贝完成&quot;</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>

</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><ul><li>将一个图片/视频文件拷贝到另一个文件</li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;bufio&quot;</span>

	<span class="token string">&quot;fmt&quot;</span>

	<span class="token string">&quot;io&quot;</span>

	<span class="token string">&quot;os&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token comment">// 1.定义拷贝文件的路径</span>

	scrPath <span class="token operator">:=</span> <span class="token string">&quot;D:/a.png&quot;</span>

	destPath <span class="token operator">:=</span> <span class="token string">&quot;E:/b.png&quot;</span>

	<span class="token comment">// 2.打开被拷贝文件</span>

	fr<span class="token punctuation">,</span> err <span class="token operator">:=</span> os<span class="token punctuation">.</span><span class="token function">Open</span><span class="token punctuation">(</span>scrPath<span class="token punctuation">)</span>

	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>

		<span class="token keyword">return</span>

	<span class="token punctuation">}</span>

	<span class="token comment">// 3.关闭打开文件</span>

	<span class="token keyword">defer</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

		err <span class="token operator">:=</span> fr<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

		<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>

			fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>

		<span class="token punctuation">}</span>

	<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	<span class="token comment">// 4.创建读取缓冲区</span>

	r <span class="token operator">:=</span> bufio<span class="token punctuation">.</span><span class="token function">NewReader</span><span class="token punctuation">(</span>fr<span class="token punctuation">)</span>

	<span class="token comment">// 1.创建写入文件</span>

	fw<span class="token punctuation">,</span> err <span class="token operator">:=</span> os<span class="token punctuation">.</span><span class="token function">Create</span><span class="token punctuation">(</span>destPath<span class="token punctuation">)</span>

	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>

		<span class="token keyword">return</span>

	<span class="token punctuation">}</span>

	<span class="token comment">// 2.关闭打开文件</span>

	<span class="token keyword">defer</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

		err <span class="token operator">:=</span> fw<span class="token punctuation">.</span><span class="token function">Close</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

		<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>

			fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>

		<span class="token punctuation">}</span>

	<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	<span class="token comment">// 3.创建写入缓冲区</span>

	w <span class="token operator">:=</span> bufio<span class="token punctuation">.</span><span class="token function">NewWriter</span><span class="token punctuation">(</span>fw<span class="token punctuation">)</span>

	<span class="token comment">// 4.利用系统 copy 函数完成拷贝</span>

	count<span class="token punctuation">,</span> err <span class="token operator">:=</span> io<span class="token punctuation">.</span><span class="token function">Copy</span><span class="token punctuation">(</span>w<span class="token punctuation">,</span> r<span class="token punctuation">)</span>

	<span class="token keyword">if</span> err <span class="token operator">!=</span> <span class="token boolean">nil</span> <span class="token punctuation">{</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>

		<span class="token keyword">return</span>

	<span class="token punctuation">}</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>count<span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;拷贝完成&quot;</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>

</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><ul><li>自己查文档实现遍历文件夹 <ul><li>例如: 给一个文件夹路径, 获取该文件夹下所有文件, 并将所有文件路径保存到切片中</li></ul></li></ul><h2 id="并发编程基本概念" tabindex="-1">并发编程基本概念 <a class="header-anchor" href="#并发编程基本概念" aria-hidden="true">#</a></h2><ul><li>学习并发编程之前我们需要脑补几个基础知识和思考一个问题 <ul><li>什么是串行?</li><li>什么是并行?</li><li>什么是并发?</li><li>什么是程序?</li><li>什么是进程?</li><li>什么是线程?</li><li>什么是协程?</li></ul></li></ul><hr><h2 id="什么是串行" tabindex="-1">什么是串行? <a class="header-anchor" href="#什么是串行" aria-hidden="true">#</a></h2><ul><li>串行就是按顺序执行, 就好比银行只有 1 个窗口, 有 3 个人要办事, 那么必须排队, 只有前面的人办完走人, 才能轮到你</li><li>在计算机中, <em><strong>同一时刻, 只能有一条指令, 在一个 CPU 上执行, 后面的指令必须等到前面指令执行完才能执行</strong></em>, 就是串行 +</li></ul><h2 id="什么是并行" tabindex="-1">什么是并行? <a class="header-anchor" href="#什么是并行" aria-hidden="true">#</a></h2><ul><li>并行就是同时执行, 就好比银行有 3 个窗口, 有 3 个人要办事, 只需要到空窗口即可立即办事.</li><li>在计算机中, <em><strong>同一时刻, 有多条指令, 在多个 CPU 上执行</strong></em>, 就是并行</li><li>从以上分析不难看出, 并行的速度优于串行 +</li></ul><h2 id="什么是并发" tabindex="-1">什么是并发? <a class="header-anchor" href="#什么是并发" aria-hidden="true">#</a></h2><ul><li>并发是伪并行, 就好比银行只有 1 个窗口, 有 3 个人要办事, 那么没轮到后面的人时, 后面的人可以用拖鞋先排队, 去吃个早餐,买个东西啥的, 感觉差不多要到自己时再回来办事</li><li>在计算机中, **<em>同一时刻, 只能有一条指令, 在一个 CPU 上执行, 但是 CPU 会快速的在多条指令之间轮询执行</em>**就是并发</li><li>并行和并发的区别就好比古代的三妻四妾(名正言顺, 光明正大)和现代三妻四妾(抽空幽会, 小三小四)</li><li>总结: <ul><li>多线程程序在单核上运行, 就是并发</li><li>多线程程序在多核上运行,就是并行</li></ul></li></ul><hr><h2 id="什么是程序" tabindex="-1">什么是程序? <a class="header-anchor" href="#什么是程序" aria-hidden="true">#</a></h2><ul><li><code>程序</code>是指将<code>编译型语言</code>编写好的代码通过编译工具编译之后<code>存储在硬盘</code>上的一个<code>二进制文件</code>, 会占用磁盘空间, 但不会占用系统资源 <ul><li>例如我们通过 C++编写了一个聊天程序, 然后通过 C++编译器将编写好的代码编译成一个二进制的文件, 那么这个二进制的文件就是一个程序</li></ul></li></ul><h2 id="什么是进程" tabindex="-1">什么是进程? <a class="header-anchor" href="#什么是进程" aria-hidden="true">#</a></h2><ul><li><code>进程</code>是指<code>程序</code>在操作系统中的一次执行过程, 是系统进行资源分配和调度的基本单位</li><li>例如: <ul><li>启动记事本这个程序, 在系统中就会创建一个记事本进程</li><li>再次启动记事本这个程序, 又会在系统中创建一个记事本进程</li></ul></li><li>程序和进程的关系就好比剧本和演出的关系 <ul><li>剧本对应程序, 演出对应进程. 同一个剧本可以在多个舞台同时演出互不影响, 同一个程序可以在系统中开启多个进程互不影响</li></ul></li><li>所以程序和进程的关系是 1:N, 所以多个进程的空间是独立的</li></ul><h2 id="什么是线程" tabindex="-1">什么是线程? <a class="header-anchor" href="#什么是线程" aria-hidden="true">#</a></h2><ul><li>线程是指进程中的一个执行实例, 是程序执行的最小单元, 它是比进程更小的能独立运行的基本单位</li><li>一个进程中至少有一个线程, 这个线程我们称之为<code>主线程</code></li><li>一个进程中除了<code>主线程</code>以外, 我们还可以创建和销毁多个线程</li><li>例如: <ul><li>启动迅雷这个程序, 系统会创建一个<code>迅雷进程</code>, 并且默认会有一个<code>主线程</code>, 用于执行迅雷默认的业务逻辑</li><li>当我们利用迅雷下载<code>多个任务</code>的时候, 会发现多个任务都在<code>同时下载</code>, 此时为了能够<code>同时执行</code>下载操作, 迅雷就会创建多个线程, 将不同的下载任务放到不同的线程中执行</li></ul></li></ul><h2 id="什么是协程" tabindex="-1">什么是协程? <a class="header-anchor" href="#什么是协程" aria-hidden="true">#</a></h2><ul><li>协程是一种用户态的轻量级线程，又称微线程，英文名 Coroutine</li><li>与传统的系统级别进程和线程相比, 协程最大的优势在于&quot;轻量级&quot;. 可以轻松创建上万个不会导致系统资源衰竭. 而线程和进程通常很难超过 1 万个.这也是协程称之为&quot;轻量级线程&quot;的原因</li><li>一个线程中可以有任意多个协程, 但<code>某一时刻只能有一个协程在运行</code>, 多个协程分享所在线程分配到的计算机资源</li><li>在协程中, 调用一个任务就像调用一个函数一样, 消耗系统资源极少, 但能达到进程、线程相同的并发效果</li></ul><hr><h2 id="go-并发" tabindex="-1">Go 并发 <a class="header-anchor" href="#go-并发" aria-hidden="true">#</a></h2><ul><li><p>Go 在语言级别支持<code>协程</code>(多数语言在语法层面并不直接支持协程), 叫做 goroutine.</p></li><li><p>人们把 Go 语言称之为 21 世纪的 C 语言. 第一是因为 Go 语言设计简单, 第二是因为 21 世纪最重要的就是并行程序设计.而 Go 从语言层面就支持并发和并行</p></li><li><p>Go 并发小案例</p></li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;fmt&quot;</span>

	<span class="token string">&quot;time&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">sing</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;我在唱歌&quot;</span><span class="token punctuation">)</span>

		time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>Millisecond<span class="token punctuation">)</span>

	<span class="token punctuation">}</span>

<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">dance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;我在跳舞---&quot;</span><span class="token punctuation">)</span>

		time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>Millisecond<span class="token punctuation">)</span>

	<span class="token punctuation">}</span>

<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token comment">// 串行: 必须先唱完歌才能跳舞</span>

	<span class="token comment">//sing()</span>

	<span class="token comment">//dance()</span>

	<span class="token comment">// 并行: 可以边唱歌, 边跳舞</span>

	<span class="token comment">// 注意点: 主线程不能死, 否则程序就退出了</span>

	<span class="token keyword">go</span> <span class="token function">sing</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 开启一个协程</span>

	<span class="token keyword">go</span> <span class="token function">dance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 开启一个协程</span>

	<span class="token keyword">for</span> <span class="token punctuation">{</span>

	<span class="token punctuation">}</span>

<span class="token punctuation">}</span>

</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><ul><li>runtime 包中常用的函数</li></ul><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;fmt&quot;</span>

	<span class="token string">&quot;runtime&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">sing</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;我在唱歌&quot;</span><span class="token punctuation">)</span>

		<span class="token comment">// Gosched 使当前 go 程放弃处理器，以让其它 go 程运行。</span>

		<span class="token comment">// 它不会挂起当前 go 程，因此当前 go 程未来会恢复执行</span>

		runtime<span class="token punctuation">.</span><span class="token function">Gosched</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	<span class="token punctuation">}</span>

<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">dance</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;我在跳舞---&quot;</span><span class="token punctuation">)</span>

		runtime<span class="token punctuation">.</span><span class="token function">Gosched</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	<span class="token punctuation">}</span>

<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token keyword">go</span> <span class="token function">sing</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	<span class="token keyword">go</span> <span class="token function">dance</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	<span class="token keyword">for</span> <span class="token punctuation">{</span>

	<span class="token punctuation">}</span>

<span class="token punctuation">}</span>

</code></pre></div><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;fmt&quot;</span>

	<span class="token string">&quot;runtime&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;123&quot;</span><span class="token punctuation">)</span>

		<span class="token comment">// 退出当前协程</span>

		<span class="token comment">//runtime.Goexit()</span>

		<span class="token comment">// 退出当前函数</span>

		<span class="token comment">//return</span>

		<span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;456&quot;</span><span class="token punctuation">)</span>

	<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	<span class="token keyword">for</span> <span class="token punctuation">{</span>

	<span class="token punctuation">}</span>

<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;abc&quot;</span><span class="token punctuation">)</span>

	<span class="token comment">// 只会结束当前函数, 协程中的其它代码会继续执行</span>

	<span class="token comment">//return</span>

	<span class="token comment">// 会结束整个协程, Goexit 之后整个协程中的其它代码不会执行</span>

	runtime<span class="token punctuation">.</span><span class="token function">Goexit</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;def&quot;</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>

</code></pre></div><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;fmt&quot;</span>

	<span class="token string">&quot;runtime&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	num <span class="token operator">:=</span> runtime<span class="token punctuation">.</span><span class="token function">NumCPU</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span>

<span class="token punctuation">}</span>
</code></pre></div><div class="language-go"><pre><code><span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token comment">// 获取带来了 CPU 个数</span>

	num <span class="token operator">:=</span> runtime<span class="token punctuation">.</span><span class="token function">NumCPU</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	<span class="token comment">// 设置同时使用 CPU 个数</span>

	runtime<span class="token punctuation">.</span><span class="token function">GOMAXPROCS</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span>

<span class="token punctuation">}</span>
</code></pre></div><div class="warning custom-block"><p class="custom-block-title">注意</p><ul><li>Go 语言 1.8 之前, 需要我们手动设置</li><li>Go 语言 1.8 之后, 不需要我们手动设置</li><li>GOMAXPROCS: 设置可同时执行的最大 CPU 数，并返回先前的设置</li><li>NumCPU: 返回本地机器的逻辑 CPU 个数</li><li>Goexit: 终止调用它的 go 程, 其它 go 程不会受影响</li><li>Gosched:使当前 go 程放弃处理器，以让其它 go 程运行</li></ul></div><h2 id="多线程同步问题" tabindex="-1">多线程同步问题 <a class="header-anchor" href="#多线程同步问题" aria-hidden="true">#</a></h2><ul><li>互斥锁 <ul><li>互斥锁的本质是当一个 goroutine 访问的时候, 其它 goroutine 都不能访问</li><li>这样就能实现资源同步, 但是在避免资源竞争的同时也降低了程序的并发性能. 程序由原来的并发执行变成了串行</li></ul></li><li>案例: <ul><li>有一个打印函数, 用于逐个打印字符串中的字符, 有两个人都开启了 goroutine 去打印</li><li>如果没有添加互斥锁, 那么两个人都有机会输出自己的内容</li><li>如果添加了互斥锁, 那么会先输出某一个的, 输出完毕之后再输出另外一个人的</li></ul></li></ul><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;fmt&quot;</span>
	<span class="token string">&quot;sync&quot;</span>
	<span class="token string">&quot;time&quot;</span>
<span class="token punctuation">)</span>

<span class="token comment">// 创建一把互斥锁</span>
<span class="token keyword">var</span> lock sync<span class="token punctuation">.</span>Mutex

<span class="token keyword">func</span> <span class="token function">printer</span><span class="token punctuation">(</span>str <span class="token builtin">string</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token comment">// 让先来的人拿到锁, 把当前函数锁住, 其它人都无法执行</span>
	<span class="token comment">// 上厕所关门</span>
	lock<span class="token punctuation">.</span><span class="token function">Lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">for</span> <span class="token boolean">_</span><span class="token punctuation">,</span> v <span class="token operator">:=</span> <span class="token keyword">range</span> str <span class="token punctuation">{</span>
		fmt<span class="token punctuation">.</span><span class="token function">Printf</span><span class="token punctuation">(</span><span class="token string">&quot;%c&quot;</span><span class="token punctuation">,</span> v<span class="token punctuation">)</span>
		time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>Millisecond <span class="token operator">*</span> <span class="token number">500</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
	<span class="token comment">// 先来的人执行完毕之后, 把锁释放掉, 让其它人可以继续使用当前函数</span>
	<span class="token comment">// 上厕所开门</span>
	lock<span class="token punctuation">.</span><span class="token function">Unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
<span class="token keyword">func</span> <span class="token function">person1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token function">printer</span><span class="token punctuation">(</span><span class="token string">&quot;hello&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">person2</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token function">printer</span><span class="token punctuation">(</span><span class="token string">&quot;world&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">go</span> <span class="token function">person1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">go</span> <span class="token function">person2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	<span class="token keyword">for</span> <span class="token punctuation">{</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span>


</code></pre></div><hr><h2 id="生产者消费者问题" tabindex="-1">生产者消费者问题 <a class="header-anchor" href="#生产者消费者问题" aria-hidden="true">#</a></h2><ul><li><p>所谓的生产者消费者模型就是</p><ul><li><p>某个模块(函数)负责生产数据, 这些数据由另一个模块来负责处理</p></li><li><p>一般生产者消费者模型包含三个部分&quot;生产者&quot;、&quot;缓冲区&quot;、&quot;消费者&quot;</p></li></ul><p><img src="https://img-blog.csdnimg.cn/img_convert/c6b9dc46029e893cc11f3a85b7f223f0.png" alt=""></p><ul><li><p>为什么生产者消费者模型要含三个部分? 直接生产和消费不行么?</p></li><li><p>一个案例说明一切</p><ul><li><p>生产者好比现实生活中的某个人</p></li><li><p>缓冲区好比现实生活中的邮箱</p></li><li><p>消费者好比现实生活中的邮递员</p></li><li><p>如果只有生产者和消费者, 那么相当于只有写信的人和邮递员, 那么如果将来过去的邮递员离职了, 你想邮寄信件必须想办法结识新的邮递员(消费者发生变化, 会直接影响生产者, 耦合性太强)</p></li><li><p>如果在生产者和消费者之间添加一个缓冲区, 那么就好比有了邮箱, 以后邮寄信件不是找邮递员, 只需把信件投递到邮箱中即可, 写信的人不需要关心邮递员是谁(解耦)</p></li><li><p>如果只有生产者和消费者, 那么每个人邮寄信件都需要直接找邮递员(1 对 1 关系), 如果有 10 个人要邮寄信件, 那么邮递员只能依次找到每个人, 然后才能取件(效率低下)</p></li><li><p>如果在生产者和消费者之间添加一个缓冲区, 那么所有的人只需要将信件投递到邮箱即可, 邮递员不用关心有多少人要邮寄信件, 也不用依次取件, 只需要找到邮箱从邮箱中统一取件即可(效率提高)</p></li><li><p>如果只有生产者和消费者, 那么如果邮寄信件太多邮递员无法一次拿走, 这个时候非常难办</p></li><li><p>如果在生产者和消费者之间添加一个缓冲区, 那么如果信件太多可以先拿走一部分, 剩下的继续放到邮箱中下次再拿</p></li><li><p><code>... ...</code></p></li></ul><hr></li></ul></li></ul><h2 id="生产者和消费者资源竞争问题" tabindex="-1">生产者和消费者资源竞争问题 <a class="header-anchor" href="#生产者和消费者资源竞争问题" aria-hidden="true">#</a></h2><ul><li>例如生产比较慢, 而消费比较快, 就会导致消费者消费到错误数据</li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;fmt&quot;</span>

	<span class="token string">&quot;math/rand&quot;</span>

	<span class="token string">&quot;sync&quot;</span>

	<span class="token string">&quot;time&quot;</span>
<span class="token punctuation">)</span>

<span class="token comment">// 创建一把互斥锁</span>

<span class="token keyword">var</span> lock <span class="token operator">=</span> sync<span class="token punctuation">.</span>Mutex<span class="token punctuation">{</span><span class="token punctuation">}</span>

<span class="token comment">// 定义缓冲区</span>

<span class="token keyword">var</span> sce <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span> <span class="token operator">=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">10</span><span class="token punctuation">)</span>

<span class="token comment">// 定义生产者</span>

<span class="token keyword">func</span> <span class="token function">producer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token comment">// 加锁, 注意是lock就是我们的锁, 全局公用一把锁</span>

	lock<span class="token punctuation">.</span><span class="token function">Lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	rand<span class="token punctuation">.</span><span class="token function">Seed</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span><span class="token function">Now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">UnixNano</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>

		num <span class="token operator">:=</span> rand<span class="token punctuation">.</span><span class="token function">Intn</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span>

		sce<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">=</span> num

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;生产者生产了: &quot;</span><span class="token punctuation">,</span> num<span class="token punctuation">)</span>

		time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>Millisecond <span class="token operator">*</span> <span class="token number">500</span><span class="token punctuation">)</span>

	<span class="token punctuation">}</span>

	<span class="token comment">// 解锁</span>

	lock<span class="token punctuation">.</span><span class="token function">Unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>

<span class="token comment">// 定义消费者</span>

<span class="token keyword">func</span> <span class="token function">consumer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token comment">// 加锁, 注意和生产者中用的是同一把锁</span>

	<span class="token comment">// 如果生产者中已加过了, 则阻塞直到解锁后再重新加锁</span>

	lock<span class="token punctuation">.</span><span class="token function">Lock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>

		num <span class="token operator">:=</span> sce<span class="token punctuation">[</span>i<span class="token punctuation">]</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;---消费者消费了&quot;</span><span class="token punctuation">,</span> num<span class="token punctuation">)</span>

	<span class="token punctuation">}</span>

	lock<span class="token punctuation">.</span><span class="token function">Unlock</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token keyword">go</span> <span class="token function">producer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	<span class="token keyword">go</span> <span class="token function">consumer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	<span class="token keyword">for</span> <span class="token punctuation">{</span>

	<span class="token punctuation">}</span>

<span class="token punctuation">}</span>

</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><blockquote><ul><li>思考: 那如果是一对多, 或者多对多的关系, 上述代码有问题么?</li></ul></blockquote><hr><h2 id="管道-channel" tabindex="-1">管道(Channel) <a class="header-anchor" href="#管道-channel" aria-hidden="true">#</a></h2><ul><li>上述实现并发的代码中为了保持主线程不挂掉, 我们都会在最后写上一个死循环或者写上一个定时器来实现等待 goroutine 执行完毕</li><li>上述实现并发的代码中为了解决生产者消费者资源同步问题, 我们利用加锁来解决, 但是这仅仅是一对一的情况, 如果是一对多或者多对多, 上述代码还是会出现问题</li><li>综上所述, 企业开发中需要一种更牛 X 的技术来解决上述问题, 那就是<code>管道(Channel)</code></li></ul><hr><ul><li>Channel 的本质是一个队列</li><li>Channel 是线程安全的, 也就是自带锁定功能</li><li>Channel 声明和初始化 <ul><li>声明: <code>var 变量名chan 数据类型</code></li><li>初始化: <code>mych := make(chan 数据类型, 容量)</code></li><li>Channel 和切片还有字典一样, 必须 make 之后才能使用</li><li>Channel 和切片还有字典一样, 是引用类型</li></ul></li></ul><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token comment">// 1.声明一个管道</span>

	<span class="token keyword">var</span> mych <span class="token keyword">chan</span> <span class="token builtin">int</span>

	<span class="token comment">// 2.初始化一个管道</span>

	mych <span class="token operator">=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>

	<span class="token comment">// 3.查看管道的长度和容量</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;长度是&quot;</span><span class="token punctuation">,</span> <span class="token function">len</span><span class="token punctuation">(</span>mych<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;容量是&quot;</span><span class="token punctuation">,</span> <span class="token function">cap</span><span class="token punctuation">(</span>mych<span class="token punctuation">)</span><span class="token punctuation">)</span>

	<span class="token comment">// 4.像管道中写入数据</span>

	mych <span class="token operator">&lt;-</span> <span class="token number">666</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;长度是&quot;</span><span class="token punctuation">,</span> <span class="token function">len</span><span class="token punctuation">(</span>mych<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;容量是&quot;</span><span class="token punctuation">,</span> <span class="token function">cap</span><span class="token punctuation">(</span>mych<span class="token punctuation">)</span><span class="token punctuation">)</span>

	<span class="token comment">// 5.取出管道中写入的数据</span>

	num <span class="token operator">:=</span> <span class="token operator">&lt;-</span>mych

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;num = &quot;</span><span class="token punctuation">,</span> num<span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;长度是&quot;</span><span class="token punctuation">,</span> <span class="token function">len</span><span class="token punctuation">(</span>mych<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;容量是&quot;</span><span class="token punctuation">,</span> <span class="token function">cap</span><span class="token punctuation">(</span>mych<span class="token punctuation">)</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>

</code></pre></div><hr><div class="warning custom-block"><p class="custom-block-title">注意</p><ul><li>管道中只能存放声明的数据类型, 不能存放其它数据类型</li><li>管道中如果已经没有数据, 再取就会报错</li><li>如果管道中数据已满, 再写入就会报错</li></ul></div><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token comment">// 1.声明一个管道</span>

	<span class="token keyword">var</span> mych <span class="token keyword">chan</span> <span class="token builtin">int</span>

	<span class="token comment">// 2.初始化一个管道</span>

	mych <span class="token operator">=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>

	<span class="token comment">// 注意点: 管道中只能存放声明的数据类型, 不能存放其它数据类型</span>

	<span class="token comment">//mych&lt;-3.14</span>

	<span class="token comment">// 注意点: 管道中如果已经没有数据,</span>

	<span class="token comment">// 并且检测不到有其它协程再往管道中写入数据, 那么再取就会报错</span>

	<span class="token comment">//num = &lt;-mych</span>

	<span class="token comment">//fmt.Println(&quot;num = &quot;, num)</span>

	<span class="token comment">// 注意点: 如果管道中数据已满, 再写入就会报错</span>

	mych <span class="token operator">&lt;-</span> <span class="token number">666</span>

	mych <span class="token operator">&lt;-</span> <span class="token number">777</span>

	mych <span class="token operator">&lt;-</span> <span class="token number">888</span>

	mych <span class="token operator">&lt;-</span> <span class="token number">999</span>

<span class="token punctuation">}</span>

</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><hr><ul><li>管道的关闭和遍历</li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token comment">// 1.创建一个管道</span>

	mych <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">3</span><span class="token punctuation">)</span>

	<span class="token comment">// 2.往管道中存入数据</span>

	mych <span class="token operator">&lt;-</span> <span class="token number">666</span>

	mych <span class="token operator">&lt;-</span> <span class="token number">777</span>

	mych <span class="token operator">&lt;-</span> <span class="token number">888</span>

	<span class="token comment">// 3.遍历管道</span>

	<span class="token comment">// 第一次遍历 i 等于 0, len = 3,</span>

	<span class="token comment">// 第二次遍历 i 等于 1, len = 2</span>

	<span class="token comment">// 第三次遍历 i 等于 2, len = 1</span>

	<span class="token comment">//for i:=0; i&lt;len(mych); i++{</span>

	<span class="token comment">// fmt.Println(&lt;-mych) // 输出结果不正确</span>

	<span class="token comment">//}</span>

	<span class="token comment">// 3.写入完数据之后先关闭管道</span>

	<span class="token comment">// 注意点: 管道关闭之后只能读不能写</span>

	<span class="token function">close</span><span class="token punctuation">(</span>mych<span class="token punctuation">)</span>

	<span class="token comment">//mych&lt;- 999 // 报错</span>

	<span class="token comment">// 4.遍历管道</span>

	<span class="token comment">// 利用 for range 遍历, 必须先关闭管道, 否则会报错</span>

	<span class="token comment">//for value := range mych{</span>

	<span class="token comment">// fmt.Println(value)</span>

	<span class="token comment">//}</span>

	<span class="token comment">// close 主要用途:</span>

	<span class="token comment">// 在企业开发中我们可能不确定管道有还没有有数据, 所以我们可能一直获取</span>

	<span class="token comment">// 但是我们可以通过 ok-idiom 模式判断管道是否关闭, 如果关闭会返回 false 给 ok</span>

	<span class="token keyword">for</span> <span class="token punctuation">{</span>

		<span class="token keyword">if</span> num<span class="token punctuation">,</span> ok <span class="token operator">:=</span> <span class="token operator">&lt;-</span>mych<span class="token punctuation">;</span> ok <span class="token punctuation">{</span>

			fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span>

		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>

			<span class="token keyword">break</span>

		<span class="token punctuation">}</span>

	<span class="token punctuation">}</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;数据读取完毕&quot;</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>

</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><hr><ul><li>Channel 阻塞现象 <ul><li>单独在主线程中操作管道, 写满了会报错, 没有数据去获取也会报错</li><li>只要在协程中操作管道过, 写满了就会阻塞, 没有就数据去获取也会阻塞</li></ul></li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>

	<span class="token string">&quot;fmt&quot;</span>

	<span class="token string">&quot;time&quot;</span>

<span class="token punctuation">)</span>

<span class="token comment">// 创建一个管道</span>

<span class="token keyword">var</span> myCh <span class="token operator">=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">demo</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token keyword">var</span> myCh <span class="token operator">=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span>

	<span class="token comment">//myCh&lt;-111</span>

	<span class="token comment">//myCh&lt;-222</span>

	<span class="token comment">//myCh&lt;-333</span>

	<span class="token comment">//myCh&lt;-444</span>

	<span class="token comment">//myCh&lt;-555</span>

	<span class="token comment">//fmt.Println(&quot;我是第六次添加之前代码&quot;)</span>

	<span class="token comment">//myCh&lt;-666</span>

	<span class="token comment">//fmt.Println(&quot;我是第六次添加之后代码&quot;)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;我是第六次直接获取之前代码&quot;</span><span class="token punctuation">)</span>

	<span class="token operator">&lt;-</span>myCh

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;我是第六次直接获取之后代码&quot;</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">test</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token comment">//myCh&lt;-111</span>

	<span class="token comment">//myCh&lt;-222</span>

	<span class="token comment">//myCh&lt;-333</span>

	<span class="token comment">//myCh&lt;-444</span>

	<span class="token comment">//myCh&lt;-555</span>

	<span class="token comment">//fmt.Println(&quot;我是第六次添加之前代码&quot;)</span>

	<span class="token comment">//myCh&lt;-666</span>

	<span class="token comment">//fmt.Println(&quot;我是第六次添加之后代码&quot;)</span>

	<span class="token comment">//fmt.Println(&quot;我是第六次直接获取之前代码&quot;)</span>

	<span class="token comment">//&lt;-myCh</span>

	<span class="token comment">//fmt.Println(&quot;我是第六次直接获取之后代码&quot;)</span>

<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">example</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>Second \<span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span>

	myCh<span class="token operator">&lt;-</span><span class="token number">666</span>

<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token comment">// 1.同一个 go 程中操作管道</span>

	<span class="token comment">// 写满了会报错</span>

	<span class="token comment">//myCh&lt;-111</span>

	<span class="token comment">//myCh&lt;-222</span>

	<span class="token comment">//myCh&lt;-333</span>

	<span class="token comment">//myCh&lt;-444</span>

	<span class="token comment">//myCh&lt;-555</span>

	<span class="token comment">//myCh&lt;-666</span>

	<span class="token comment">// 没有了去取也会报错</span>

	<span class="token comment">//&lt;-myCh</span>

	<span class="token comment">// 2.在协程中操作管道</span>

	<span class="token comment">// 写满了不会报错, 但是会阻塞</span>

	<span class="token comment">//go test()</span>

	<span class="token comment">// 没有了去取也不会报错, 也会阻塞</span>

	<span class="token comment">//go test()</span>

	<span class="token comment">//go demo()</span>

	<span class="token comment">//go demo()</span>

	<span class="token comment">// 3.只要在协程中操作了管道, 就会发生阻塞现象</span>

	<span class="token keyword">go</span> <span class="token function">example</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;myCh 之前代码&quot;</span><span class="token punctuation">)</span>

	<span class="token operator">&lt;-</span>myCh

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;myCh 之后代码&quot;</span><span class="token punctuation">)</span>

	<span class="token comment">//for{</span>

	<span class="token comment">// ;</span>

	<span class="token comment">//}</span>

<span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><hr><ul><li>利用 Channel 实现生产者消费者</li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;fmt&quot;</span>

	<span class="token string">&quot;math/rand&quot;</span>

	<span class="token string">&quot;time&quot;</span>
<span class="token punctuation">)</span>

<span class="token comment">// 定义缓冲区</span>

<span class="token keyword">var</span> myCh <span class="token operator">=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span>

<span class="token keyword">var</span> exitCh <span class="token operator">=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">bool</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>

<span class="token comment">// 定义生产者</span>

<span class="token keyword">func</span> <span class="token function">producer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	rand<span class="token punctuation">.</span><span class="token function">Seed</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span><span class="token function">Now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">UnixNano</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>

		num <span class="token operator">:=</span> rand<span class="token punctuation">.</span><span class="token function">Intn</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;生产者生产了: &quot;</span><span class="token punctuation">,</span> num<span class="token punctuation">)</span>

		<span class="token comment">// 往管道中写入数据</span>

		myCh <span class="token operator">&lt;-</span> num

		<span class="token comment">//time.Sleep(time.Millisecond * 500)</span>

	<span class="token punctuation">}</span>

	<span class="token comment">// 生产完毕之后关闭管道</span>

	<span class="token function">close</span><span class="token punctuation">(</span>myCh<span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;生产者停止生产&quot;</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>

<span class="token comment">// 定义消费者</span>

<span class="token keyword">func</span> <span class="token function">consumer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token comment">// 不断从管道中获取数据, 直到管道关闭位置</span>

	<span class="token keyword">for</span> <span class="token punctuation">{</span>

		<span class="token keyword">if</span> num<span class="token punctuation">,</span> ok <span class="token operator">:=</span> <span class="token operator">&lt;-</span>myCh<span class="token punctuation">;</span> <span class="token operator">!</span>ok <span class="token punctuation">{</span>

			<span class="token keyword">break</span>

		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>

			fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;---消费者消费了&quot;</span><span class="token punctuation">,</span> num<span class="token punctuation">)</span>

		<span class="token punctuation">}</span>

	<span class="token punctuation">}</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;消费者停止消费&quot;</span><span class="token punctuation">)</span>

	exitCh <span class="token operator">&lt;-</span> <span class="token boolean">true</span>

<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token keyword">go</span> <span class="token function">producer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	<span class="token keyword">go</span> <span class="token function">consumer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;exitCh之前代码&quot;</span><span class="token punctuation">)</span>

	<span class="token operator">&lt;-</span>exitCh

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;exitCh之后代码&quot;</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>

</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><hr><ul><li>无缓冲 Channel</li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">var</span> myCh1 <span class="token operator">=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span>

<span class="token keyword">var</span> myCh2 <span class="token operator">=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token comment">// 有缓冲管道</span>

	<span class="token comment">// 只写入, 不读取不会报错</span>

	<span class="token comment">//myCh1&lt;-1</span>

	<span class="token comment">//myCh1&lt;-2</span>

	<span class="token comment">//myCh1&lt;-3</span>

	<span class="token comment">//myCh1&lt;-4</span>

	<span class="token comment">//myCh1&lt;-5</span>

	<span class="token comment">//fmt.Println(&quot;len =&quot;,len(myCh1), &quot;cap =&quot;, cap(myCh1))</span>

	<span class="token comment">// 无缓冲管道</span>

	<span class="token comment">// 只有两端同时准备好才不会报错</span>

	<span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token operator">&lt;-</span>myCh2<span class="token punctuation">)</span>

	<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	<span class="token comment">// 只写入, 不读取会报错</span>

	myCh2 <span class="token operator">&lt;-</span> <span class="token number">1</span>

	<span class="token comment">//fmt.Println(&quot;len =&quot;,len(myCh2), &quot;cap =&quot;, cap(myCh2))</span>

	<span class="token comment">// 写入之后在同一个线程读取也会报错</span>

	<span class="token comment">//fmt.Println(&lt;-myCh2)</span>

	<span class="token comment">// 在主程中先写入, 在子程中后读取也会报错</span>

	<span class="token comment">//go func() {</span>

	<span class="token comment">// fmt.Println(&lt;-myCh2)</span>

	<span class="token comment">//}()</span>

<span class="token punctuation">}</span>

</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><hr><ul><li>无缓冲 Channel 和有缓冲 Channel <ul><li>有缓冲管道具备异步的能力(写几个读一个或读几个)</li><li>无缓冲管道具备同步的能力(写一个读一个)</li></ul></li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;fmt&quot;</span>

	<span class="token string">&quot;math/rand&quot;</span>

	<span class="token string">&quot;time&quot;</span>
<span class="token punctuation">)</span>

<span class="token comment">// 定义缓冲区</span>

<span class="token comment">//var myCh = make(chan int, 0)</span>

<span class="token keyword">var</span> myCh <span class="token operator">=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">)</span>

<span class="token keyword">var</span> exitCh <span class="token operator">=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">bool</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span>

<span class="token comment">// 定义生产者</span>

<span class="token keyword">func</span> <span class="token function">producer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	rand<span class="token punctuation">.</span><span class="token function">Seed</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span><span class="token function">Now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">UnixNano</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>

		num <span class="token operator">:=</span> rand<span class="token punctuation">.</span><span class="token function">Intn</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;生产者生产了: &quot;</span><span class="token punctuation">,</span> num<span class="token punctuation">)</span>

		<span class="token comment">// 往管道中写入数据</span>

		myCh <span class="token operator">&lt;-</span> num

		<span class="token comment">//time.Sleep(time.Millisecond * 500)</span>

	<span class="token punctuation">}</span>

	<span class="token comment">// 生产完毕之后关闭管道</span>

	<span class="token function">close</span><span class="token punctuation">(</span>myCh<span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;生产者停止生产&quot;</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>

<span class="token comment">// 定义消费者</span>

<span class="token keyword">func</span> <span class="token function">consumer</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token comment">// 不断从管道中获取数据, 直到管道关闭位置</span>

	<span class="token keyword">for</span> <span class="token punctuation">{</span>

		<span class="token keyword">if</span> num<span class="token punctuation">,</span> ok <span class="token operator">:=</span> <span class="token operator">&lt;-</span>myCh<span class="token punctuation">;</span> <span class="token operator">!</span>ok <span class="token punctuation">{</span>

			<span class="token keyword">break</span>

		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>

			fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;---消费者消费了&quot;</span><span class="token punctuation">,</span> num<span class="token punctuation">)</span>

		<span class="token punctuation">}</span>

	<span class="token punctuation">}</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;消费者停止消费&quot;</span><span class="token punctuation">)</span>

	exitCh <span class="token operator">&lt;-</span> <span class="token boolean">true</span>

<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token keyword">go</span> <span class="token function">producer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	<span class="token keyword">go</span> <span class="token function">consumer</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;exitCh之前代码&quot;</span><span class="token punctuation">)</span>

	<span class="token operator">&lt;-</span>exitCh

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;exitCh之后代码&quot;</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><blockquote><p>IO 的延迟说明: 看到的输出结果和我们想象的不太一样, 是因为 IO 输出非常消耗性能, 输出之后还没来得及赋值可能就跑去执行别的协程了</p></blockquote><hr><ul><li>单向管道和双向管道 <ul><li>默认情况下所有管道都是双向了(可读可写)</li><li>但是在企业开发中, 我们经常需要用到将一个管道作为参数传递</li><li>在传递的过程中希望对方只能单向使用, 要么只能写,要么只能读</li></ul></li><li>双向管道 <ul><li>var myCh chan int = make(chan int, 0)</li></ul></li><li>单向管道 <ul><li>var myCh chan&lt;- int = make(chan&lt;- int, 0)</li><li>var myCh &lt;-chan int = make(&lt;-chan int, 0)</li></ul></li></ul><div class="warning custom-block"><p class="custom-block-title">注意</p><ul><li>双向管道可以自动转换为任意一种单向管道</li><li>单向管道不能转换为双向管道</li></ul></div><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token string">&quot;fmt&quot;</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token comment">// 1.定义一个双向管道</span>

	<span class="token keyword">var</span> myCh <span class="token keyword">chan</span> <span class="token builtin">int</span> <span class="token operator">=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span>

	<span class="token comment">// 2.将双向管道转换单向管道</span>

	<span class="token keyword">var</span> myCh2 <span class="token keyword">chan</span><span class="token operator">&lt;-</span> <span class="token builtin">int</span>

	myCh2 <span class="token operator">=</span> myCh

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>myCh2<span class="token punctuation">)</span>

	<span class="token keyword">var</span> myCh3 <span class="token operator">&lt;-</span><span class="token keyword">chan</span> <span class="token builtin">int</span>

	myCh3 <span class="token operator">=</span> myCh

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>myCh3<span class="token punctuation">)</span>

	<span class="token comment">// 3.双向管道,可读可写</span>

	myCh <span class="token operator">&lt;-</span> <span class="token number">1</span>

	myCh <span class="token operator">&lt;-</span> <span class="token number">2</span>

	myCh <span class="token operator">&lt;-</span> <span class="token number">3</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token operator">&lt;-</span>myCh<span class="token punctuation">)</span>

	<span class="token comment">// 3.只写管道,只能写, 不能读</span>

	<span class="token comment">// myCh2&lt;-666</span>

	<span class="token comment">// fmt.Println(&lt;-myCh2)</span>

	<span class="token comment">// 4.指读管道, 只能读,不能写</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token operator">&lt;-</span>myCh3<span class="token punctuation">)</span>

	<span class="token comment">//myCh3&lt;-666</span>

	<span class="token comment">// 注意点: 管道之间赋值是地址传递, 以上三个管道底层指向相同容器</span>

<span class="token punctuation">}</span>

</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><ul><li>单向管道作为函数参数</li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;fmt&quot;</span>

	<span class="token string">&quot;math/rand&quot;</span>

	<span class="token string">&quot;time&quot;</span>
<span class="token punctuation">)</span>

<span class="token comment">// 定义生产者</span>

<span class="token keyword">func</span> <span class="token function">producer</span><span class="token punctuation">(</span>myCh <span class="token keyword">chan</span><span class="token operator">&lt;-</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	rand<span class="token punctuation">.</span><span class="token function">Seed</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span><span class="token function">Now</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">UnixNano</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

	<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>

		num <span class="token operator">:=</span> rand<span class="token punctuation">.</span><span class="token function">Intn</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">)</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;生产者生产了: &quot;</span><span class="token punctuation">,</span> num<span class="token punctuation">)</span>

		<span class="token comment">// 往管道中写入数据</span>

		myCh <span class="token operator">&lt;-</span> num

		<span class="token comment">//time.Sleep(time.Millisecond \* 500)</span>

	<span class="token punctuation">}</span>

	<span class="token comment">// 生产完毕之后关闭管道</span>

	<span class="token function">close</span><span class="token punctuation">(</span>myCh<span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;生产者停止生产&quot;</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>

<span class="token comment">// 定义消费者</span>

<span class="token keyword">func</span> <span class="token function">consumer</span><span class="token punctuation">(</span>myCh <span class="token operator">&lt;-</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token comment">// 不断从管道中获取数据, 直到管道关闭位置</span>

	<span class="token keyword">for</span> <span class="token punctuation">{</span>

		<span class="token keyword">if</span> num<span class="token punctuation">,</span> ok <span class="token operator">:=</span> <span class="token operator">&lt;-</span>myCh<span class="token punctuation">;</span> <span class="token operator">!</span>ok <span class="token punctuation">{</span>

			<span class="token keyword">break</span>

		<span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span>

			fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;---消费者消费了&quot;</span><span class="token punctuation">,</span> num<span class="token punctuation">)</span>

		<span class="token punctuation">}</span>

	<span class="token punctuation">}</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;消费者停止消费&quot;</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token comment">// 定义缓冲区</span>

	<span class="token keyword">var</span> myCh <span class="token operator">=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span>

	<span class="token keyword">go</span> <span class="token function">producer</span><span class="token punctuation">(</span>myCh<span class="token punctuation">)</span>

	<span class="token function">consumer</span><span class="token punctuation">(</span>myCh<span class="token punctuation">)</span>

<span class="token punctuation">}</span>

</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><hr><h2 id="select-选择结构" tabindex="-1">select 选择结构 <a class="header-anchor" href="#select-选择结构" aria-hidden="true">#</a></h2><ul><li>select 是 Go 中的一个控制结构，类似于 switch 语句，用于处理异步 IO 操作 <ul><li>如果有多个 case 都可以运行，select 会随机选出一个执行，其他不会执行。</li><li>如果没有可运行的 case 语句，且有 default 语句，那么就会执行 default 的动作。</li><li>如果没有可运行的 case 语句，且没有 default 语句，select 将阻塞，直到某个 case 通信可以运行</li></ul></li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">select</span> <span class="token punctuation">{</span>

	<span class="token keyword">case</span> IO 操作 <span class="token number">1</span><span class="token punctuation">:</span>

		IO 操作 <span class="token number">1</span> 读取或写入成功就执行

	<span class="token keyword">case</span> IO 操作 <span class="token number">2</span><span class="token punctuation">:</span>

		IO 操作 <span class="token number">2</span> 读取或写入成功就执行

	<span class="token keyword">default</span><span class="token punctuation">:</span>

		如果上面 <span class="token keyword">case</span> 都没有成功，则进入 <span class="token keyword">default</span> 处理流程

<span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><div class="warning custom-block"><p class="custom-block-title">注意</p><ul><li>select 的 case 后面必须是一个 IO 操作</li><li>一般情况下使用 select 结构不用写 default</li></ul></div><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;fmt&quot;</span>

	<span class="token string">&quot;time&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token comment">// 创建管道</span>

	<span class="token keyword">var</span> myCh <span class="token operator">=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">)</span>

	<span class="token keyword">var</span> exitCh <span class="token operator">=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">bool</span><span class="token punctuation">)</span>

	<span class="token comment">// 生产数据</span>

	<span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

		<span class="token keyword">for</span> i <span class="token operator">:=</span> <span class="token number">0</span><span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>

			myCh <span class="token operator">&lt;-</span> i

			time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>Second<span class="token punctuation">)</span>

		<span class="token punctuation">}</span>

		<span class="token comment">//close(myCh)</span>

		exitCh <span class="token operator">&lt;-</span> <span class="token boolean">true</span>

	<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	<span class="token comment">// 读取数据</span>

	<span class="token keyword">for</span> <span class="token punctuation">{</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;读取代码被执行了&quot;</span><span class="token punctuation">)</span>

		<span class="token keyword">select</span> <span class="token punctuation">{</span>

		<span class="token keyword">case</span> num <span class="token operator">:=</span> <span class="token operator">&lt;-</span>myCh<span class="token punctuation">:</span>

			fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;读到了&quot;</span><span class="token punctuation">,</span> num<span class="token punctuation">)</span>

		<span class="token keyword">case</span> <span class="token operator">&lt;-</span>exitCh<span class="token punctuation">:</span>

			<span class="token comment">//break // 没用, 跳出的是 select</span>

			<span class="token keyword">return</span>

		<span class="token punctuation">}</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;-----------&quot;</span><span class="token punctuation">)</span>

	<span class="token punctuation">}</span>

<span class="token punctuation">}</span>

</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><ul><li>select 应用场景 <ul><li>实现多路监听</li><li>实现超时处理</li></ul></li></ul><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>

	<span class="token string">&quot;fmt&quot;</span>

	<span class="token string">&quot;runtime&quot;</span>

	<span class="token string">&quot;time&quot;</span>

<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token comment">// 1.创建管道</span>

	myCh <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">int</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">)</span>

	exitCh <span class="token operator">:=</span> <span class="token function">make</span><span class="token punctuation">(</span><span class="token keyword">chan</span> <span class="token builtin">bool</span><span class="token punctuation">)</span>

	<span class="token comment">// 2.生成数据</span>

	<span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

		<span class="token keyword">for</span> i<span class="token operator">:=</span><span class="token number">0</span><span class="token punctuation">;</span> i<span class="token operator">&lt;</span><span class="token number">10</span><span class="token punctuation">;</span> i<span class="token operator">++</span> <span class="token punctuation">{</span>

			myCh<span class="token operator">&lt;-</span>i

			time<span class="token punctuation">.</span><span class="token function">Sleep</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>Second \<span class="token operator">*</span> <span class="token number">3</span><span class="token punctuation">)</span>

		<span class="token punctuation">}</span>

	<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	<span class="token comment">// 3.获取数据</span>

	<span class="token keyword">go</span> <span class="token keyword">func</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

		<span class="token keyword">for</span><span class="token punctuation">{</span>

			<span class="token keyword">select</span> <span class="token punctuation">{</span>

			<span class="token keyword">case</span> num<span class="token operator">:=</span> <span class="token operator">&lt;-</span>myCh<span class="token punctuation">:</span>

				fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>num<span class="token punctuation">)</span>

			<span class="token keyword">case</span> <span class="token operator">&lt;-</span>time<span class="token punctuation">.</span><span class="token function">After</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>Second \<span class="token operator">*</span> <span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">:</span>

				exitCh<span class="token operator">&lt;-</span><span class="token boolean">true</span>

				runtime<span class="token punctuation">.</span><span class="token function">Goexit</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

			<span class="token punctuation">}</span>

		<span class="token punctuation">}</span>

	<span class="token punctuation">}</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	<span class="token operator">&lt;-</span>exitCh

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;程序结束&quot;</span><span class="token punctuation">)</span>

<span class="token punctuation">}</span>
</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><hr><h2 id="定时器补充" tabindex="-1">定时器补充 <a class="header-anchor" href="#定时器补充" aria-hidden="true">#</a></h2><ul><li>一次性定时器</li><li>NewTimer 函数 <ul><li>func NewTimer(d Duration) *Timer</li><li>NewTimer 创建一个 Timer，它会在到期后向 Timer 自身的 C 字段发送当时的时间</li></ul></li></ul><div class="language-go"><pre><code><span class="token keyword">type</span> Timer <span class="token keyword">struct</span> <span class="token punctuation">{</span>

  C <span class="token operator">&lt;-</span><span class="token keyword">chan</span> Time <span class="token comment">// 对于我们来说, 这个属性是只读的管道</span>

  r runtimeTimer

<span class="token punctuation">}</span>
</code></pre></div><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;fmt&quot;</span>

	<span class="token string">&quot;time&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	start <span class="token operator">:=</span> time<span class="token punctuation">.</span><span class="token function">Now</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;开始时间&quot;</span><span class="token punctuation">,</span> start<span class="token punctuation">)</span>

	timer <span class="token operator">:=</span> time<span class="token punctuation">.</span><span class="token function">NewTimer</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>Second <span class="token operator">*</span> <span class="token number">3</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;读取之前代码被执行&quot;</span><span class="token punctuation">)</span>

	end <span class="token operator">:=</span> <span class="token operator">&lt;-</span>timer<span class="token punctuation">.</span>C <span class="token comment">// 系统写入数据之前会阻塞</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;读取之后代码被执行&quot;</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;结束时间&quot;</span><span class="token punctuation">,</span> end<span class="token punctuation">)</span>

<span class="token punctuation">}</span>

</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><ul><li>After 函数 <ul><li>func After(d Duration) &lt;-chan Time</li><li>底层就是对 NewTimer 的封装, 只不过返回值不同而已</li></ul></li></ul><div class="language-go"><pre><code><span class="token keyword">func</span> <span class="token function">After</span><span class="token punctuation">(</span>d Duration<span class="token punctuation">)</span> <span class="token operator">&lt;-</span><span class="token keyword">chan</span> Time <span class="token punctuation">{</span>

  <span class="token keyword">return</span> <span class="token function">NewTimer</span><span class="token punctuation">(</span>d<span class="token punctuation">)</span><span class="token punctuation">.</span>C

<span class="token punctuation">}</span>
</code></pre></div><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;fmt&quot;</span>

	<span class="token string">&quot;time&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	start <span class="token operator">:=</span> time<span class="token punctuation">.</span><span class="token function">Now</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;开始时间&quot;</span><span class="token punctuation">,</span> start<span class="token punctuation">)</span>

	timer <span class="token operator">:=</span> time<span class="token punctuation">.</span><span class="token function">After</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>Second <span class="token operator">*</span> <span class="token number">3</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;读取之前代码被执行&quot;</span><span class="token punctuation">)</span>

	end <span class="token operator">:=</span> <span class="token operator">&lt;-</span>timer <span class="token comment">// 系统写入数据之前会阻塞</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;读取之后代码被执行&quot;</span><span class="token punctuation">)</span>

	fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span><span class="token string">&quot;结束时间&quot;</span><span class="token punctuation">,</span> end<span class="token punctuation">)</span>

<span class="token punctuation">}</span>

</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div><hr><ul><li>周期性定时器</li><li>NewTicker 函数 <ul><li>func NewTicker(d Duration) *Ticker</li><li>和 NewTimer 差不多, 只不过 NewTimer 只会往管道中写入一次数据, 而 NewTicker 每隔一段时间就会写一次</li></ul></li></ul><div class="language-go"><pre><code><span class="token keyword">type</span> Ticker <span class="token keyword">struct</span> <span class="token punctuation">{</span>

  C <span class="token operator">&lt;-</span><span class="token keyword">chan</span> Time <span class="token comment">// 周期性传递时间信息的通道</span>

  <span class="token comment">// 内含隐藏或非导出字段</span>

<span class="token punctuation">}</span>
</code></pre></div><div class="demo-block demo-index" data-v-176498b8><div class="source" data-v-176498b8><!--[--><div>示例</div><!--]--></div><div class="meta" data-v-176498b8><!----><div class="highlight" data-v-176498b8><!--[--><div class="language-go"><pre><code><span class="token keyword">package</span> main

<span class="token keyword">import</span> <span class="token punctuation">(</span>
	<span class="token string">&quot;fmt&quot;</span>

	<span class="token string">&quot;time&quot;</span>
<span class="token punctuation">)</span>

<span class="token keyword">func</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>

	<span class="token comment">// 1.创建一个周期定时器</span>

	ticker <span class="token operator">:=</span> time<span class="token punctuation">.</span><span class="token function">NewTicker</span><span class="token punctuation">(</span>time<span class="token punctuation">.</span>Second<span class="token punctuation">)</span>

	<span class="token comment">// 2.不断从重启定时器中获取时间</span>

	<span class="token keyword">for</span> <span class="token punctuation">{</span>

		t <span class="token operator">:=</span> <span class="token operator">&lt;-</span>ticker<span class="token punctuation">.</span>C <span class="token comment">// 系统写入数据之前会阻塞</span>

		fmt<span class="token punctuation">.</span><span class="token function">Println</span><span class="token punctuation">(</span>t<span class="token punctuation">)</span>

	<span class="token punctuation">}</span>

<span class="token punctuation">}</span>

</code></pre></div><!--]--></div></div><div class="demo-block-control" data-v-176498b8><i class="control-icon icon-caret-down" data-v-176498b8></i><span style="display:none;" class="control-text" data-v-176498b8>显示代码</span><div class="control-button-wrap" data-v-176498b8><span style="display:none;" class="control-button copy-button" data-v-176498b8>复制代码片段</span></div></div></div></div></div><footer class="page-footer" data-v-7eddb2c4 data-v-07c132fc><div class="edit" data-v-07c132fc><div class="edit-link" data-v-07c132fc data-v-1ed99556><!----></div></div><div class="updated" data-v-07c132fc><!----></div></footer><div class="next-and-prev-link" data-v-7eddb2c4 data-v-38ede35f><div class="container" data-v-38ede35f><div class="prev" data-v-38ede35f><a class="link" href="/blog-vitepress/golang/basic-knowledge" data-v-38ede35f><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon icon-prev" data-v-38ede35f><path d="M19,11H7.4l5.3-5.3c0.4-0.4,0.4-1,0-1.4s-1-0.4-1.4,0l-7,7c-0.1,0.1-0.2,0.2-0.2,0.3c-0.1,0.2-0.1,0.5,0,0.8c0.1,0.1,0.1,0.2,0.2,0.3l7,7c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3c0.4-0.4,0.4-1,0-1.4L7.4,13H19c0.6,0,1-0.4,1-1S19.6,11,19,11z"></path></svg><span class="text" data-v-38ede35f>基础知识</span></a></div><div class="next" data-v-38ede35f><a class="link" href="/blog-vitepress/notes/git" data-v-38ede35f><span class="text" data-v-38ede35f>git</span><svg xmlns="http://www.w3.org/2000/svg" viewbox="0 0 24 24" class="icon icon-next" data-v-38ede35f><path d="M19.9,12.4c0.1-0.2,0.1-0.5,0-0.8c-0.1-0.1-0.1-0.2-0.2-0.3l-7-7c-0.4-0.4-1-0.4-1.4,0s-0.4,1,0,1.4l5.3,5.3H5c-0.6,0-1,0.4-1,1s0.4,1,1,1h11.6l-5.3,5.3c-0.4,0.4-0.4,1,0,1.4c0.2,0.2,0.5,0.3,0.7,0.3s0.5-0.1,0.7-0.3l7-7C19.8,12.6,19.9,12.5,19.9,12.4z"></path></svg></a></div></div></div><!--[--><!--]--></div></main></div><!----><!--]--></div>
    <script>__VP_HASH_MAP__ = JSON.parse("{\"fxiaoke_analysis_customer.md\":\"bf9c1be3\",\"fxiaoke_analysis_index.md\":\"e41b2d69\",\"fxiaoke_analysis_org-employee-user.md\":\"0705db6d\",\"fxiaoke_analysis_product.md\":\"f1b8ba66\",\"fxiaoke_api-analysis_index.md\":\"56f67eea\",\"golang_article_index.md\":\"5682931e\",\"golang_article_index1.md\":\"8f5ae353\",\"golang_basic-knowledge.md\":\"27b162f2\",\"golang_basic.md\":\"b7054939\",\"index.md\":\"3fc26fa2\",\"notes_account_screat.md\":\"977ecba6\",\"notes_docker.md\":\"4fcc0877\",\"notes_git.md\":\"962a40de\",\"notes_linux.md\":\"3b58c4a7\",\"notes_love.md\":\"eeaa558f\",\"notes_mysql.md\":\"4541ac0d\",\"notes_ssh.md\":\"e5bddd19\",\"notes_typescript.md\":\"c0867328\",\"other_easy_api.md\":\"387847ea\",\"phpunit_assert.md\":\"09a25390\",\"phpunit_base.md\":\"2c3fc63e\",\"phpunit_mock.md\":\"ad73e9a3\"}")</script>
    <script type="module" async src="/blog-vitepress/assets/app.b68c4d44.js"></script>
    
  </body>
</html>